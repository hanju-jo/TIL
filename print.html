<!DOCTYPE HTML>
<html lang="ko" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Hanju's TIL Book</title>
        
        <meta name="robots" content="noindex" />
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="index.html">README</a></li><li class="chapter-item "><a href="data-visualization/index.html"><strong aria-hidden="true">1.</strong> Data Visualization</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="data-visualization/d3.js-tutorial.html"><strong aria-hidden="true">1.1.</strong> D3.js Tutorial</a></li></ol></li><li class="chapter-item "><a href="database/index.html"><strong aria-hidden="true">2.</strong> Database</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="database/mongodb-setup.html"><strong aria-hidden="true">2.1.</strong> Mongodb Setup</a></li><li class="chapter-item "><a href="database/postgresql-on-ubuntu.html"><strong aria-hidden="true">2.2.</strong> Postgresql On Ubuntu</a></li></ol></li><li class="chapter-item "><a href="design-patterns/index.html"><strong aria-hidden="true">3.</strong> Design Patterns</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="design-patterns/abstract-factory.html"><strong aria-hidden="true">3.1.</strong> Abstract Factory</a></li><li class="chapter-item "><a href="design-patterns/adapter.html"><strong aria-hidden="true">3.2.</strong> Adapter</a></li><li class="chapter-item "><a href="design-patterns/decorator.html"><strong aria-hidden="true">3.3.</strong> Decorator</a></li><li class="chapter-item "><a href="design-patterns/delegation.html"><strong aria-hidden="true">3.4.</strong> Delegation</a></li><li class="chapter-item "><a href="design-patterns/factory.html"><strong aria-hidden="true">3.5.</strong> Factory</a></li></ol></li><li class="chapter-item "><a href="django/index.html"><strong aria-hidden="true">4.</strong> Django</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="django/deploying-django-project-on-ubuntu-using-nginx-and-gunicorn.html"><strong aria-hidden="true">4.1.</strong> Deploying Django Project On Ubuntu Using Nginx And Gunicorn</a></li><li class="chapter-item "><a href="django/django-bluebook.html"><strong aria-hidden="true">4.2.</strong> Django Bluebook</a></li><li class="chapter-item "><a href="django/django-setup.html"><strong aria-hidden="true">4.3.</strong> Django Setup</a></li><li class="chapter-item "><a href="django/django-with-postgresql-on-aws-ec2.html"><strong aria-hidden="true">4.4.</strong> Django With Postgresql On Aws Ec2</a></li><li class="chapter-item "><a href="django/test-driven-development-with-python.html"><strong aria-hidden="true">4.5.</strong> Test Driven Development With Python</a></li></ol></li><li class="chapter-item "><a href="docker/index.html"><strong aria-hidden="true">5.</strong> Docker</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="docker/about-docker.html"><strong aria-hidden="true">5.1.</strong> About Docker</a></li><li class="chapter-item "><a href="docker/docker-cheatsheet.html"><strong aria-hidden="true">5.2.</strong> Docker Cheatsheet</a></li><li class="chapter-item "><a href="docker/docker-for-jekyll.html"><strong aria-hidden="true">5.3.</strong> Docker For Jekyll</a></li><li class="chapter-item "><a href="docker/gollum-via-docker.html"><strong aria-hidden="true">5.4.</strong> Gollum Via Docker</a></li></ol></li><li class="chapter-item "><a href="english/index.html"><strong aria-hidden="true">6.</strong> English</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="english/newly-learned-words-or-phrases.html"><strong aria-hidden="true">6.1.</strong> Newly Learned Words Or Phrases</a></li></ol></li><li class="chapter-item "><a href="git/index.html"><strong aria-hidden="true">7.</strong> Git</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="git/git-cheat-sheet.html"><strong aria-hidden="true">7.1.</strong> Git Cheat Sheet</a></li><li class="chapter-item "><a href="git/steps-after-fork.html"><strong aria-hidden="true">7.2.</strong> Steps After Fork</a></li></ol></li><li class="chapter-item "><a href="jekyll/index.html"><strong aria-hidden="true">8.</strong> Jekyll</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="jekyll/add-disqus-to-jekyll.html"><strong aria-hidden="true">8.1.</strong> Add Disqus To Jekyll</a></li><li class="chapter-item "><a href="jekyll/jekyll-with-google-analytics.html"><strong aria-hidden="true">8.2.</strong> Jekyll With Google Analytics</a></li></ol></li><li class="chapter-item "><a href="ml/index.html"><strong aria-hidden="true">9.</strong> Ml</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="ml/ml-study-notes.html"><strong aria-hidden="true">9.1.</strong> Ml Study Notes</a></li></ol></li><li class="chapter-item "><a href="python/index.html"><strong aria-hidden="true">10.</strong> Python</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="python/effective-python.html"><strong aria-hidden="true">10.1.</strong> Effective Python</a></li><li class="chapter-item "><a href="python/fundamental-python.html"><strong aria-hidden="true">10.2.</strong> Fundamental Python</a></li><li class="chapter-item "><a href="python/python-react-setup.html"><strong aria-hidden="true">10.3.</strong> Python React Setup</a></li><li class="chapter-item "><a href="python/python-tips.html"><strong aria-hidden="true">10.4.</strong> Python Tips</a></li><li class="chapter-item "><a href="python/python-virtualenv.html"><strong aria-hidden="true">10.5.</strong> Python Virtualenv</a></li><li class="chapter-item "><a href="python/transforming-code-into-beautiful-idiomatic-python.html"><strong aria-hidden="true">10.6.</strong> Transforming Code Into Beautiful Idiomatic Python</a></li></ol></li><li class="chapter-item "><a href="reactjs/index.html"><strong aria-hidden="true">11.</strong> Reactjs</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="reactjs/reactjs-setup.html"><strong aria-hidden="true">11.1.</strong> Reactjs Setup</a></li></ol></li><li class="chapter-item "><a href="sicp/index.html"><strong aria-hidden="true">12.</strong> Sicp</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="sicp/1_02.html"><strong aria-hidden="true">12.1.</strong> 1_02</a></li><li class="chapter-item "><a href="sicp/1_03.html"><strong aria-hidden="true">12.2.</strong> 1_03</a></li><li class="chapter-item "><a href="sicp/1_05.html"><strong aria-hidden="true">12.3.</strong> 1_05</a></li><li class="chapter-item "><a href="sicp/1_06.html"><strong aria-hidden="true">12.4.</strong> 1_06</a></li><li class="chapter-item "><a href="sicp/1_07.html"><strong aria-hidden="true">12.5.</strong> 1_07</a></li><li class="chapter-item "><a href="sicp/1_08.html"><strong aria-hidden="true">12.6.</strong> 1_08</a></li><li class="chapter-item "><a href="sicp/1_09.html"><strong aria-hidden="true">12.7.</strong> 1_09</a></li><li class="chapter-item "><a href="sicp/1_10.html"><strong aria-hidden="true">12.8.</strong> 1_10</a></li><li class="chapter-item "><a href="sicp/racket.html"><strong aria-hidden="true">12.9.</strong> Racket</a></li></ol></li><li class="chapter-item "><a href="snippets/index.html"><strong aria-hidden="true">13.</strong> Snippets</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="snippets/c++.html"><strong aria-hidden="true">13.1.</strong> C++</a></li></ol></li><li class="chapter-item "><a href="uncategorized/index.html"><strong aria-hidden="true">14.</strong> Uncategorized</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="uncategorized/dotfiles.html"><strong aria-hidden="true">14.1.</strong> Dotfiles</a></li><li class="chapter-item "><a href="uncategorized/hmac.html"><strong aria-hidden="true">14.2.</strong> Hmac</a></li><li class="chapter-item "><a href="uncategorized/unix-command-tips.html"><strong aria-hidden="true">14.3.</strong> Unix Command Tips</a></li></ol></li><li class="chapter-item "><a href="vim/index.html"><strong aria-hidden="true">15.</strong> Vim</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="vim/plugin-manager-vim-plug.html"><strong aria-hidden="true">15.1.</strong> Plugin Manager Vim Plug</a></li><li class="chapter-item "><a href="vim/plugin-manager-vundle.html"><strong aria-hidden="true">15.2.</strong> Plugin Manager Vundle</a></li><li class="chapter-item "><a href="vim/plugin-youcompleteme.html"><strong aria-hidden="true">15.3.</strong> Plugin Youcompleteme</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Hanju's TIL Book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <a href="https://github.com/hanju-jo/TIL" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#til-book" id="til-book">TIL Book</a></h1>
<p>Today I Learned. 오늘 내가 배운 것.</p>
<h2><a class="header" href="#license" id="license">License</a></h2>
<p>This book is licensed under a <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0
International License</a>.</p>
<p><a href="http://creativecommons.org/licenses/by-sa/4.0/"><img src="https://licensebuttons.net/l/by-sa/4.0/88x31.png" alt="CC BY-SA 4.0" /></a></p>
<h1><a class="header" href="#a-hrefhttpswwwyoutubecomplaylistlistpl6il2r9i3bqh9pmbof5wa5e1wog3ft22pd3js-tutoriala" id="a-hrefhttpswwwyoutubecomplaylistlistpl6il2r9i3bqh9pmbof5wa5e1wog3ft22pd3js-tutoriala"><a href="https://www.youtube.com/playlist?list=PL6il2r9i3BqH9PmbOf5wA5E1wOG3FT22p">D3.js tutorial</a></a></h1>
<h3><a class="header" href="#1-introduction" id="1-introduction">1. Introduction</a></h3>
<p><a href="data-visualization/d3js.org">d3js.org</a></p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;D3 Tutorial&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;

    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h4><a class="header" href="#run-simple-http-server-with-python3" id="run-simple-http-server-with-python3">Run Simple HTTP Server with Python3</a></h4>
<pre><code class="language-bash">$ python -m http.server 8000
</code></pre>
<h3><a class="header" href="#2-select-and-append" id="2-select-and-append">2. Select and Append</a></h3>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;D3 Tutorial&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;
        d3.select(&quot;body&quot;).append(&quot;p&quot;).text(&quot;Hello World!&quot;);
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3><a class="header" href="#3-basic-svg-shapes" id="3-basic-svg-shapes">3. Basic SVG shapes</a></h3>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;D3 Tutorial&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;
        var canvas = d3.select(&quot;body&quot;)
                    .append(&quot;svg&quot;)
                    .attr(&quot;width&quot;, 1000)
                    .attr(&quot;height&quot;, 1000);
        var circle = canvas.append(&quot;circle&quot;)
                    .attr(&quot;cx&quot;, 250)
                    .attr(&quot;cy&quot;, 250)
                    .attr(&quot;r&quot;, 50)
                    .attr(&quot;fill&quot;, &quot;red&quot;);

        var rect = canvas.append(&quot;rect&quot;)
                    .attr(&quot;width&quot;, 100)
                    .attr(&quot;height&quot;, 50);

        var line = canvas.append(&quot;line&quot;)
                    .attr(&quot;x1&quot;, 0)
                    .attr(&quot;y1&quot;, 100)
                    .attr(&quot;x2&quot;, 400)
                    .attr(&quot;y2&quot;, 500)
                    .attr(&quot;stroke&quot;, &quot;green&quot;)
                    .attr(&quot;stroke-width&quot;, 10);
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3><a class="header" href="#4-visualizing-data" id="4-visualizing-data">4. Visualizing data</a></h3>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;D3 Tutorial&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;

        var dataArray = [20, 40, 70];

        var canvas = d3.select(&quot;body&quot;)
                    .append(&quot;svg&quot;)
                    .attr(&quot;width&quot;, 1000)
                    .attr(&quot;height&quot;, 1000);

        var bars = canvas.selectAll(&quot;rect&quot;)
                    .data(dataArray)
                    .enter()
                        .append(&quot;rect&quot;)
                        .attr(&quot;width&quot;, function(d) { return d*10; })
                        .attr(&quot;height&quot;, 50)
                        .attr(&quot;y&quot;, function(d, i) { return i*100 });

    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3><a class="header" href="#5-scales" id="5-scales">5. Scales</a></h3>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;D3 Tutorial&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;

        var dataArray = [5, 30, 50, 80];
        var width = 500;
        var height = 500;

        var widthScale = d3.scale.linear()
                        .domain([0, 80])
                        .range([0, width]);

        var color = d3.scale.linear().domain([0, 80]).range([&quot;red&quot;, &quot;yellow&quot;]);

        var canvas = d3.select(&quot;body&quot;)
                    .append(&quot;svg&quot;)
                    .attr(&quot;width&quot;, width)
                    .attr(&quot;height&quot;, height);

        var bars = canvas.selectAll(&quot;rect&quot;)
                    .data(dataArray)
                    .enter()
                        .append(&quot;rect&quot;)
                        .attr(&quot;width&quot;, function(d) { return widthScale(d) })
                        .attr(&quot;height&quot;, 50)
                        .attr(&quot;fill&quot;, function(d) { return color(d) })
                        .attr(&quot;y&quot;, function(d, i) { return i*100 });

    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3><a class="header" href="#6-groups-and-axes" id="6-groups-and-axes">6. Groups and axes</a></h3>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;D3 Tutorial&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;

        var dataArray = [5, 30, 50, 80];
        var width = 500;
        var height = 500;

        var widthScale = d3.scale.linear()
                        .domain([0, 80])
                        .range([0, width]);

        var color = d3.scale.linear().domain([0, 80]).range([&quot;red&quot;, &quot;yellow&quot;]);

        var axis = d3.svg.axis()
                    .ticks(20)
                    .scale(widthScale);

        var canvas = d3.select(&quot;body&quot;)
                    .append(&quot;svg&quot;)
                    .attr(&quot;width&quot;, width)
                    .attr(&quot;height&quot;, height)
                    .append(&quot;g&quot;)
                    .attr(&quot;transform&quot;, &quot;translate(50, 50)&quot;);

        var bars = canvas.selectAll(&quot;rect&quot;)
                    .data(dataArray)
                    .enter()
                        .append(&quot;rect&quot;)
                        .attr(&quot;width&quot;, function(d) { return widthScale(d) })
                        .attr(&quot;height&quot;, 50)
                        .attr(&quot;fill&quot;, function(d) { return color(d) })
                        .attr(&quot;y&quot;, function(d, i) { return i*100 });

        canvas.append(&quot;g&quot;)
            .attr(&quot;transform&quot;, &quot;translate(0, 400)&quot;)
            .call(axis);

    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3><a class="header" href="#7-enter-update-exit" id="7-enter-update-exit">7. Enter, Update, Exit</a></h3>
<ul>
<li>DOM elements &lt; data elements <strong>=&gt; enter</strong></li>
<li>DOM elements &gt; data elements <strong>=&gt; exit</strong></li>
<li>DOM elements = data elements <strong>=&gt; update</strong></li>
</ul>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;D3 Tutorial&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;
        var data = [10, 20];

        var canvas = d3.select(&quot;body&quot;)
                    .append(&quot;svg&quot;)
                    .attr(&quot;width&quot;, 500)
                    .attr(&quot;height&quot;, 500);
                    
        var circle = canvas.append(&quot;circle&quot;)
                        .attr(&quot;cx&quot;, 50)
                        .attr(&quot;cy&quot;, 100)
                        .attr(&quot;r&quot;, 25);

        var circles = canvas.selectAll(&quot;circle&quot;)
                    .data(data)
                    .attr(&quot;fill&quot;, &quot;red&quot;)    // update
                    .enter()                // enter
                        .append(&quot;circle&quot;)
                        .attr(&quot;cx&quot;, 50)
                        .attr(&quot;cy&quot;, 50)
                        .attr(&quot;fill&quot;, &quot;green&quot;)
                        .attr(&quot;r&quot;, 25);
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;D3 Tutorial&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;
        var data = [10];

        var canvas = d3.select(&quot;body&quot;)
                    .append(&quot;svg&quot;)
                    .attr(&quot;width&quot;, 500)
                    .attr(&quot;height&quot;, 500);
                    
        var circle1 = canvas.append(&quot;circle&quot;)
                        .attr(&quot;cx&quot;, 50)
                        .attr(&quot;cy&quot;, 100)
                        .attr(&quot;r&quot;, 25);
        
        var circle2 = canvas.append(&quot;circle&quot;)
                        .attr(&quot;cx&quot;, 50)
                        .attr(&quot;cy&quot;, 200)
                        .attr(&quot;r&quot;, 25);

        var circles = canvas.selectAll(&quot;circle&quot;)
                    .data(data)
                    .attr(&quot;fill&quot;, &quot;green&quot;)
                    .exit()
                        .attr(&quot;fill&quot;, &quot;blue&quot;);
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3><a class="header" href="#8-transition" id="8-transition">8. Transition</a></h3>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;D3 Tutorial&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;
        var data = [10];

        var canvas = d3.select(&quot;body&quot;)
                    .append(&quot;svg&quot;)
                    .attr(&quot;width&quot;, 500)
                    .attr(&quot;height&quot;, 500);
                    
        var circle = canvas.append(&quot;circle&quot;)
                        .attr(&quot;cx&quot;, 50)
                        .attr(&quot;cy&quot;, 50)
                        .attr(&quot;r&quot;, 25);

        circle.transition()
            .duration(1500)
            .delay(2000)
            .attr(&quot;cx&quot;, 150)
            .transition()
            .attr(&quot;cy&quot;, 200)
            .transition()
            .attr(&quot;cx&quot;, 50);

    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3><a class="header" href="#9-working-with-arrays" id="9-working-with-arrays">9. Working with Arrays</a></h3>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;D3 Tutorial&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;
        var data = [10, 20, 30, 40, 50];
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h6><a class="header" href="#open-console-in-the-browser" id="open-console-in-the-browser">Open console in the browser</a></h6>
<pre><code class="language-javascript">&gt; data.sort(d3.descending);
[50, 40, 30, 20, 10]
&gt; d3.min(data);
10
&gt; d3.max(data);
50
&gt; d3.extent(data);
[10, 50]
&gt; d3.sum(data);
150
&gt; d3.mean(data);
30
&gt; d3.median(data);
30
&gt; d3.shuffle(data);
[30, 50, 40, 20, 10]
</code></pre>
<h3><a class="header" href="#10-loading-external-data" id="10-loading-external-data">10. Loading External Data</a></h3>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;D3 Tutorial&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;
        d3.csv(&quot;mydata.csv&quot;, function(data) {
        // d3.json(&quot;mydata.json&quot;, function(data)
            var canvas = d3.select(&quot;body&quot;).append(&quot;svg&quot;)
                .attr(&quot;width&quot;, 500)
                .attr(&quot;height&quot;, 500)

            canvas.selectAll(&quot;rect&quot;)
                .data(data)
                .enter()
                    .append(&quot;rect&quot;)
                    .attr(&quot;width&quot;, function(d){ return d.age*10; })
                    .attr(&quot;height&quot;, 48)
                    .attr(&quot;y&quot;, function(d, i){ return i*50; })
                    .attr(&quot;fill&quot;, &quot;blue&quot;);

            canvas.selectAll(&quot;text&quot;)
                .data(data)
                .enter()
                    .append(&quot;text&quot;)
                    .attr(&quot;fill&quot;, &quot;white&quot;)
                    .attr(&quot;y&quot;, function(d, i){ return i*50+24; })
                    .text(function(d){ return d.name; })
        })
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h6><a class="header" href="#my-datajson" id="my-datajson">my data.json</a></h6>
<pre><code class="language-json">[
    {&quot;name&quot;: &quot;Maria&quot;, &quot;age&quot;: 30},
    {&quot;name&quot;: &quot;Fred&quot;, &quot;age&quot;: 50},
    {&quot;name&quot;: &quot;Francis&quot;, &quot;age&quot;: 12}
]
</code></pre>
<h6><a class="header" href="#mydatacsv" id="mydatacsv">mydata.csv</a></h6>
<pre><code class="language-csv">&quot;name&quot;,&quot;age&quot;
&quot;Maria&quot;,30
&quot;Fred&quot;,50
&quot;Francis&quot;,12
</code></pre>
<h3><a class="header" href="#11-paths" id="11-paths">11. Paths</a></h3>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;D3 Tutorial&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;
        var canvas = d3.select(&quot;body&quot;).append(&quot;svg&quot;)
                .attr(&quot;width&quot;, 500)
                .attr(&quot;height&quot;, 500);
        
        var data = [
            {x: 10, y: 20},
            {x: 40, y: 60},
            {x: 50, y: 70}
        ];

        var group = canvas.append(&quot;g&quot;)
            .attr(&quot;transform&quot;, &quot;translate(100, 100)&quot;);

        var line = d3.svg.line()
                    .x(function(d){ return d.x; })
                    .y(function(d){ return d.y; });

        group.selectAll(&quot;path&quot;)
            .data([data])
            .enter()
                .append(&quot;path&quot;)
                .attr(&quot;d&quot;, line)
                .attr(&quot;fill&quot;, &quot;none&quot;)
                .attr(&quot;stroke&quot;, &quot;#000&quot;)
                .attr(&quot;stroke-width&quot;, 5);
        
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3><a class="header" href="#12-arcs" id="12-arcs">12. Arcs</a></h3>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;D3 Tutorial&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;
        var canvas = d3.select(&quot;body&quot;).append(&quot;svg&quot;)
                .attr(&quot;width&quot;, 500)
                .attr(&quot;height&quot;, 500);

        var group = canvas.append(&quot;g&quot;)
            .attr(&quot;transform&quot;, &quot;translate(100, 100)&quot;);

        var r = 100;
        var p = Math.PI * 2;

        var arc = d3.svg.arc()
            .innerRadius(r-20)
            .outerRadius(r)
            .startAngle(0)
            .endAngle(p-1);

        group.append(&quot;path&quot;)
            .attr(&quot;d&quot;, arc);
        
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3><a class="header" href="#13-the-pie-layout" id="13-the-pie-layout">13. The Pie Layout</a></h3>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;D3 Tutorial&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;

        var data = [10, 50, 80];
        var r = 300;

        var color = d3.scale.ordinal().range([&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;]);

        var canvas = d3.select(&quot;body&quot;).append(&quot;svg&quot;)
                .attr(&quot;width&quot;, 1500)
                .attr(&quot;height&quot;, 1500);

        var group = canvas.append(&quot;g&quot;)
            .attr(&quot;transform&quot;, &quot;translate(300, 300)&quot;);

        var arc = d3.svg.arc()
            .innerRadius(r-100)
            .outerRadius(r);

        var pie = d3.layout.pie()
            .value(function(d) { return d; });

        var arcs = group.selectAll(&quot;.arc&quot;)
            .data(pie(data))
            .enter()
                .append(&quot;g&quot;)
                .attr(&quot;class&quot;, &quot;arc&quot;);
        
        arcs.append(&quot;path&quot;)
            .attr(&quot;d&quot;, arc)
            .attr(&quot;fill&quot;, function(d){ return color(d.data); });

        arcs.append(&quot;text&quot;)
            .attr(&quot;transform&quot;, function(d) { return &quot;translate(&quot; + arc.centroid(d) + &quot;)&quot;})
            .attr(&quot;text-anchor&quot;, &quot;middle&quot;)
            .attr(&quot;font-size&quot;, &quot;3em&quot;)
            .attr(&quot;fill&quot;, &quot;white&quot;)
            .text(function(d) { return d.data })

    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3><a class="header" href="#14-the-tree-layout-12---diagonal" id="14-the-tree-layout-12---diagonal">14. The Tree Layout (1/2) - Diagonal</a></h3>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;D3 Tutorial&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;

        var canvas = d3.select(&quot;body&quot;).append(&quot;svg&quot;)
                .attr(&quot;width&quot;, 500)
                .attr(&quot;height&quot;, 500);

        var diagonal = d3.svg.diagonal()
            .source({ x: 10, y: 10 })
            .target({ x: 300, y:300 });
        
        canvas.append(&quot;path&quot;)
            .attr(&quot;fill&quot;, &quot;none&quot;)
            .attr(&quot;stroke&quot;, &quot;black&quot;)
            .attr(&quot;d&quot;, diagonal);

    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3><a class="header" href="#15-the-tree-layout-22" id="15-the-tree-layout-22">15. The Tree Layout (2/2)</a></h3>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;D3 Tutorial&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;

        var canvas = d3.select(&quot;body&quot;).append(&quot;svg&quot;)
                .attr(&quot;width&quot;, 500)
                .attr(&quot;height&quot;, 500)
                .append(&quot;g&quot;)
                    .attr(&quot;transform&quot;, &quot;translate(50, 50)&quot;);
                    
        var tree = d3.layout.tree()
                .size([400, 400]);

        d3.json(&quot;mydata.json&quot;, function(data){
            var nodes = tree.nodes(data);
            var links = tree.links(nodes);

            var node = canvas.selectAll(&quot;.node&quot;)
                .data(nodes)
                .enter()
                    .append(&quot;g&quot;)
                    .attr(&quot;class&quot;, &quot;node&quot;)
                    .attr(&quot;transform&quot;, function(d){ return &quot;translate(&quot; + d.y + &quot;,&quot; + d.x + &quot;)&quot;; })
            
            node.append(&quot;circle&quot;)
                .attr(&quot;r&quot;, 5)
                .attr(&quot;fill&quot;, &quot;steelblue&quot;);

            node.append(&quot;text&quot;)
                .text(function(d){ return d.name; })

            var diagonal = d3.svg.diagonal()
                .projection(function(d){ return [d.y, d.x]; });

            canvas.selectAll(&quot;.link&quot;)
                .data(links)
                .enter()
                    .append(&quot;path&quot;)
                    .attr(&quot;class&quot;, &quot;link&quot;)
                    .attr(&quot;fill&quot;, &quot;none&quot;)
                    .attr(&quot;stroke&quot;, &quot;#ADADAD&quot;)
                    .attr(&quot;d&quot;, diagonal);
        });

    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h6><a class="header" href="#mydatajson" id="mydatajson">mydata.json</a></h6>
<pre><code class="language-json">{
    &quot;name&quot;: &quot;Max&quot;,
    &quot;children&quot;: [
        {
            &quot;name&quot;: &quot;Sylvia&quot;,
            &quot;children&quot;: [
                {&quot;name&quot;: &quot;Craig&quot;},
                {&quot;name&quot;: &quot;Robin&quot;},
                {&quot;name&quot;: &quot;Anna&quot;}
            ]
        },
        {
            &quot;name&quot;: &quot;David&quot;,
            &quot;children&quot;: [
                {&quot;name&quot;: &quot;Craig&quot;},
                {&quot;name&quot;: &quot;Buffy&quot;}
            ]
        }
    ]
}
</code></pre>
<h3><a class="header" href="#16-cluster-pack--bubble-layouts" id="16-cluster-pack--bubble-layouts">16. Cluster, Pack &amp; Bubble Layouts</a></h3>
<h4><a class="header" href="#cluster" id="cluster">Cluster</a></h4>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;D3 Tutorial&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;

        var canvas = d3.select(&quot;body&quot;).append(&quot;svg&quot;)
                .attr(&quot;width&quot;, 500)
                .attr(&quot;height&quot;, 500)
                .append(&quot;g&quot;)
                    .attr(&quot;transform&quot;, &quot;translate(50, 50)&quot;);
                    
        var cluster = d3.layout.cluster()
                .size([400, 400]);

        d3.json(&quot;mydata.json&quot;, function(data){
            var nodes = cluster.nodes(data);
            var links = cluster.links(nodes);

            var node = canvas.selectAll(&quot;.node&quot;)
                .data(nodes)
                .enter()
                    .append(&quot;g&quot;)
                    .attr(&quot;class&quot;, &quot;node&quot;)
                    .attr(&quot;transform&quot;, function(d){ return &quot;translate(&quot; + d.y + &quot;,&quot; + d.x + &quot;)&quot;; })
            
            node.append(&quot;circle&quot;)
                .attr(&quot;r&quot;, 5)
                .attr(&quot;fill&quot;, &quot;steelblue&quot;);

            node.append(&quot;text&quot;)
                .text(function(d){ return d.name; })

            var diagonal = d3.svg.diagonal()
                .projection(function(d){ return [d.y, d.x]; });

            canvas.selectAll(&quot;.link&quot;)
                .data(links)
                .enter()
                    .append(&quot;path&quot;)
                    .attr(&quot;class&quot;, &quot;link&quot;)
                    .attr(&quot;fill&quot;, &quot;none&quot;)
                    .attr(&quot;stroke&quot;, &quot;#ADADAD&quot;)
                    .attr(&quot;d&quot;, diagonal);
        });

    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h4><a class="header" href="#pack" id="pack">Pack</a></h4>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;D3 Tutorial&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;
        var width = 800, 
            height = 600;

        var canvas = d3.select(&quot;body&quot;).append(&quot;svg&quot;)
                .attr(&quot;width&quot;, width)
                .attr(&quot;height&quot;, height)
                .append(&quot;g&quot;)
                    .attr(&quot;transform&quot;, &quot;translate(50, 50)&quot;);
                    
        var pack = d3.layout.pack()
            .size([width, height - 50])
            .padding(10);

        d3.json(&quot;mydata.json&quot;, function(data) {
            
            var nodes = pack.nodes(data);
            
            var node = canvas.selectAll(&quot;.node&quot;)
                .data(nodes)
                .enter()
                    .append(&quot;g&quot;)
                    .attr(&quot;class&quot;, &quot;node&quot;)
                    .attr(&quot;transform&quot;, function(d){ return &quot;translate(&quot; + d.x + &quot;,&quot; + d.y + &quot;)&quot;; });

            node.append(&quot;circle&quot;)
                .attr(&quot;r&quot;, function(d){ return d.r; })
                .attr(&quot;fill&quot;, &quot;steelblue&quot;)
                .attr(&quot;opacity&quot;, 0.25)
                .attr(&quot;stroke&quot;, &quot;#ADADAD&quot;)
                .attr(&quot;stroke-width&quot;, 2);

            node.append(&quot;text&quot;)
                .text(function(d){ return d.children ? &quot;&quot; : d.name });
        });

    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h4><a class="header" href="#bubble" id="bubble">Bubble</a></h4>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;D3 Tutorial&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;
        var width = 800, 
            height = 600;

        var canvas = d3.select(&quot;body&quot;).append(&quot;svg&quot;)
                .attr(&quot;width&quot;, width)
                .attr(&quot;height&quot;, height)
                .append(&quot;g&quot;)
                    .attr(&quot;transform&quot;, &quot;translate(50, 50)&quot;);
                    
        var pack = d3.layout.pack()
            .size([width, height - 50])
            .padding(10);

        d3.json(&quot;mydata2.json&quot;, function(data) {
            
            var nodes = pack.nodes(data);
            
            var node = canvas.selectAll(&quot;.node&quot;)
                .data(nodes)
                .enter()
                    .append(&quot;g&quot;)
                    .attr(&quot;class&quot;, &quot;node&quot;)
                    .attr(&quot;transform&quot;, function(d){ return &quot;translate(&quot; + d.x + &quot;,&quot; + d.y + &quot;)&quot;; });

            node.append(&quot;circle&quot;)
                .attr(&quot;r&quot;, function(d){ return d.r; })
                .attr(&quot;fill&quot;, function(d){ return d.children ? &quot;#fff&quot; : &quot;steelblue&quot;; })
                .attr(&quot;opacity&quot;, 0.25)
                .attr(&quot;stroke&quot;, function(d){ return d.children ? &quot;#fff&quot; : &quot;#ADADAD&quot;; })
                .attr(&quot;stroke-width&quot;, 2);

            node.append(&quot;text&quot;)
                .text(function(d){ return d.children ? &quot;&quot; : d.name });
        });

    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h6><a class="header" href="#mydatajson-1" id="mydatajson-1">mydata.json</a></h6>
<pre><code class="language-json">{
    &quot;name&quot;: &quot;Max&quot;,
    &quot;value&quot;: 100,
    &quot;children&quot;: [
        {
            &quot;name&quot;: &quot;Sylvia&quot;,
            &quot;value&quot;: 75,
            &quot;children&quot;: [
                {&quot;name&quot;: &quot;Craig&quot;, &quot;value&quot;: 25},
                {&quot;name&quot;: &quot;Robin&quot;, &quot;value&quot;: 25},
                {&quot;name&quot;: &quot;Anna&quot;, &quot;value&quot;: 25}
            ]
        },
        {
            &quot;name&quot;: &quot;David&quot;,
            &quot;value&quot;: 75,
            &quot;children&quot;: [
                {&quot;name&quot;: &quot;Jeff&quot;, &quot;value&quot;: 25},
                {&quot;name&quot;: &quot;Buffy&quot;, &quot;value&quot;: 25}
            ]
        },
        {
            &quot;name&quot;: &quot;Mr X&quot;,
            &quot;value&quot;: 75
        }
    ]
}
</code></pre>
<h6><a class="header" href="#mydata2json" id="mydata2json">mydata2.json</a></h6>
<pre><code class="language-json">{
    &quot;name&quot;: &quot;Max&quot;,
    &quot;value&quot;: 100,
    &quot;children&quot;: [
        { &quot;name&quot;: &quot;Max&quot;, &quot;value&quot;: 100 },
        { &quot;name&quot;: &quot;Max&quot;, &quot;value&quot;: 125 },
        { &quot;name&quot;: &quot;Max&quot;, &quot;value&quot;: 50 },
        { &quot;name&quot;: &quot;Max&quot;, &quot;value&quot;: 78 },
        { &quot;name&quot;: &quot;Max&quot;, &quot;value&quot;: 24 },
        { &quot;name&quot;: &quot;Max&quot;, &quot;value&quot;: 210 },
        { &quot;name&quot;: &quot;Max&quot;, &quot;value&quot;: 140 },
        { &quot;name&quot;: &quot;Max&quot;, &quot;value&quot;: 90 }
    ]
}
</code></pre>
<h3><a class="header" href="#17-the-histogram-layout-12" id="17-the-histogram-layout-12">17. The Histogram Layout (1/2)</a></h3>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;D3 Tutorial&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;
        
        d3.csv(&quot;ages.csv&quot;, function (data) {
            
            var map = data.map(function(i){ return parseInt(i.age); })
            
            var histogram = d3.layout.histogram()
                .bins(5)
                (map)
            
            var canvas = d3.select(&quot;body&quot;).append(&quot;svg&quot;)
                .attr(&quot;width&quot;, 500)
                .attr(&quot;height&quot;, 500);

            var bars = canvas.selectAll(&quot;.bar&quot;)
                .data(histogram)
                .enter()
                    .append(&quot;g&quot;)

            bars.append(&quot;rect&quot;)
                .attr(&quot;x&quot;,function(d){ return d.x * 5; })
                .attr(&quot;y&quot;, 0)
                .attr(&quot;width&quot;, function(d){ return d.dx * 5 - 5; })
                .attr(&quot;height&quot;, function(d){ return d.y * 20; })
                .attr(&quot;fill&quot;, &quot;steelblue&quot;);

        })
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h6><a class="header" href="#agescsv" id="agescsv">ages.csv</a></h6>
<pre><code class="language-csv">&quot;name&quot;,&quot;age&quot;
&quot;Hayden&quot;,20
&quot;Hayden&quot;,30
&quot;Hayden&quot;,40
&quot;Hayden&quot;,50
&quot;Hayden&quot;,60
&quot;Hayden&quot;,70
&quot;Hayden&quot;,80
&quot;Hayden&quot;,10
&quot;Hayden&quot;,14
&quot;Hayden&quot;,27
&quot;Hayden&quot;,29
&quot;Hayden&quot;,28
&quot;Hayden&quot;,32
&quot;Hayden&quot;,34
&quot;Hayden&quot;,42
&quot;Hayden&quot;,53
&quot;Hayden&quot;,67
&quot;Hayden&quot;,78
&quot;Hayden&quot;,99
&quot;Hayden&quot;,34
&quot;Hayden&quot;,25
&quot;Hayden&quot;,22
&quot;Hayden&quot;,39
</code></pre>
<h3><a class="header" href="#18-the-histogram-layout-22" id="18-the-histogram-layout-22">18. The Histogram Layout (2/2)</a></h3>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;D3 Tutorial&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;

        var width = 500,
            height = 500,
            padding = 50;
        
        d3.csv(&quot;ages.csv&quot;, function (data) {
            
            var map = data.map(function(i){ return parseInt(i.age); })
            
            var histogram = d3.layout.histogram()
                .bins(5)
                (map)

            var x = d3.scale.linear()
                .domain([0, d3.max(map)])
                .range([0, width]);

            var y = d3.scale.linear()
                .domain([0, d3.max(histogram.map(function(i){ return i.length; }))])
                .range([0, height]);

            var xAxis = d3.svg.axis()
                .scale(x)
                .orient(&quot;bottom&quot;);
            
            var canvas = d3.select(&quot;body&quot;).append(&quot;svg&quot;)
                .attr(&quot;width&quot;, width + padding)
                .attr(&quot;height&quot;, height + padding)
                .append(&quot;g&quot;)
                    .attr(&quot;transform&quot;, &quot;translate(20, 0)&quot;);

            var group = canvas.append(&quot;g&quot;)
                .attr(&quot;transform&quot;, &quot;translate(0,&quot; + height + &quot;)&quot;)
                .call(xAxis);

            var bars = canvas.selectAll(&quot;.bar&quot;)
                .data(histogram)
                .enter()
                    .append(&quot;g&quot;)

            bars.append(&quot;rect&quot;)
                .attr(&quot;x&quot;,function(d){ return x(d.x); })
                .attr(&quot;y&quot;, function(d){ return 500 - y(d.y); })
                .attr(&quot;width&quot;, function(d){ return x(d.dx); })
                .attr(&quot;height&quot;, function(d){ return y(d.y); })
                .attr(&quot;fill&quot;, &quot;steelblue&quot;);

            bars.append(&quot;text&quot;)
                .attr(&quot;x&quot;, function(d){ return x(d.x); })
                .attr(&quot;y&quot;, function(d){ return 500 - y(d.y); })
                .attr(&quot;dx&quot;, function(d){ return x(d.dx)/2; })
                .attr(&quot;dy&quot;, &quot;20px&quot;)
                .attr(&quot;fill&quot;, &quot;#fff&quot;)
                .attr(&quot;text-anchor&quot;, &quot;middle&quot;)
                .text(function(d){ return d.y; })

        })
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h6><a class="header" href="#agescsv-1" id="agescsv-1">ages.csv</a></h6>
<pre><code class="language-csv">&quot;name&quot;,&quot;age&quot;
&quot;Hayden&quot;,20
&quot;Hayden&quot;,30
&quot;Hayden&quot;,40
&quot;Hayden&quot;,50
&quot;Hayden&quot;,60
&quot;Hayden&quot;,70
&quot;Hayden&quot;,80
&quot;Hayden&quot;,10
&quot;Hayden&quot;,14
&quot;Hayden&quot;,27
&quot;Hayden&quot;,29
&quot;Hayden&quot;,28
&quot;Hayden&quot;,32
&quot;Hayden&quot;,34
&quot;Hayden&quot;,42
&quot;Hayden&quot;,53
&quot;Hayden&quot;,67
&quot;Hayden&quot;,78
&quot;Hayden&quot;,99
&quot;Hayden&quot;,34
&quot;Hayden&quot;,25
&quot;Hayden&quot;,22
&quot;Hayden&quot;,39
</code></pre>
<h3><a class="header" href="#19-the-treemap-layout" id="19-the-treemap-layout">19. The Treemap Layout</a></h3>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;D3 Tutorial&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;

        var color = d3.scale.category10();

        var canvas = d3.select(&quot;body&quot;).append(&quot;svg&quot;)
            .attr(&quot;width&quot;, 500)
            .attr(&quot;height&quot;, 500);

        d3.json(&quot;mydata.json&quot;, function(data){
            
            var treemap = d3.layout.treemap()
                .size([500, 500])
                .nodes(data)
            
            var cells = canvas.selectAll(&quot;g&quot;)
                .data(treemap)
                .enter()
                .append(&quot;g&quot;)
                .attr(&quot;class&quot;, &quot;cell&quot;)
        
            cells.append(&quot;rect&quot;)
                .attr(&quot;x&quot;, function(d){ return d.x; })
                .attr(&quot;y&quot;, function(d){ return d.y; })
                .attr(&quot;width&quot;, function(d){ return d.dx; })
                .attr(&quot;height&quot;, function(d){ return d.dy; })
                .attr(&quot;fill&quot;, function(d){ return d.children ? null: color(d.parent.name); })
                .attr(&quot;stroke&quot;, &quot;#fff&quot;)

            cells.append(&quot;text&quot;)
                .attr(&quot;x&quot;, function(d){ return d.x + d.dx / 2; })
                .attr(&quot;y&quot;, function(d){ return d.y + d.dy / 2; })
                .attr(&quot;text-anchor&quot;, &quot;middle&quot;)
                .attr(&quot;fill&quot;, &quot;#fff&quot;)
                .text(function(d){ return d.name; })

        })
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h6><a class="header" href="#mydatajson-2" id="mydatajson-2">mydata.json</a></h6>
<pre><code class="language-json">{
    &quot;name&quot;: &quot;Max&quot;,
    &quot;value&quot;: 100,
    &quot;children&quot;: [
        {
            &quot;name&quot;: &quot;Sylvia&quot;,
            &quot;value&quot;: 75,
            &quot;children&quot;: [
                {&quot;name&quot;: &quot;Craig&quot;, &quot;value&quot;: 25},
                {&quot;name&quot;: &quot;Robin&quot;, &quot;value&quot;: 25},
                {&quot;name&quot;: &quot;Anna&quot;, &quot;value&quot;: 25}
            ]
        },
        {
            &quot;name&quot;: &quot;David&quot;,
            &quot;value&quot;: 75,
            &quot;children&quot;: [
                {&quot;name&quot;: &quot;Jeff&quot;, &quot;value&quot;: 25},
                {&quot;name&quot;: &quot;Buffy&quot;, &quot;value&quot;: 25}
            ]
        },
        {
            &quot;name&quot;: &quot;Mr X&quot;,
            &quot;value&quot;: 75
        }
    ]
}
</code></pre>
<h3><a class="header" href="#20-maps-in-d3" id="20-maps-in-d3">20. Maps in D3</a></h3>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;D3 Tutorial&lt;/title&gt;
    &lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;
        var width = 600, 
            height = 800;
        var canvas = d3.select(&quot;body&quot;).append(&quot;svg&quot;)
            .attr(&quot;width&quot;, width)
            .attr(&quot;height&quot;, height);

        d3.json(&quot;skorea_provinces_geo.json&quot;, function(data){
            
            var group = canvas.selectAll(&quot;g&quot;)
                .data(data.features)
                .enter()
                .append(&quot;g&quot;)

            var projection = d3.geo.mercator().scale(4000).translate([-8620, 3080]);
            var path = d3.geo.path().projection(projection);

            var areas = group.append(&quot;path&quot;)
                .attr(&quot;d&quot;, path)
                .attr(&quot;class&quot;, &quot;area&quot;)
                .attr(&quot;fill&quot;, &quot;steelblue&quot;);

            group.append(&quot;text&quot;)
                .attr(&quot;x&quot;, function(d) { return path.centroid(d)[0]; })
                .attr(&quot;y&quot;, function(d) { return path.centroid(d)[1]; })
                .attr(&quot;text-anchor&quot;, &quot;middle&quot;)
                .text(function(d){ return d.properties.name; })
        })
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>I used <code>skorea_provinces_geo.json</code> which is the map of South Korea. You can download <a href="https://github.com/southkorea/southkorea-maps">here</a>.</p>
<h1><a class="header" href="#install-mongo-db-on-os-x" id="install-mongo-db-on-os-x">Install Mongo DB On OS X</a></h1>
<p><a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/">Document</a></p>
<pre><code class="language-bash">$ brew update
$ brew install mongodb --devel
</code></pre>
<h1><a class="header" href="#run-mongo-db" id="run-mongo-db">Run Mongo DB</a></h1>
<p>Set path before run</p>
<pre><code class="language-bash">$ sudo mkdir -p /data/db
$ whoami
user-name
$ sudo chown user-name /data/db
$ vim ~/.bash_profile

export MONGO_PATH=/usr/local/bin/mongodb
export PATH=$PATH:$MONGO_PATH/bin
</code></pre>
<pre><code class="language-bash">## restart terminal
$ mongod

## start another terminal
$ mongo
</code></pre>
<h2><a class="header" href="#how-to-install-and-use-postgresqlon-ubuntu" id="how-to-install-and-use-postgresqlon-ubuntu">How to install and use PostgreSQLon Ubuntu</a></h2>
<h3><a class="header" href="#installation" id="installation">Installation</a></h3>
<p>우분투에서 PostgreSQL을 설치하려면</p>
<pre><code class="language-bash">$ sudo apt-get update
$ sudo apt-get install postgresql postgresql-contrib
</code></pre>
<h3><a class="header" href="#using-postgresql-roles-and-databases" id="using-postgresql-roles-and-databases">Using PostgreSQL roles and databases</a></h3>
<p>PostgreSQL 은 user와 group의 역할을 구별하지 않는 대신 좀더 유연한 용어인 <code>롤(role)</code>을 사용한다. PostgreSQL을 설치하면 <code>postgres</code> 라는 유저가 생성되는데, 이것은 Postgres 의 default  role 과 관련있다. 계정에 로그인 하려면</p>
<pre><code class="language-bash">$ sudo -i -u postgres
</code></pre>
<p>그 후, Postgres prompt 로 들어가려면 </p>
<pre><code>$ psql
</code></pre>
<p>prompt에서 나오려면</p>
<pre><code># \q
</code></pre>
<h3><a class="header" href="#create-a-new-role" id="create-a-new-role">Create a new role</a></h3>
<p>새로운 롤을 생성하려면</p>
<pre><code>$ createuser --interactive
</code></pre>
<p>이 명령어는 롤의 이름과 슈퍼유저인지 아닌지의 여부를 묻는다. 추가로 옵션을 지정할 수도 있는데, <code> man createuser</code> 를 입력하면 옵션들의 명령어를 볼 수 있다.</p>
<h3><a class="header" href="#create-a-new-database" id="create-a-new-database">Create a new database</a></h3>
<p><code>test1</code> 이라는 유저가 있다면,  그 롤은 기본적으로 <code>test1</code>이라는 데이터베이스에 접속하려고 시도한다. <code>postgres</code> 로 로그인 한 상태에서 <code>test1</code>이라는 데이터베이스를 생성하려면</p>
<pre><code class="language-bash">$ createdb test1
</code></pre>
<h3><a class="header" href="#connect-to-postgres-with-the-new-user" id="connect-to-postgres-with-the-new-user">Connect to Postgres with the new user</a></h3>
<p>리눅스에서 <code>test1</code> 이라는 시스템 계정을 사용하고 있고(<code>adduser test1</code>으로 생성할 수 있다), <code>test1</code>이라는 Postgres  유저와 데이터베이스를 만들었다고 하자.</p>
<p>시스템 계정을 바꾸는 방법은</p>
<pre><code>$ sudo -i -u test1
</code></pre>
<p>데이터베이스 <code>test1</code> 에 <code>test</code> 이라는 Postgres 유저로 접속하려면</p>
<pre><code>$ psql
</code></pre>
<p>다른 데이터베이스에 접속하려면</p>
<pre><code>$ psql -d postgres
</code></pre>
<p>prompt 에서 접속에 대한 정보를 보려면</p>
<pre><code># \conninfo
</code></pre>
<hr />
<h3><a class="header" href="#refer-to" id="refer-to">Refer to</a></h3>
<ul>
<li>
<p><a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-use-postgresql-on-ubuntu-14-04">How To Install and Use PostgreSQL on Ubuntu 14.04</a></p>
<p>​</p>
</li>
</ul>
<h1><a class="header" href="#design-patterns-with-python" id="design-patterns-with-python">Design Patterns with Python</a></h1>
<h2><a class="header" href="#toc-table-of-contents" id="toc-table-of-contents">TOC: Table of Contents</a></h2>
<h3><a class="header" href="#creational-patterns" id="creational-patterns">Creational Patterns</a></h3>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
<a href="https://github.com/AWEEKJ/TIL/blob/master/design-patterns/abstract_factory.md">Abstract Factory</a></li>
<li><input disabled="" type="checkbox"/>
Borg</li>
<li><input disabled="" type="checkbox"/>
Builder</li>
<li><input disabled="" type="checkbox" checked=""/>
<a href="https://github.com/AWEEKJ/TIL/blob/master/design-patterns/factory.md">Factory</a></li>
<li><input disabled="" type="checkbox"/>
Lazy Evolution</li>
<li><input disabled="" type="checkbox"/>
Pool</li>
<li><input disabled="" type="checkbox"/>
Prototype</li>
</ul>
<h3><a class="header" href="#structural-patterns" id="structural-patterns">Structural Patterns</a></h3>
<ul>
<li><input disabled="" type="checkbox"/>
3 Tier</li>
<li><input disabled="" type="checkbox" checked=""/>
<a href="https://github.com/AWEEKJ/TIL/blob/master/design-patterns/adapter.md">Adapter</a></li>
<li><input disabled="" type="checkbox"/>
Bridge</li>
<li><input disabled="" type="checkbox"/>
Composite</li>
<li><input disabled="" type="checkbox" checked=""/>
<a href="https://github.com/AWEEKJ/TIL/blob/master/design-patterns/decorator.md">Decorator</a></li>
<li><input disabled="" type="checkbox" checked=""/>
<a href="https://github.com/AWEEKJ/TIL/blob/master/design-patterns/delegation.md">Delegation</a></li>
<li><input disabled="" type="checkbox"/>
Facade</li>
<li><input disabled="" type="checkbox"/>
Flyweight</li>
<li><input disabled="" type="checkbox"/>
Front Controller</li>
<li><input disabled="" type="checkbox"/>
MVC</li>
<li><input disabled="" type="checkbox"/>
Proxy</li>
</ul>
<h3><a class="header" href="#behavioral-patterns" id="behavioral-patterns">Behavioral Patterns</a></h3>
<ul>
<li><input disabled="" type="checkbox"/>
Chain</li>
<li><input disabled="" type="checkbox"/>
Catalog</li>
<li><input disabled="" type="checkbox"/>
Chaining Method</li>
<li><input disabled="" type="checkbox"/>
Command</li>
<li><input disabled="" type="checkbox"/>
Iterator</li>
<li><input disabled="" type="checkbox"/>
Mediator</li>
<li><input disabled="" type="checkbox"/>
Memento</li>
<li><input disabled="" type="checkbox"/>
Observer</li>
<li><input disabled="" type="checkbox"/>
Publish Subscribe</li>
<li><input disabled="" type="checkbox"/>
Registry</li>
<li><input disabled="" type="checkbox"/>
Specification</li>
<li><input disabled="" type="checkbox"/>
State</li>
<li><input disabled="" type="checkbox"/>
Stratege</li>
<li><input disabled="" type="checkbox"/>
Template</li>
<li><input disabled="" type="checkbox"/>
Visitor</li>
</ul>
<h3><a class="header" href="#design-for-testability-patterns" id="design-for-testability-patterns">Design for Testability Patterns</a></h3>
<ul>
<li><input disabled="" type="checkbox"/>
Setter Injection</li>
</ul>
<h3><a class="header" href="#others" id="others">Others</a></h3>
<ul>
<li><input disabled="" type="checkbox"/>
Blackboard</li>
<li><input disabled="" type="checkbox"/>
Graph Search</li>
<li><input disabled="" type="checkbox"/>
HSM</li>
</ul>
<h1><a class="header" href="#abstract-factory-pattern" id="abstract-factory-pattern">Abstract Factory Pattern</a></h1>
<h2><a class="header" href="#code-example" id="code-example">Code Example</a></h2>
<pre><code class="language-python">class AbstractFactory(object):
    def create_product(self, *args):
        raise NotImplementedError()


class ConcreteFactory(AbstractFactory):
    def create_product(self, *args):
        return Product()


class Product(object):
    @staticmethod
    def do_something():
        print('This is product.')


class Client(object):
    def __init__(self, factory: AbstractFactory):
        self.factory = factory

    def get_product(self):
        product = self.factory.create_product()
        product.do_something()

if __name__ == '__main__':
    factory = ConcreteFactory()
    client = Client(factory)
    client.get_product()  # This is product.
</code></pre>
<h2><a class="header" href="#related-patterns" id="related-patterns">Related Patterns</a></h2>
<ul>
<li>AbstractFactory는 <strong>Factory</strong> 나 <strong>Prototype</strong> 으로 구현</li>
<li>ConcreteFactory는 <strong>Singleton</strong> 으로 구현</li>
</ul>
<h1><a class="header" href="#adapter-pattern" id="adapter-pattern">Adapter Pattern</a></h1>
<h2><a class="header" href="#what-is-this" id="what-is-this">What is this?</a></h2>
<ul>
<li>어댑터 패턴은 클래스마다 다른 인터페이스를 제공할 때 사용한다. 실제로 사용되는 케이블 어댑터가 각각의 휴대폰을 충전하는 것을 생각해보면 이해하기 쉽다. 서로 맞지 않는 인터페이스 때문에 통합 하기 힘든 클래스를 통합해야 할 때 어댑터 패턴을 적용할 수 있다.</li>
</ul>
<h2><a class="header" href="#code-example-1" id="code-example-1">Code Example</a></h2>
<pre><code class="language-python">class Dog(object):

    def __init__(self):
        self.name = &quot;Dog&quot;

    def bark(self):
        return &quot;woof!&quot;


class Cat(object):

    def __init__(self):
        self.name = &quot;Cat&quot;

    def meow(self):
        return &quot;meow!&quot;


class Human(object):

    def __init__(self):
        self.name = &quot;Human&quot;

    def speak(self):
        return &quot;'hello'&quot;


class Car(object):

    def __init__(self):
        self.name = &quot;Car&quot;

    def make_noise(self, octane_level):
        return &quot;vroom{0}&quot;.format(&quot;!&quot; * octane_level)


class Adapter(object):

    def __init__(self, obj, **adapted_methods):
        &quot;&quot;&quot;We set the adapted methods in the object's dict&quot;&quot;&quot;
        self.obj = obj
        self.__dict__.update(adapted_methods)

    def __getattr__(self, attr):
        &quot;&quot;&quot;All non-adapted calls are passed to the object&quot;&quot;&quot;
        return getattr(self.obj, attr)

    def original_dict(self):
        &quot;&quot;&quot;Print original object dict&quot;&quot;&quot;
        return self.obj.__dict__


def main():
    objects = []
    dog = Dog()
    print(dog.__dict__)
    objects.append(Adapter(dog, make_noise=dog.bark))
    print(objects[0].__dict__)
    print(objects[0].original_dict())
    cat = Cat()
    objects.append(Adapter(cat, make_noise=cat.meow))
    human = Human()
    objects.append(Adapter(human, make_noise=human.speak))
    car = Car()
    objects.append(Adapter(car, make_noise=lambda: car.make_noise(3)))

    for obj in objects:
        print(&quot;A {0} goes {1}&quot;.format(obj.name, obj.make_noise()))


if __name__ == &quot;__main__&quot;:
    main()
</code></pre>
<h2><a class="header" href="#references" id="references">References</a></h2>
<ul>
<li><a href="https://github.com/faif/python-patterns/blob/master/structural/adapter.py">python-patterns: adapter</a></li>
</ul>
<h1><a class="header" href="#decorator-pattern" id="decorator-pattern">Decorator Pattern</a></h1>
<h2><a class="header" href="#when-to-use" id="when-to-use">When to use?</a></h2>
<ul>
<li>다른 객체에 영향을 주지 않고 각각의 객체에 새로운 기능을 추가할 때. 필요한 비용만 그때그때 지불하는 방식</li>
<li>상속으로 서브클래스를 계속 만드는 것이 복잡해질때. 설계의 융통성을 증대시킬 수 있음</li>
</ul>
<h2><a class="header" href="#code-example-2" id="code-example-2">Code Example</a></h2>
<h6><a class="header" href="#example-1" id="example-1">Example 1</a></h6>
<pre><code class="language-python">class TextTag(object):
    &quot;&quot;&quot;Represents a base text tag&quot;&quot;&quot;
    def __init__(self, text):
        self._text = text

    def render(self):
        return self._text


class BoldWrapper(TextTag):
    &quot;&quot;&quot;Wraps a tag in &lt;b&gt;&quot;&quot;&quot;
    def __init__(self, wrapped):
        self._wrapped = wrapped

    def render(self):
        return &quot;&lt;b&gt;{}&lt;/b&gt;&quot;.format(self._wrapped.render())


class ItalicWrapper(TextTag):
    &quot;&quot;&quot;Wraps a tag in &lt;i&gt;&quot;&quot;&quot;
    def __init__(self, wrapped):
        self._wrapped = wrapped

    def render(self):
        return &quot;&lt;i&gt;{}&lt;/i&gt;&quot;.format(self._wrapped.render())

if __name__ == '__main__':
    simple_hello = TextTag(&quot;hello, world!&quot;)
    special_hello = ItalicWrapper(BoldWrapper(simple_hello))
    print(&quot;before:&quot;, simple_hello.render())  # before: hello, world!
    print(&quot;after:&quot;, special_hello.render())  # after: &lt;i&gt;&lt;b&gt;hello, world!&lt;/b&gt;&lt;/i&gt;
</code></pre>
<h6><a class="header" href="#example-2" id="example-2">Example 2</a></h6>
<pre><code class="language-python">from functools import wraps


def tags(tag_name):
    def tags_decorator(func):
        @wraps(func)
        def func_wrapper(name):
            return &quot;&lt;{0}&gt;{1}&lt;/{0}&gt;&quot;.format(tag_name, func(name))
        return func_wrapper
    return tags_decorator


@tags('div')
@tags('p')
def get_text(name):
    return &quot;Hello {0}!&quot;.format(name)

print(get_text(&quot;world&quot;))  # &lt;div&gt;&lt;p&gt;Hello world!&lt;/p&gt;&lt;/div&gt;
print(get_text.__name__)  # get_text
print(get_text.__doc__)  # None
print(get_text.__module__)  # __main__

</code></pre>
<h2><a class="header" href="#references-1" id="references-1">References</a></h2>
<ul>
<li><a href="https://github.com/faif/python-patterns/blob/master/fundamental/decorator.py">python-patterns: decorator.py</a></li>
<li><a href="https://www.thecodeship.com/patterns/guide-to-python-function-decorators/">A guide to Python's function decorators</a></li>
</ul>
<h1><a class="header" href="#delegation-pattern" id="delegation-pattern">Delegation Pattern</a></h1>
<h2><a class="header" href="#what-is-this-1" id="what-is-this-1">What is this?</a></h2>
<blockquote>
<p><strong>&quot;Delegation is like inheritance done manually through object composition.&quot;</strong> <em>[Lecture slides of course 601: &quot;Object-Oriented Software Development&quot; at the University of San Francisco ]</em></p>
<p>위임(delegation)은 객체 구성을 일일이 하는 상속(inheritance)과도 같다.</p>
</blockquote>
<ul>
<li>어떤 객체(the <em>delegator</em>: 위탁자)의 일부 기능을 다른 객체(the <em>delegate</em>: 수탁자)에게 넘김</li>
</ul>
<h2><a class="header" href="#when-to-use-1" id="when-to-use-1">When to use?</a></h2>
<ul>
<li>클래스의 메소드 결합을 줄여야 할 때 &gt;&gt; 한 클래스의 변경이 다른 클래스에 미치는 영향이 적어짐</li>
<li>같은 동작을 하는 컴포턴트들이 있는데, 이들이 나중에 각자 다른 동작을 하도록 변경되어야 하는 상황이 생길때</li>
<li>Generally spoken: 상속(ingeritance) 대신 위임(delegation)을 사용. 상속은 부모 객체와 자식 객체의 관계가 너무 가까운데 위임은 상속 보다는 flexible 함</li>
</ul>
<h2><a class="header" href="#code-example-3" id="code-example-3">Code Example</a></h2>
<pre><code class="language-python">#!/usr/bin/env python
# -*- coding: utf-8 -*-

&quot;&quot;&quot;
Reference: https://en.wikipedia.org/wiki/Delegation_pattern
Author: https://github.com/IuryAlves
&quot;&quot;&quot;


class Delegator(object):
    &quot;&quot;&quot;
    &gt;&gt;&gt; delegator = Delegator(Delegate())
    &gt;&gt;&gt; delegator.do_something(&quot;nothing&quot;)
    'Doing nothing'
    &gt;&gt;&gt; delegator.do_anything()
    &quot;&quot;&quot;

    def __init__(self, delegate):
        self.delegate = delegate

    def __getattr__(self, name):
        def wrapper(*args, **kwargs):
            if hasattr(self.delegate, name):
                attr = getattr(self.delegate, name)
                if callable(attr):
                    return attr(*args, **kwargs)
        return wrapper


class Delegate(object):

    def do_something(self, something):
        return &quot;Doing %s&quot; % something


if __name__ == '__main__':
    import doctest
    doctest.testmod()
</code></pre>
<h2><a class="header" href="#related-patterns-1" id="related-patterns-1">Related Patterns</a></h2>
<ul>
<li>Decorator Pattern: Delegation Pattern은 Decorator Pattern의 하위 분류로서 '확장 기능 제공'을 위한 패턴 중 하나</li>
<li>Delegation은 상당히 자주 사용되는데, Visitor, Observer, Stratege, Event Listener 패턴에서도 쓰임</li>
</ul>
<h2><a class="header" href="#references-2" id="references-2">References</a></h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Delegation_pattern">Wikipedia</a></li>
<li><a href="http://best-practice-software-engineering.ifs.tuwien.ac.at/patterns/delegation.html">best-practice-software-engineering.ifs.tuwien.ac.at</a></li>
<li><a href="https://github.com/faif/python-patterns/blob/master/fundamental/delegation_pattern.py">python-patterns: delegation_pattern.py</a></li>
</ul>
<h1><a class="header" href="#factory-pattern" id="factory-pattern">Factory Pattern</a></h1>
<h2><a class="header" href="#code-example-4" id="code-example-4">Code Example</a></h2>
<pre><code class="language-python">class KoreanGetter(object):

    def __init__(self):
        self.trans = dict(dog=&quot;댕댕이&quot;, cat=&quot;고먐미&quot;)

    def get(self, text):
        return self.trans.get(text, str(text))


class EnglishGetter(object):

    def get(self, text):
        return str(text)


def get_localizer(language=&quot;English&quot;):
    &quot;&quot;&quot;The factory method&quot;&quot;&quot;
    languages = dict(English=EnglishGetter, Korean=KoreanGetter)
    return languages[language]()


if __name__ == '__main__':
    e, g = get_localizer(language=&quot;English&quot;), get_localizer(language=&quot;Korean&quot;)
    for text in &quot;dog parrot cat bear&quot;.split():
        print(e.get(text), g.get(text))

### OUTPUT ###
# dog 댕댕이
# parrot parrot
# cat 고먐미
# bear bear
</code></pre>
<h2><a class="header" href="#references-3" id="references-3">References</a></h2>
<ul>
<li><a href="https://github.com/faif/python-patterns/blob/master/creational/delegation_pattern.py">python-patterns: factory_method.py</a></li>
</ul>
<h1><a class="header" href="#deploying-django-project-on-ubuntu-using-nginx-and-gunicorn" id="deploying-django-project-on-ubuntu-using-nginx-and-gunicorn">Deploying Django project on ubuntu using nginx and gunicorn</a></h1>
<p>이 글은 Django 프로젝트를 nginx와 gunicorn을 이용하여 ubuntu 서버에 배포하는 과정을 정리한 글이다. 도메인 구매도, vps 서버 구매도 모두 처음이었기 때문에 삽질을 많이 했다.</p>
<h2><a class="header" href="#서버-설정" id="서버-설정">서버 설정</a></h2>
<h3><a class="header" href="#1-서버-도메인-연결sup-classfootnote-referencea-href11asup" id="1-서버-도메인-연결sup-classfootnote-referencea-href11asup">1. 서버-도메인 연결<sup class="footnote-reference"><a href="#1">1</a></sup></a></h3>
<p>먼저 서버와 도메인을 구매한다. 서버는 <a href="https://blog.lael.be/post/44">국내 클라우드 서버호스팅 비교</a> 글 을 참고하여 <a href="https://www.conoha.jp/referral/?token=dKu6u1tdfEn8M0SX91iTgL9SB24ofA6k48Km5Kz.FoesM63ZRo4-5VI">ConoHa</a>에서 월 900엔짜리 서버를 사고,  도메인은 <a href="https://www.phps.kr/">PHPS</a>에서 샀다.</p>
<p>서버를 구매할 때 initial root password를 설정하고, ssh 파일도 다운받게 된다(물론 기존의 파일을 사용할 수도 있다). 초기에는 이 비밀번호와 ssh 파일을 통해 서버에 접속하게 되므로 잘 보관해 두는 것이 좋다.</p>
<p>도메인을 사고 나면 도메인과 내 서버의 아이피로 연결되는 과정이 필요한데, 이 역할을 하는 것이 DNS 서버이다. PHPS에서 도메인의 네임서버를 입력하는 칸이 있는데 이 부분에 ConoHa에서 제공하는 네임서버를 입력했다. 그리고 ConoHa의 DNS 설정에서 내 서버의 도메인을 추가한다. </p>
<h3><a class="header" href="#2-서버-접속" id="2-서버-접속">2. 서버 접속</a></h3>
<p>서버를 구매할 때 다운 받았던 (혹은 사용했던) ssh파일을 사용해서 서버에 접속한다. 파일 이름이 <code>my-ssh-key-file.pem</code> 이고 구매한 서버의 ip가 <code>***.**.**.***</code>이라면,</p>
<pre><code class="language-bash">$ chmod 400 my-ssh-key-file.pem # 권한 변경. 처음 한번만 하면 됨
$ ssh -i my-ssh-key-file.pem root@***.**.**.*** # root 계정으로 서버 접속
</code></pre>
<p>서버에 접속하고 나면 <code>$ date</code> 를 입력하여 시간이 잘 나오는지 확인해보자. 일본에 있는 서버이기 때문에 별도의 설정은 하지 않아도 된다.</p>
<h3><a class="header" href="#3-root-계정-암호-변경" id="3-root-계정-암호-변경">3. root 계정 암호 변경</a></h3>
<p>만약을 위해 root 계정의 암호를 변경한다.</p>
<pre><code class="language-bash">$ passwd
</code></pre>
<h3><a class="header" href="#4-서버-유저-추가" id="4-서버-유저-추가">4. 서버 유저 추가</a></h3>
<p>보안을 위해 서버의 계정을 새로 만들고, 앞으로는 그 계정을 사용하기로 한다. 새 계정의 아이디를 <code>my-user</code> 라고 하자.</p>
<pre><code class="language-bash">$ adduser my-user # 계정 생성
$ adduser my-user sudo # 관리자 권한 부여
$ login my-user # 로그인
</code></pre>
<h3><a class="header" href="#5-ssh-파일-생성-및-서버에-등록sup-classfootnote-referencea-href22asup" id="5-ssh-파일-생성-및-서버에-등록sup-classfootnote-referencea-href22asup">5. SSH 파일 생성 및 서버에 등록<sup class="footnote-reference"><a href="#2">2</a></sup></a></h3>
<p>앞서 ssh 파일로 서버에 접속할 때 root계정으로 로그인 했었다. 이제 <code>my-user</code> 계정을 사용하기로 했으므로 접속할 때부터 <code>my-user</code>로 로그인하기 위해 새로운 ssh키를 만든다. </p>
<p>먼저 클라이언트에서 <code>ssh-keygen</code> 명령어로 ssh 파일을 생성한다.</p>
<pre><code class="language-bash">$ ssh-keygen
Generating public/private rsa key pair.
Enter file in which to save the key (/home/user/.ssh/id_rsa): new-ssh-key-file.pem # ssh 파일명
Enter passphrase (empty for no passphrase): # 최초 등록 시 사용할 비밀문구
Enter same passphrase again:
Your identification has been saved in new-ssh-key-file.pem.
Your public key has been saved in new-ssh-key-file.pem.pub.
</code></pre>
<p><code>new-ssh-key-file.pem</code>와 <code>new-ssh-key-file.pem.pub</code>이 생성된다. <code>*.pub</code>은 공개키인데, <code>cat</code>명령으로 공개키의 내용을 출력할 수 있다.</p>
<pre><code class="language-bash">$ cat new-ssh-key-file.pem.pub # 공개키 출력
</code></pre>
<p>그리고 서버에 공개키를 등록한다.</p>
<pre><code class="language-bash">$ mkdir ~/.ssh &amp;&amp; cd ~/.ssh 
$ cat &gt;&gt; authorized_keys
# 이 상태에서 클라이언트에서 출력했던 공개키를 복사 후 붙여넣은 다음, 줄을 바꾼후 Ctrl+d를 눌러 저장한다.
</code></pre>
<p>이렇게 하면 이제 서버에 접속할 때  <code>my-user</code>로 바로 로그인이 가능하다.</p>
<pre><code class="language-bash">$ ssh -i new-ssh-key-file.pem my-user@***.**.**.*** # my-user 계정으로 서버 접속
</code></pre>
<h3><a class="header" href="#6-root-계정-비활성화sup-classfootnote-referencea-href33asup" id="6-root-계정-비활성화sup-classfootnote-referencea-href33asup">6. root 계정 비활성화<sup class="footnote-reference"><a href="#3">3</a></sup></a></h3>
<p>보안을 위해 root 계정으로 로그인하지 못하도록 설정한다.</p>
<pre><code class="language-bash">$ sudo vim /etc/ssh/sshd_config
</code></pre>
<pre><code class="language-bash"># Authentication:
LoginGraceTime 120  
PermitRootLogin no # yes에서 no로 변경
</code></pre>
<p>해당 위치를 찾을때는 <code>/PermitRootLogin</code>를 입력하면 편리하다. 이제 root 계정으로는 서버에 접속할 수 없게 되었다.</p>
<p>변경사항들을 적용하려면 ssh 서비스를 재시작해야 한다.</p>
<pre><code class="language-bash">$ sudo service ssh restart
</code></pre>
<h3><a class="header" href="#7-방화벽-설정" id="7-방화벽-설정">7. 방화벽 설정</a></h3>
<p>우분투의 기본 방화벽인 ufw를 제공한다. 기본적으로 ufw는 disable로 설정되어 있다. 보안을 위해 방화벽을 설정한다.</p>
<pre><code class="language-bash">$ sudo ufw allow ssh
$ sudo ufw allow http
$ sudo ufw allow https
$ sudo ufw allow ftp
$ sudo ufw enable # 방화벽 설정
$ sudo ufw status # 방화벽 상태 확인
</code></pre>
<p>그리고 Brute-force에 대비하기 위해 <code>sshguard</code>를 설치한다. <code>sshguard</code>는 지정된 횟수만큼 접속 시도가 들어오면 방화벽에서 바로 차단한다.</p>
<pre><code class="language-bash">$ sudo apt-get install sshguard
$ sudo service sshguard start
</code></pre>
<h3><a class="header" href="#8-언어-설정" id="8-언어-설정">8. 언어 설정</a></h3>
<p>다음과 같은 경고를 계속 마주쳤다면, 언어를 설정해주도록 하자.</p>
<pre><code class="language-bash">perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
	LANGUAGE = (unset),
	LC_ALL = (unset),
	LC_CTYPE = &quot;ko_KR.UTF-8&quot;,
	LANG = &quot;en_US.UTF-8&quot;
    are supported and installed on your system.
perl: warning: Falling back to a fallback locale (&quot;en_US.UTF-8&quot;).
locale: Cannot set LC_CTYPE to default locale: No such file or directory
locale: Cannot set LC_ALL to default locale: No such file or directory
</code></pre>
<pre><code class="language-bash">$ vim /etc/default/locale
LANG=&quot;en_US.UTF-8&quot;  
LANGUAGE=&quot;en_US.UTF-8&quot;  
LC_ALL=&quot;en_US.UTF-8&quot;  
</code></pre>
<h3><a class="header" href="#9-패키지-설치" id="9-패키지-설치">9. 패키지 설치</a></h3>
<pre><code class="language-bash">$ sudo apt-get update
$ sudo apt-get upgrade
$ sudo apt-get install zsh git
</code></pre>
<p>zsh와 oh-my-zsh를 사용한다면 다음을 입력하자.</p>
<pre><code class="language-bash">$ curl -L https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh | sh # oh-my-zsh 설치
$ chsh -s $(which zsh) # 기본 셸을 zsh로 변경
</code></pre>
<p>여기까지 서버 설정이 끝났다. 이제 서버를 재부팅하고 프로젝트 설정으로 넘어간다.</p>
<pre><code class="language-bash">$ sudo reboot
</code></pre>
<h2><a class="header" href="#프로젝트-설정sup-classfootnote-referencea-href44asup" id="프로젝트-설정sup-classfootnote-referencea-href44asup">프로젝트 설정<sup class="footnote-reference"><a href="#4">4</a></sup></a></h2>
<p>프로젝트 전체 구조는 다음과 같다.</p>
<pre><code class="language-bash">.
└── projects
    └── myproject
        ├── config
        │   ├── gunicorn.service
        │   ├── myproject_nginx.conf
        │   └── myproject.sock
        ├── env
        ├── log
        │   ├── access.log
        │   └── error.log
        └── myproject
            ├── manage.py
            ├── myproject
            │   ├── __init__.py
            │   ├── settings.py
            │   ├── urls.py
            │   └── wsgi.py
            └── static
</code></pre>
<h3><a class="header" href="#1-패키지-설치" id="1-패키지-설치">1. 패키지 설치</a></h3>
<pre><code class="language-bash">$ sudo apt-get install python3-dev python3-pip python3-venv nginx 
$ sudo apt-get install postgresql postgresql-contrib libpq-dev # postgresql 관련 패키지
</code></pre>
<h3><a class="header" href="#2-가상환경-설정" id="2-가상환경-설정">2. 가상환경 설정</a></h3>
<p>먼저 프로젝트들은 <code>~/projects</code> 폴더를 만들어서 관리할 것이다. 프로젝트 이름이 <code>myproject</code>라고 한다면</p>
<pre><code class="language-bash">$ mkdir projects &amp;&amp; cd projects
$ mkdir myproject &amp;&amp; cd myproject # 프로젝트 폴더 생성
$ python3 -m venv env # 가상환경 생성
$ source env/bin/activate # 가상환경 활성화
(env) $
</code></pre>
<h3><a class="header" href="#3-nginx-설정" id="3-nginx-설정">3. nginx 설정</a></h3>
<p>Django 프로젝트를 설정하기 전에 nginx 관련 설정을 먼저 하자.</p>
<pre><code class="language-bash">(env) $ mkdir log config
(env) $ cd log
(env) $ touch access.log error.log
(env) $ cd ..
(env) $ cd config
(env) $ vim myproject_nginx.conf
</code></pre>
<h6><a class="header" href="#projectsmyprojectconfigmyproject_nginxconf" id="projectsmyprojectconfigmyproject_nginxconf">~/projects/myproject/config/myproject_nginx.conf</a></h6>
<pre><code class="language-bash">server {
        # the port your site will be served on
        listen 80;
 
        # the domain name it will serve for
        server_name     example.io; # 여기에 도메인 주소를 적는다
        charset         utf-8;
 
        access_log      /home/my-user/projects/myproject/log/access.log;
        error_log       /home/my-user/projects/myproject/log/error.log;
 
        location /static/ { # STATIC_URL
            alias /home/my-user/projects/myproject/myproject/static/; # STATIC_ROOT
            expires 30d;
        }

        location / {
            include proxy_params;
            proxy_pass http://unix:/home/my-user/projects/myproject/config/myproject.sock;
        }
}
</code></pre>
<p>이제 이 파일을 nginx 경로에 추가한다.</p>
<pre><code class="language-bash">(env) $ sudo ln -s ~/projects/myproject/config/myproject_nginx.conf /etc/nginx/sites-enabled/
</code></pre>
<p>그리고 nginx 설정 파일의 문법을 검사하고 서비스를 시작한다.</p>
<pre><code class="language-bash">(env) $ sudo nginx -t
(env) $ sudo systemctl start nginx
(env) $ sudo ufw allow 8000 # Django의 runserver 기능을 위해 8000번 포트도 열어준다.
</code></pre>
<h3><a class="header" href="#3-데이터베이스-설정" id="3-데이터베이스-설정">3. 데이터베이스 설정</a></h3>
<p>Django 프로젝트에서 postgresql을 사용한다면 다음과 같은 설정을 거쳐야 한다.</p>
<pre><code class="language-bash">(env) $ sudo -u postgres psql
postgres=# CREATE DATABASE myproject; # 데이터베이스 생성
postgres=# CREATE USER myprojectuser with PASSWORD 'password'; # 유저 생성
postgres=# GRANT ALL PRIVILEGES ON DATABASE myproject TO myprojectuser; # 권한 할당
postgres=# \q
</code></pre>
<h3><a class="header" href="#4-프로젝트-생성" id="4-프로젝트-생성">4. 프로젝트 생성</a></h3>
<p>실제 프로젝트는 git clone을 통해 가져왔지만 편의상 프로젝트를 새로 생성하는 것으로 글을 쓰겠다.</p>
<pre><code class="language-bash">(env) $ pip install --upgrade pip
(env) $ pip install django gunicorn psycopg2 whitenoise
(env) $ django-admin startproject myproject
(env) $ cd myproject
(env) $ vim myproject/settings.py
</code></pre>
<h6><a class="header" href="#myprojectsettingspy" id="myprojectsettingspy">myproject/settings.py</a></h6>
<pre><code class="language-python">...
ALLOWED_HOSTS = ['my_domain_name']
...
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': 'myproject',
        'USER': 'myprojectuser',
        'PASSWORD': 'password',
        'HOST': 'localhost',
        'PORT': '',
    }
}
...
STATIC_URL = '/static/'
STATIC_ROOT = os.path.join(BASE_DIR, 'static/')
</code></pre>
<h6><a class="header" href="#myprojectwsgipy" id="myprojectwsgipy">myproject/wsgi.py</a></h6>
<pre><code class="language-python">from whitenoise.django import DjangoWhiteNoise
...
application = DjangoWhiteNoise(get_wsgi_application())
...
</code></pre>
<h4><a class="header" href="#프로젝트-실행" id="프로젝트-실행">프로젝트 실행</a></h4>
<pre><code class="language-bash">(env) $ python manage.py makemigrations
(env) $ python manage.py migrate
(env) $ python manage.py collectstatic
(env) $ python manage.py runserver 0.0.0.0:8000
</code></pre>
<p>http://my_domain_name:8000/ 으로 접속하여 내용이 잘 출력되는지 확인한다.</p>
<h3><a class="header" href="#5-gunicorn-설정" id="5-gunicorn-설정">5. Gunicorn 설정</a></h3>
<pre><code class="language-bash">(env) $ gunicorn --bind 0.0.0.0:8000 myproject.wsgi:application
</code></pre>
<p>Gunicorn을 통해 서버를 구동한다. 마찬가지로 http://my_domain_name:8000/ 으로 접속하여 내용이 잘 출력되는지 확인한다. 잘 동작한다면 <code>deactivate</code>로 가상환경을 종료하자.</p>
<p>그리고 Gunicorn의 서비스 스크립트를 만든다.</p>
<h6><a class="header" href="#projectsmyprojectconfiggunicornservice" id="projectsmyprojectconfiggunicornservice">~/projects/myproject/config/gunicorn.service</a></h6>
<pre><code class="language-bash">[Unit]
Description=gunicorn daemon
After=network.target

[Service]
User=my-user
Group=www-data
WorkingDirectory=/home/my-user/projects/myproject/myproject
ExecStart=/home/my-user/projects/myproject/env/bin/gunicorn \
        --workers 3 \
        --bind unix:/home/my-user/projects/myproject/config/myproject.sock \
        myproject.wsgi:application

[Install]
WantedBy=multi-user.target
</code></pre>
<p>이제 이 파일을 서비스에 추가하고 서비스를 실행시킨다.</p>
<pre><code class="language-bash">$ sudo ln -s ~/projects/myproject/config/gunicorn.service /etc/systemd/system/
$ sudo systemctl daemon-reload
$ sudo systemctl start gunicorn
$ sudo systemctl enable gunicorn
$ sudo systemctl status gunicorn
</code></pre>
<p>마지막으로 방화벽을 설정한다.</p>
<pre><code class="language-bash">$ sudo ufw delete 8000
$ sudo ufw allow 'Nginx Full'
</code></pre>
<p>http://my_domain_name/ 으로 접속하여 내용이 잘 출력되는지 확인한다.</p>
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p><a href="http://www.maxchung.com/2015/11/06/domain-%EA%B5%AC%EC%9E%85%EA%B8%B0-%EB%B0%8F-conoha%EC%97%90-%EC%97%B0%EA%B2%B0%ED%95%98%EA%B8%B0/">maxchung님의 블로그</a>를 참고했다.
<sup class="footnote-reference"><a href="#2">2</a></sup>: <a href="http://www.haruair.com/blog/2220">haruair님의 블로그</a>를 참고했다.
<sup class="footnote-reference"><a href="#3">3</a></sup>: <a href="https://blog.chann.kr/initial-server-setup-with-ubuntu-14-04/">chann님의 블로그</a>를 참고했다.
<sup class="footnote-reference"><a href="#4">4</a></sup>: <a href="https://blog.qwaz.io/dev-diary/%EC%84%9C%EB%B2%84-%EC%84%B8%ED%8C%85%ED%95%98%EA%B8%B0-1%EB%B6%80">quaz님의 블로그</a>와 <a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-django-with-postgres-nginx-and-gunicorn-on-ubuntu-16-04">DigitalOcean</a>을 참고했다.</p>
</div>
<h1><a class="header" href="#a-hrefhttpwwwhanbitcokrstorebookslookphpp_codeb7703021280django-bluebooka-study" id="a-hrefhttpwwwhanbitcokrstorebookslookphpp_codeb7703021280django-bluebooka-study"><a href="http://www.hanbit.co.kr/store/books/look.php?p_code=B7703021280">Django Bluebook</a> Study</a></h1>
<h1><a class="header" href="#chapter14-장고-핵심-기능---model" id="chapter14-장고-핵심-기능---model">Chapter14. 장고 핵심 기능 - Model</a></h1>
<h2><a class="header" href="#141-모델-정의" id="141-모델-정의">14.1 모델 정의</a></h2>
<ul>
<li>장고는 ORM(Object-Relational Mappging)방식 - 테이블을 클래스로 처리, 클래스의 특징인 속성과 메소드를 가질 수 있음 - 을 기반으로 한다.</li>
</ul>
<blockquote>
<p>테이블을 클래스로 매핑해서 테이블에 대한 생성, 조회, 수정, 삭제 기능을 클래스 객체에 대해 수행하면, 장고가 내부적으로 DB에 반영해주는 방식.
객체를 클래스로 표현하는 것과 같이 관계형 데이터베이스를 객체처럼 쉽게 사용할 수 있다.</p>
</blockquote>
<h4><a class="header" href="#모델-예시-코드" id="모델-예시-코드">모델 예시 코드</a></h4>
<pre><code class="language-python">class Album(models.Model):
    name = models.CharField(max_length=50)
    description = models.CharField('One line Description', max_length=100, blank=True)
    owner = models.ForeignKey(User, null=True)
    # objects = models.Manager()

    class Meta:
        ordering = ['name']

    def __str__(self):
        return self.name
`
    def get_absolute_url(self):
        return reverse('photo:album_detail', args=(self.id,))
</code></pre>
<h3><a class="header" href="#1411-모델-속성" id="1411-모델-속성">14.1.1 모델 속성</a></h3>
<ul>
<li>모델 클래스의 속성 = 테이블의 컬럼(필드)</li>
<li>필드는 항상 필드명, 필드 타입, 필드 옵션을 지정해야 함.
<ul>
<li>필드 타입 : 테이블의 컬럼 타입. 폼으로 렌더링 되는 경우 HTML 위젯을 지정. 필드 또는 폼에 대한 유효성 검사 시 최소 기준이 됨.</li>
<li>커스텀 필드 타입 : <a href="https://docs.djangoproject.com/en/1.10/ref/models/fields/#field-attribute-reference">참고1</a>, <a href="https://docs.djangoproject.com/en/1.10/howto/custom-model-fields/">참고2</a></li>
</ul>
</li>
</ul>
<h3><a class="header" href="#1412-모델-메소드" id="1412-모델-메소드">14.1.2 모델 메소드</a></h3>
<ul>
<li>클래스 메소드(테이블 레벨에서 동작)와 객체 메소드(레코드 레벨에서 동작)를 구분해야 함.</li>
<li>장고에서는 객체 메소드만 사용 -&gt; 레코드 단위에만 영향을 미침.</li>
<li>클래스 메소드 대신 별도의 Manager 클래스를 정의하여 이를 통해 테이블의 CRUD 수행.</li>
</ul>
<h4><a class="header" href="#많이-사용되는-모델-메소드" id="많이-사용되는-모델-메소드">많이 사용되는 모델 메소드</a></h4>
<ol>
<li><code>__unicode__()</code>(in Python2) or <code>__str__()</code>(in Python3)</li>
<li>get_absolute_url()</li>
<li>get_next_by_FOO(**kwargs)</li>
<li>get_previous_by_FOO(**kwargs)</li>
<li>get_FOO_display()</li>
</ol>
<h3><a class="header" href="#1413-meta-내부-클래스-속성" id="1413-meta-내부-클래스-속성">14.1.3 Meta 내부 클래스 속성</a></h3>
<ul>
<li>모델 클래스의 필드는 아니나, 모델 클래스에 필요한 항목을 정의.</li>
</ul>
<h4><a class="header" href="#많이-사용되는-meta-내부-클래스-속성" id="많이-사용되는-meta-내부-클래스-속성">많이 사용되는 Meta 내부 클래스 속성</a></h4>
<ol>
<li>ordering</li>
<li>db_table</li>
<li>verbose_name</li>
<li>verbose_name_plural</li>
</ol>
<ul>
<li><a href="https://docs.djangoproject.com/en/1.10/ref/models/options/">참고</a></li>
</ul>
<h3><a class="header" href="#1414-manager-속성" id="1414-manager-속성">14.1.4 Manager 속성</a></h3>
<ul>
<li>모든 모델은 반드시 Manager 속성을 가져야 한다. 명시적으로 지정하지 않으면 디폴트로 <code>objects = models.Manager()</code>를 가짐.</li>
<li>Manager 클래스를 통해서 데이터베이스 쿼리가 이뤄짐.</li>
<li>Manager 속성은 모델 클래스를 통해서만 접근이 가능.</li>
<li>테이블 레벨에서의 동작은 Manager 클래스의 메소드를 통해 이뤄짐.</li>
<li><code>all()</code>, <code>filter()</code>, <code>exclude()</code>, <code>get()</code>, <code>count()</code> 등의 QuerySet 메소드는 모두 Manager 클래스의 메소드로도 사용</li>
<li>모델 클래스에서 여러 개의 Manager 속성을 정의할 수 있으며, 첫 번째로 정의된 것이 디폴트 Manager이다.</li>
</ul>
<h1><a class="header" href="#django-setup" id="django-setup">Django Setup</a></h1>
<ol>
<li>
<p>Activate virtual env.</p>
</li>
<li>
<p>Install django.</p>
</li>
</ol>
<pre><code class="language-bash">$ pip install --upgrade pip
$ pip install django
</code></pre>
<ol start="3">
<li>Create project.</li>
</ol>
<blockquote>
<p>Don't forget . at the end!!</p>
</blockquote>
<pre><code class="language-bash">$ mkdir tutorial
$ cd tutorial
$ django-admin startproject tutorial .
$ tree
.
├── manage.py
└── tutorial
    ├── __init__.py
    ├── settings.py
    ├── urls.py
    └── wsgi.py
</code></pre>
<ol start="4">
<li>Create application</li>
</ol>
<pre><code class="language-bash">$ ./manage.py startapp community
$ tree
.
├── community
│   ├── __init__.py
│   ├── admin.py
│   ├── apps.py
│   ├── migrations
│   │   └── __init__.py
│   ├── models.py
│   ├── tests.py
│   └── views.py
├── manage.py
└── tutorial
    ├── __init__.py
    ├── __pycache__
    │   ├── __init__.cpython-35.pyc
    │   └── settings.cpython-35.pyc
    ├── settings.py
    ├── urls.py
    └── wsgi.py
</code></pre>
<ol start="5">
<li>Create Database Table</li>
</ol>
<pre><code class="language-bash">$ ./manage.py migrate
</code></pre>
<ol start="6">
<li>Create Superuser</li>
</ol>
<pre><code class="language-bash">$ ./manage.py createsuperuser
</code></pre>
<ol start="7">
<li>Run Server</li>
</ol>
<pre><code class="language-bash">$ ./manage.py runserver
</code></pre>
<h1><a class="header" href="#aws-ec2-django-postgresql" id="aws-ec2-django-postgresql">AWS EC2, Django, Postgresql</a></h1>
<h2><a class="header" href="#aws-ec2" id="aws-ec2">AWS EC2</a></h2>
<h3><a class="header" href="#1-인스턴스-생성" id="1-인스턴스-생성">1. 인스턴스 생성</a></h3>
<ul>
<li>EC2 - Launch Instance - Ubuntu Server 16.04 LTS - t2.micro - Review and Launch - Launch</li>
</ul>
<h4><a class="header" href="#1-1-인스턴스-보안-설정" id="1-1-인스턴스-보안-설정">1-1. 인스턴스 보안 설정</a></h4>
<ul>
<li>Add Rule(SSH / TCP / 22 / My Ip)</li>
<li>Add Rule(Custom TCP Rule / TCP / 8000 / Anywhere)</li>
</ul>
<h4><a class="header" href="#1-2-key-pair-생성" id="1-2-key-pair-생성">1-2. Key Pair 생성</a></h4>
<ul>
<li>Create new key pair - Download</li>
<li>다운받은 파일을 .ssh 폴더로 이동 <code>$ mv &lt;key-pair-name&gt;.pem ~/.ssh</code></li>
</ul>
<h3><a class="header" href="#2-인스턴스-접속" id="2-인스턴스-접속">2. 인스턴스 접속</a></h3>
<ul>
<li>인스턴스 목록에서 우클릭 - Connect - 시키는 대로 할 것</li>
<li><code>$ cd .ssh</code></li>
</ul>
<h2><a class="header" href="#set-up" id="set-up">Set up</a></h2>
<h3><a class="header" href="#install-packages" id="install-packages">Install packages</a></h3>
<pre><code class="language-bash">$ sudo apt-get update
$ sudo apt-get install python3-pip python3-venv libpq-dev postgresql
</code></pre>
<h3><a class="header" href="#set-up-postgresql" id="set-up-postgresql">Set up postgresql</a></h3>
<h4><a class="header" href="#create-user-to-the-system" id="create-user-to-the-system">Create user to the system</a></h4>
<pre><code class="language-bash">$ sudo adduser &lt;username&gt;			# 유저 등록
$ sudo gpasswd -a &lt;username&gt; sudo	 # sudo 그룹에 넣음
$ sudo -i -u &lt;username&gt;
&lt;username&gt;@:~$
</code></pre>
<h4><a class="header" href="#create-new-role" id="create-new-role">Create new role</a></h4>
<pre><code class="language-bash">&lt;username&gt;@:~$ sudo -i -u postgres				# postgres default account로 로그인
postgres@:~$ createuser --interactive
Enter name of role to add: &lt;role-name&gt;
Shall the new role be a superuser? (y/n) y
postgres@:~$ createdb &lt;db-name&gt;
postgres@:~$ exit
logout
&lt;username&gt;@:~$ psql
psql (9.5.5)
&lt;role-name&gt;=# \conninfo
&lt;role-name&gt;=# ALTER USER &quot;role-name&quot; WITH PASSWORD 'db-password';
ALTER ROLE
&lt;role-name&gt;=# \q
&lt;username&gt;@:~$
</code></pre>
<h3><a class="header" href="#clone-your-django-project-from-github" id="clone-your-django-project-from-github">Clone your django project from github</a></h3>
<pre><code class="language-bash">&lt;username&gt;@:~$ git clone https://github.com/&lt;github-name&gt;/&lt;project&gt;.git
&lt;username&gt;@:~$ cd &lt;project&gt;
&lt;username&gt;@:~/&lt;project&gt;$ python3 -m venv env
&lt;username&gt;@:~/&lt;project&gt;$ source env/bin/activate
(env) &lt;username&gt;@:~/&lt;project&gt;$ 
</code></pre>
<p><strong>[NOTE]</strong> If warning occurs like this, :</p>
<pre><code class="language-bash">perl: warning: Please check that your locale settings:
	LANGUAGE = (unset),
	LC_ALL = (unset),
	LC_CTYPE = &quot;ko_KR.UTF-8&quot;,
	LANG = &quot;en_US.UTF-8&quot;
    are supported and installed on your system.
perl: warning: Falling back to a fallback locale (&quot;en_US.UTF-8&quot;).
</code></pre>
<p>type like this:</p>
<pre><code class="language-bash">$ export LC_ALL=&quot;en_US.UTF-8&quot;
$ export LC_CTYPE=&quot;en_US.UTF-8&quot;
</code></pre>
<h3><a class="header" href="#run-your-django-project" id="run-your-django-project">Run your django project</a></h3>
<pre><code class="language-bash">(env) $ pip install --upgrade pip
(env) $ pip install -r requirements.txt

$ python manage.py migrate
$ python manage.py runserver 0.0.0.0:8000
</code></pre>
<p>And open http://<your-public-DNS>:8000 in browser.</p>
<h1><a class="header" href="#클린-코드를-위한-테스트-주도-개발" id="클린-코드를-위한-테스트-주도-개발">클린 코드를 위한 테스트 주도 개발</a></h1>
<blockquote>
<p>원서 소개 링크 http://www.obeythetestinggoat.com</p>
</blockquote>
<h4><a class="header" href="#실행-환경" id="실행-환경">실행 환경</a></h4>
<ul>
<li>macOS 10.12.3</li>
<li>python 3.5.2</li>
<li>selenium 3.3.1</li>
<li>firefox 52.0</li>
</ul>
<h3><a class="header" href="#p-5" id="p-5">p. 5</a></h3>
<h4><a class="header" href="#problem" id="problem">Problem</a></h4>
<p>첫 번째 테스트부터 책에 나온대로 되지 않는다.</p>
<h6><a class="header" href="#소스코드" id="소스코드">소스코드</a></h6>
<pre><code class="language-python">from selenium import webdriver

browser = webdriver.Firefox()
browser.get('http://localhost:8000')

assert 'Django' in browser.title
</code></pre>
<p>코드를 돌려보니 원하는 에러 메시지가 아니다. 아무래도 <code>geckodriver</code>를 가지고 해결해야 하는 듯 하다.</p>
<h4><a class="header" href="#how-to-solve" id="how-to-solve">How to solve</a></h4>
<h5><a class="header" href="#1-on-mac-os" id="1-on-mac-os">1. on Mac OS</a></h5>
<p>먼저 <a href="https://github.com/mozilla/geckodriver/releases/tag/v0.15.0">geckodriver</a>를 설치하고 적당한 위치에 넣어주자. 나는 최신 릴리즈 버전인 0.15.0을 설치했다. 그리고 아래 사항들을 진행한다.</p>
<pre><code class="language-bash"># 파일을 열어 다음을 추가한다. 폴더의 경로는 자신의 것에 맞게 수정한다.
$ vim ~/.bash_profile
export PATH=$PATH:/YOUR/DIRECTORY/PATH/geckodriver-v0.15.0-macos

# 변경사항을 쉘에 적용한다.
$ source ~/.bash_profile

# 변경이 잘 되었는지 확인한다.
$ geckodriver --version
geckodriver 0.15.0

The source code of this program is available at
https://github.com/mozilla/geckodriver.

This program is subject to the terms of the Mozilla Public License 2.0.
You can obtain a copy of the license at https://mozilla.org/MPL/2.0/.
</code></pre>
<p>이번에는 <code>http://localhost:8000</code> 를 접속하는 데서 에러가 난다. 이를 무시하고 책을 계속 따라가다보면, Django 테스트에서 이 코드가 사용되기 때문에 그다지 문제가 없다. 그러나 만약 <code>geckodriver</code> 문제가 잘 해결되었는지 확인하고 싶다면, <code>http://localhost:8000</code> 대신 <code>http://www.google.com</code>와 같은 실재하는 주소를 넣어보자. 그러면 원하는 <code>AssertionError</code> 를 얻을 수 있을 것이다.</p>
<pre><code class="language-bash">$ python functional_test.py
Traceback (most recent call last):
  File &quot;functional_test.py&quot;, line 6, in &lt;module&gt;
    assert 'Django' in browser.title
AssertionError
</code></pre>
<h4><a class="header" href="#2-on-ubuntu" id="2-on-ubuntu">2. on Ubuntu</a></h4>
<pre><code class="language-bash">$ wget https://github.com/mozilla/geckodriver/releases/download/v0.15.0/geckodriver-v0.15.0-linux64.tar.gz # install
$ tar -xvzf geckodriver-v0.15.0-linux64.tar.gz geckodriver # unpack
$ rm geckodriver-v0.15.0-linux64.tar.gz # delete tar file
$ chmod +x geckodriver
$ export PATH=$PATH:/YOUR/DIRECTORY/PATH/geckodriver
</code></pre>
<h3><a class="header" href="#p33" id="p33">p.33</a></h3>
<h4><a class="header" href="#problem-1" id="problem-1">Problem</a></h4>
<p><code>python manage.py runserver</code>를 실행하면 다음과 같은 에러메시지가 나온다.</p>
<pre><code class="language-bash">Error: view must be a callable or a list/tuple in the case of include().
</code></pre>
<h4><a class="header" href="#how-to-solve-1" id="how-to-solve-1">How to solve</a></h4>
<h6><a class="header" href="#superlistsurlspy" id="superlistsurlspy">superlists/urls.py</a></h6>
<pre><code class="language-python">from django.conf.urls import url
from lists import views

urlpatterns = [
    url(r'^$', views.home_page, name='home')
]
</code></pre>
<h3><a class="header" href="#p63" id="p63">p.63</a></h3>
<h4><a class="header" href="#how-to-solve-2" id="how-to-solve-2">How to solve</a></h4>
<p>csrf_token을 제거하고 비교하도록 한다.</p>
<h6><a class="header" href="#liststestpy" id="liststestpy">lists/test.py</a></h6>
<pre><code class="language-python">class HomePageTest(TestCase):

    def remove_csrf(self, origin):
        csrf_regex = r'&lt;input[^&gt;]+csrfmiddlewaretoken[^&gt;]+&gt;'
        return re.sub(csrf_regex, '', origin)

    def test_root_url_resolves_to_home_page_view(self):
        found = resolve('/')
        self.assertEqual(found.func, home_page)

    def test_home_page_returns_correct_html(self):
        request = HttpRequest()
        response = home_page(request)
        expected_html = self.remove_csrf(render_to_string('home.html'))
        response_decode = self.remove_csrf(response.content.decode())

        self.assertEqual(response_decode, expected_html)

    def test_home_page_can_save_a_post_request(self):
        request = HttpRequest()
        request.method = 'POST'
        request.POST['item_text'] = 'A new item'

        response = home_page(request)

        self.assertIn('A new item', response.content.decode())

        expected_html = self.remove_csrf(render_to_string(
            'home.html',
            {'new_item_text': 'A new item'}
        ))
        response_decode = self.remove_csrf(response.content.decode())

        self.assertEqual(response_decode, expected_html)
</code></pre>
<h3><a class="header" href="#p85" id="p85">p.85</a></h3>
<h4><a class="header" href="#problem-2" id="problem-2">Problem</a></h4>
<p>페이지 마지막의 기능 테스트를 성공하면 다음과 같은 메시지가 떠야한다.</p>
<pre><code class="language-bash">Traceback (most recent call last):
  File &quot;functional_test.py&quot;, line 77, in test_can_start_a_list_and_retrieve_it_later
    self.fail('Finish the test!')
AssertionError: Finish the test!
</code></pre>
<p>그러나 다음과 같은 에러 메시지가 떴다.</p>
<pre><code class="language-bash">selenium.common.exceptions.InvalidSelectorException: Message: Given css selector expression &quot;tr&quot; is invalid: TypeError: can't access dead object
</code></pre>
<h4><a class="header" href="#how-to-solve-3" id="how-to-solve-3">How to solve</a></h4>
<p>이 문제에 대해서 <a href="http://stackoverflow.com/a/41206683">stackoverflow</a>에 저자가 답변을 달아놨는데, 책에서는 Selenium2을 사용했는데 Selenium3으로 업데이트 되면서 <code>implicit wait</code>을 처리하는 방법이 달라졌기 때문에 에러가 난다고 한다. 다음과 같이 코드를 수정해주자.</p>
<h6><a class="header" href="#functional_testpy" id="functional_testpy">functional_test.py</a></h6>
<pre><code class="language-python">...
from contextlib import contextmanager
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support.expected_conditions import staleness_of

class NewVisitorTest(unittest.TestCase):
    ...
    @contextmanager
    def wait_for_page_load(self, timeout=30):
        old_page = self.browser.find_element_by_tag_name(&quot;html&quot;)
        yield WebDriverWait(self.browser, timeout).until(
            staleness_of(old_page)
        )
    ...
    def test_can_start_list_and_retrieve_it_later(self):
        ...
        inputbox.send_keys(&quot;Buy peacock feathers&quot;)
        inputbox.send_keys(Keys.ENTER)

        with self.wait_for_page_load(timeout=10):
            self.check_for_row_in_list_table(&quot;1: Buy peacock feathers&quot;)

        inputbox = self.browser.find_element_by_id(&quot;id_new_item&quot;)
        inputbox.send_keys(&quot;Use peacock feathers to make a fly&quot;)
        inputbox.send_keys(Keys.ENTER)

        with self.wait_for_page_load(timeout=10):
            self.check_for_row_in_list_table(&quot;1: Buy peacock feathers&quot;)
            self.check_for_row_in_list_table(&quot;2: Use peacock feathers to make a fly&quot;)
</code></pre>
<h3><a class="header" href="#p95" id="p95">p.95</a></h3>
<h4><a class="header" href="#yagni" id="yagni">YAGNI</a></h4>
<blockquote>
<p>설계에 대해 한번 생각하기 시작하면 생각을 멈추는 것이 쉽지 않다. 여러 가지 생각이 떠오르기 시작한다. [중략] 하지만 애자일 복음인 <strong>YAGNI</strong>에 순종해야 한다(야그니라 읽는다). &quot;You ain't gonna need it.&quot;(그것을 사용할 일이 없을 것이다)의 약자다. 소프트웨어 개발자로서 우리는 무언가 만드는 것을 즐긴다. 또한 아이디어가 생각나서 그것을 직접 구축해보고 싶어서 안달이 나는 경우도 있을 것이다. 하지만 아이디어가 정말 끝내주더라도 대개는 그걸 사용하지 않고 끝나는 경우가 많다 오히려 사용하지 않는 코드로 가득 차서 애플리케이션이 복잡해지기도 한다. YAGNI는 창의적이지만 과도한 열정을 억제해주는 경전이라고 할 수 있다.</p>
</blockquote>
<h3><a class="header" href="#p101" id="p101">p.101</a></h3>
<h4><a class="header" href="#problem-3" id="problem-3">Problem</a></h4>
<p>p.97에서 다음과 같이 기능 테스트를 수정했다. <code>self.wait_for_page_load</code> 부분은 이 포스트의 윗부분(p.85)에 수정했던 부분이다.</p>
<h6><a class="header" href="#functional_teststestspy" id="functional_teststestspy">functional_tests/tests.py</a></h6>
<pre><code class="language-python"># When she hits enter, the page updates, and now the page lists
# &quot;1: Buy peacock feathers&quot; as an item in a to-do list
inputbox.send_keys(Keys.ENTER)
edith_list_url = self.browser.current_url
self.assertRegex(edith_list_url, '/lists/.+')
with self.wait_for_page_load(timeout=10):
    self.check_for_row_in_list_table(&quot;1: Buy peacock feathers&quot;)
</code></pre>
<p>p.100에서 home_page 뷰를 수정했는데도, 기능 테스트를 실행하면 이전에 나왔던 에러 메시지가 똑같이 나온다.</p>
<pre><code class="language-bash">self.assertRegex(edith_list_url, '/lists/.+')
AssertionError: Regex didn't match: '/lists/.+' not found in 'http://localhost:8081/'
</code></pre>
<h4><a class="header" href="#how-to-solve-4" id="how-to-solve-4">How to solve</a></h4>
<h6><a class="header" href="#functional_teststestspy-1" id="functional_teststestspy-1">functional_tests/tests.py</a></h6>
<pre><code class="language-python"># When she hits enter, the page updates, and now the page lists
# &quot;1: Buy peacock feathers&quot; as an item in a to-do list
inputbox.send_keys(Keys.ENTER)
with self.wait_for_page_load(timeout=10):
    self.check_for_row_in_list_table(&quot;1: Buy peacock feathers&quot;)
edith_list_url = self.browser.current_url
self.assertRegex(edith_list_url, '/lists/.+')
</code></pre>
<p>기존의 코드에서 순서를 조금 바꿨는데, 엔터를 입력받은 후에 암묵적인 대기 시간(implicit wait)을 주도록 수정했다. 이제 다시 기능 테스트를 실행하면 원하는 메시지를 얻을 수 있다.</p>
<pre><code class="language-bash">selenium.common.exceptions.NoSuchElementException: Message: Unable to locate element: [id=&quot;id_list_table&quot;]
</code></pre>
<h3><a class="header" href="#p103" id="p103">p.103</a></h3>
<h4><a class="header" href="#how-to-solve-5" id="how-to-solve-5">How to solve</a></h4>
<pre><code class="language-python">from django.conf.urls import url
from lists import views

urlpatterns = [
    url(r'^$', views.home_page, name='home'),
    url(
        r'^lists/the-only-list-in-the-world/$',
        views.view_list,
        name='view_list')
]
</code></pre>
<h3><a class="header" href="#p104" id="p104">p.104</a></h3>
<h4><a class="header" href="#problem-4" id="problem-4">Problem</a></h4>
<p>책에서는 다음과 같은 에러가 나길 원한다.</p>
<pre><code>AssertionError: '2: Use peacock feathers to make a fly' not found in ['1: Buy peacock feathers']
</code></pre>
<p>그런데 다음과 같은 에러가 나는 것은 implicit wait를 설정해주었기 때문이고, 자세히 살펴보면 같은 곳에서 에러가 나는 것이므로 문제될 것이 없다.</p>
<pre><code class="language-bash">	raise TimeoutException(message, screen, stacktrace)
selenium.common.exceptions.TimeoutException: Message:
</code></pre>
<h3><a class="header" href="#p107" id="p107">p.107</a></h3>
<p>원하지 않는 에러가 나타났다. 기능 테스트 과정에서 브라우저를 껐다가 다시 켰는데도 이전의 쿠키가 남아있는 모양이다.</p>
<pre><code class="language-bash">	self.assertIn(row_text, [row.text for row in rows])
AssertionError: '1: Buy milk' not found in ['1: Buy peacock feathers', '2: Use peacock feathers to make a fly', '3: Buy milk']
</code></pre>
<h3><a class="header" href="#p171" id="p171">p.171</a></h3>
<h4><a class="header" href="#problem-5" id="problem-5">Problem</a></h4>
<pre><code class="language-bash">AttributeError: type object 'NewVisitorTest' has no attribute 'server_thread'
</code></pre>
<h4><a class="header" href="#how-to-solve-6" id="how-to-solve-6">How to Solve</a></h4>
<p>tearDownClass가 다음과 같은 에러를 만들어내서 주석처리 해주었다.</p>
<pre><code class="language-python">class NewVisitorTest(StaticLiveServerTestCase):
    
    @classmethod
    def setUpClass(cls):
        for arg in sys.argv:
            if 'liveserver' in arg:
                cls.server_url = 'http://' + arg.split('=')[1]
                return
        super().setUpClass()
        cls.server_url = cls.live_server_url

    # @classmethod
    # def tearDownClass(cls):
    #     if cls.server_url == cls.live_server_url:
    #         super().tearDownClass()
</code></pre>
<h3><a class="header" href="#p177" id="p177">p.177</a></h3>
<p>이제 Ubuntu에서 upstart 를 사용하지 않는다고 한다.<sup class="footnote-reference"><a href="#4">1</a></sup> 대신 service 를 사용했다.</p>
<h6><a class="header" href="#nginxconf" id="nginxconf">nginx.conf</a></h6>
<pre><code class="language-bash">server {
    listen 80;
    server_name tdd.aweek-jo.com;

    location /static {
        alias /home/modo/projects/tdd.aweek-jo.com/static;
    }

    location / {
        proxy_set_header Host $host;
        proxy_pass http://unix:/home/modo/projects/tdd.aweek-jo.com/gunicorn.sock;
    }
}
</code></pre>
<h6><a class="header" href="#gunicornservice" id="gunicornservice">gunicorn.service</a></h6>
<pre><code class="language-bash">[Unit]
Description=Gunicorn daemon
After=network.target

[Service]
User=modo
Group=www-data
WorkingDirectory=/home/modo/projects/tdd.aweek-jo.com/source
ExecStart=/home/modo/projects/tdd.aweek-jo.com/env/bin/gunicorn \
        --workers 3 \
        --bind unix:/home/modo/projects/tdd.aweek-jo.com/gunicorn.sock \
        superlists.wsgi:application

[Install]
WantedBy=multi-user.target
</code></pre>
<pre><code class="language-bash">$ sudo ln -s ~/Path/to/yourfile/gunicorn.service /etc/systemd/system/
$ sudo systemctl daemon-reload
$ sudo systemctl start gunicorn
$ sudo systemctl enable gunicorn
$ sudo systemctl status gunicorn
</code></pre>
<h5><a class="header" href="#refer-to-1" id="refer-to-1">Refer to</a></h5>
<ul>
<li>
<p><a href="http://www.obeythetestinggoat.com">원서 소개 링크</a></p>
</li>
<li>
<p><a href="https://hyesun03.github.io/2016/09/19/djangoTDD01/">hyesun03님의 블로그: 클린 코드를 위한 테스트 주도 개발</a></p>
</li>
<div class="footnote-definition" id="4"><sup class="footnote-definition-label">1</sup>
<p><a href="http://askubuntu.com/a/621209">참고 링크</a></p>
</div>
</ul>
<h1><a class="header" href="#about-docker" id="about-docker">About Docker</a></h1>
<p>참고로 Docker(이하 도커) 초보임. 서버 셋팅용 스크립트를 짜다가, 귀찮음을 깨닫고 도커에 대해 알아본 것을 정리함. 도커는 프로그램+실행환경을 하나의 컨테이너로 추상화하여 어느 환경에서나 실행 가능하도록 함. 따라서 로컬에 개발 환경을 구축하는 대신, 도커 컨테이너를 개발 환경으로 사용 가능.</p>
<h3><a class="header" href="#1-what-is-docker" id="1-what-is-docker">1. What is Docker?</a></h3>
<p>도커에는 이미지와 컨테이너라는 개념이 있다. </p>
<h5><a class="header" href="#이미지" id="이미지">이미지</a></h5>
<ul>
<li>실행에 필요한 파일과 설정값들을 포함하고 있는 것. </li>
<li>레이어 개념을 사용한다. ubuntu 이미지가 <code>A</code> + <code>B</code> + <code>C</code>의 집합이라면, ubuntu 이미지를 베이스로 만든 nginx 이미지는 <code>A</code> + <code>B</code> + <code>C</code> + <code>nginx</code>. webapp 이미지를 nginx 이미지 기반으로 만들었다면 예상대로 <code>A</code> + <code>B</code> + <code>C</code> + <code>nginx</code> + <code>source</code> 레이어로 구성. webapp 소스를 수정하면 <code>A</code>, <code>B</code>, <code>C</code>, <code>nginx</code> 레이어를 제외한 새로운 <code>source(v2)</code> 레이어만 다운받으면 되기 때문에 굉장히 효율적으로 이미지를 관리할 수 있다.</li>
<li><code>Dockerfile</code> 에 이미지 생성과정을 적는다.</li>
<li>도커에도 깃허브 같은 도커허브가 있어서 이미지를 <code>push/pull</code> 할 수 있다.</li>
</ul>
<h5><a class="header" href="#컨테이너" id="컨테이너">컨테이너</a></h5>
<p>이미지를 실행한 상태</p>
<h3><a class="header" href="#2-installation" id="2-installation">2. Installation</a></h3>
<h4><a class="header" href="#linux" id="linux">Linux</a></h4>
<pre><code class="language-bash">curl -s https://get.docker.com/ | sudo sh

sudo usermod -aG docker $USER # 현재 접속중인 사용자에게 권한주기
sudo usermod -aG docker your-user # your-user 사용자에게 권한주기
</code></pre>
<h4><a class="header" href="#mac-os" id="mac-os">Mac OS</a></h4>
<p><a href="https://docs.docker.com/docker-for-mac/install/#download-docker-for-mac">Link</a></p>
<h4><a class="header" href="#windows" id="windows">Windows</a></h4>
<p><a href="https://docs.docker.com/docker-for-windows/install/">Link</a></p>
<h3><a class="header" href="#3-run-docker" id="3-run-docker">3. Run Docker</a></h3>
<pre><code class="language-bash">$ docker run [OPTIONS] IMAGE[:TAG|@DIGEST] [COMMAND] [ARG ...]
</code></pre>
<p><code>run</code> 실행 시 이미지가 없으면 <code>pull</code> -&gt; <code>create</code> -&gt; <code>start</code> 한다.</p>
<h5><a class="header" href="#실행-옵션" id="실행-옵션">실행 옵션</a></h5>
<table><thead><tr><th>OPTION</th><th>DESCRIPTION</th></tr></thead><tbody>
<tr><td>-d</td><td>detached mode 흔히 말하는 백그라운드 모드</td></tr>
<tr><td>-p</td><td>호스트와 컨테이너의 포트를 연결 (포워딩)</td></tr>
<tr><td>-v</td><td>호스트와 컨테이너의 디렉토리를 연결 (마운트)</td></tr>
<tr><td>-e</td><td>컨테이너 내에서 사용할 환경변수 설정</td></tr>
<tr><td>-name</td><td>컨테이너 이름 설정</td></tr>
<tr><td>--rm</td><td>프로세스 종료시 컨테이너 자동 제거</td></tr>
<tr><td>-it</td><td>-i와 -t를 동시에 사용한 것으로 터미널 입력을 위한 옵션</td></tr>
<tr><td>-link</td><td>컨테이너 연결 [컨테이너명:별칭]</td></tr>
</tbody></table>
<h4><a class="header" href="#example-ubuntu" id="example-ubuntu">Example: ubuntu</a></h4>
<pre><code class="language-bash">$ docker run --rm -it ubuntu:16.04 /bin/bash
$ cat /etc/issue
Ubuntu 16.04.2 LTS \n \l
$ ls
bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
$ exit
</code></pre>
<h4><a class="header" href="#example-tensorflow" id="example-tensorflow">Example: tensorflow</a></h4>
<pre><code class="language-bash">$ docker run -d -p 8888:8888 -p 6006:6006 teamlab/pydata-tensorflow:0.1
</code></pre>
<h3><a class="header" href="#4-basic-commands" id="4-basic-commands">4. Basic Commands</a></h3>
<h4><a class="header" href="#컨테이너-목록-확인-ps" id="컨테이너-목록-확인-ps">컨테이너 목록 확인: ps</a></h4>
<pre><code class="language-bash">$ docker ps # 실행중인 컨테이너 목록
$ docker ps -a # 종료된 컨테이너까지 포함된 목록
</code></pre>
<h4><a class="header" href="#컨테이너-중지-stop" id="컨테이너-중지-stop">컨테이너 중지: stop</a></h4>
<p>실행중인 컨테이너를 중지. <code>docker ps</code>로 컨테이너의 이름 또는 ID를 확인. ID는 앞부분만 입력해도 됨.</p>
<pre><code class="language-bash">$ docker stop CONTAINER1 CONTAINER2 [CONTAINER...]
</code></pre>
<h4><a class="header" href="#컨테이너-제거-rm" id="컨테이너-제거-rm">컨테이너 제거: rm</a></h4>
<p>종료된 컨테이너를 완전히 제거</p>
<pre><code class="language-bash">$ docker rm CONTAINER1 CONTAINER2 [CONTAINER...]
$ docker rm -v $(docker ps -a -q -f status=exited) # 중지된 컨테이너를 모두 삭제
</code></pre>
<h4><a class="header" href="#이미지-목록-확인-images" id="이미지-목록-확인-images">이미지 목록 확인: images</a></h4>
<pre><code class="language-bash">$ docker images
</code></pre>
<h4><a class="header" href="#이미지-다운로드-pull" id="이미지-다운로드-pull">이미지 다운로드: pull</a></h4>
<p>이미지를 최신 버전으로 다운로드</p>
<pre><code class="language-bash">$ docker pull IMAGE
</code></pre>
<h4><a class="header" href="#이미지-삭제-rmi" id="이미지-삭제-rmi">이미지 삭제: rmi</a></h4>
<p>사용하지 않는 이미지 용량을 차지하므로 지우는 것이 좋음. 실행중인 이미지는 삭제되지 않는다.</p>
<pre><code class="language-bash">$ docker rmi IMAGE [IMAGE...]
</code></pre>
<h4><a class="header" href="#컨테이너-로그-보기-logs" id="컨테이너-로그-보기-logs">컨테이너 로그 보기: logs</a></h4>
<pre><code class="language-bash">$ docker logs CONTAINER # 전체 로그 출력
$ docker logs --tail 10 CONTAINER # 마지막 10개의 로그 출력
$ docker logs -f CONTAINER # 실시간으로 확인
</code></pre>
<h4><a class="header" href="#컨테이너-명령어-실행-exec" id="컨테이너-명령어-실행-exec">컨테이너 명령어 실행: exec</a></h4>
<p>실행중인 컨테이너에 들어가거나 컨테이너의 파일을 실행할 때 사용</p>
<pre><code class="language-bash">$ docker run -d -it ubuntu:16.10 /bin/bash # 예: 우분투 실행
$ docker ps # 컨테이너 아이디 6adf
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
6adf34959e8e        ubuntu:16.10        &quot;/bin/bash&quot;         51 seconds ago      Up 50 seconds                           quirky_kowalevski
$ docker exec -it 6adf /bin/bash # 우분투 접속
</code></pre>
<h3><a class="header" href="#5-docker-compose" id="5-docker-compose">5. Docker Compose</a></h3>
<p>이미지 다운, 컨테이너 실행 등을 <code>docker-compose.yml</code> 이라는 파일을 통해 한번에 해결.</p>
<p>리눅스는 docker-compose를 설치해야 한다.</p>
<pre><code class="language-bash">$ curl -L &quot;https://github.com/docker/compose/releases/download/1.9.0/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose
$ chmod +x /usr/local/bin/docker-compose
</code></pre>
<h4><a class="header" href="#example-wordpress" id="example-wordpress">Example: wordpress</a></h4>
<p>디렉토리를 하나 만들고 그 안에 <code>docker-compose.yml</code>을 만든다</p>
<h6><a class="header" href="#docker-composeyml" id="docker-composeyml">docker-compose.yml</a></h6>
<pre><code class="language-yaml">version: '2'

services:
   db:
     image: mysql:5.7
     volumes:
       - db_data:/var/lib/mysql
     restart: always
     environment:
       MYSQL_ROOT_PASSWORD: wordpress
       MYSQL_DATABASE: wordpress
       MYSQL_USER: wordpress
       MYSQL_PASSWORD: wordpress

   wordpress:
     depends_on:
       - db
     image: wordpress:latest
     volumes:
       - wp_data:/var/www/html
     ports:
       - &quot;8000:80&quot;
     restart: always
     environment:
       WORDPRESS_DB_HOST: db:3306
       WORDPRESS_DB_PASSWORD: wordpress
volumes:
    db_data:
    wp_data:
</code></pre>
<p>그리고 </p>
<pre><code class="language-bash">$ docker-compose up
</code></pre>
<p>이라고 하면 실행 됨</p>
<h3><a class="header" href="#refer-to-2" id="refer-to-2">Refer to</a></h3>
<ul>
<li><a href="https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html">초보를 위한 도커 안내서</a> : 이 시리즈에서 많이 배웠다. 차근차근 잘 설명되어있다.</li>
</ul>
<h1><a class="header" href="#docker-cheatsheet" id="docker-cheatsheet">Docker Cheatsheet</a></h1>
<h4><a class="header" href="#get-the-list-of-all-images" id="get-the-list-of-all-images">Get the list of all images</a></h4>
<pre><code class="language-bash">$ docker images
</code></pre>
<h4><a class="header" href="#remove-single-images" id="remove-single-images">Remove single images</a></h4>
<pre><code class="language-bash">$ docker rmi IMAGE_NAME
</code></pre>
<p>You can use first three digits of Image ID instead of Image Name. For example, if Image ID is <code>7b66156f376c</code>,</p>
<pre><code class="language-bash">$ docker rmi 7b6
</code></pre>
<h4><a class="header" href="#stop-all-containers" id="stop-all-containers">Stop all containers</a></h4>
<pre><code class="language-bash">$ docker stop $(docker ps -a -q)
</code></pre>
<h4><a class="header" href="#remove-all-containers" id="remove-all-containers">Remove all containers</a></h4>
<pre><code class="language-bash">$ docker rm $(docker ps -a -q)
</code></pre>
<h4><a class="header" href="#remove-all-images" id="remove-all-images">Remove all images</a></h4>
<pre><code class="language-bash">$ docker rmi $(docker images -qf &quot;dangling=true&quot;)
</code></pre>
<h4><a class="header" href="#remove-all-images-except-some-images" id="remove-all-images-except-some-images">Remove all images except some images</a></h4>
<p>Remove all images except <code>ubuntu</code> and <code>my-image</code></p>
<pre><code class="language-bash">$ docker rmi $(docker images | grep -v 'ubuntu\|my-image' | awk {'print $3'})
</code></pre>
<h1><a class="header" href="#docker-for-jekyll" id="docker-for-jekyll">Docker for Jekyll</a></h1>
<h3><a class="header" href="#create-dockerfile" id="create-dockerfile">Create Dockerfile</a></h3>
<pre><code class="language-bash">$ touch Dockerfile
</code></pre>
<h4><a class="header" href="#dockerfile" id="dockerfile">Dockerfile</a></h4>
<pre><code>FROM ruby:latest
WORKDIR /root
RUN ruby -S gem install jekyll
EXPOSE 4000
</code></pre>
<h3><a class="header" href="#build-image" id="build-image">Build Image</a></h3>
<p>Insert <code>IMAGE_NAME</code> whatever you want.</p>
<pre><code class="language-bash">$ docker build -t IMAGE_NAME .
</code></pre>
<h3><a class="header" href="#create-new-jekyll-blog" id="create-new-jekyll-blog">Create new jekyll blog</a></h3>
<p><em>NOTE</em> - Skip this if you already has jekyll blog.</p>
<pre><code class="language-bash">$ docker run -it -v `pwd`:/root IMAGE_NAME ruby -S jekyll new . --force
</code></pre>
<h3><a class="header" href="#run-jekyll-server" id="run-jekyll-server">Run jekyll server</a></h3>
<pre><code class="language-bash">$ docker run -it -v $(pwd):/root -p 4000:4000 IMAGE_NAME \
	ruby -S jekyll serve --host=0.0.0.0 --watch --force_polling
</code></pre>
<ul>
<li>Run a interactive TTY from docker (<code>--it</code>)</li>
<li>Mounts current directory inside container at /root (<code>-v $(pwd):/root</code>)</li>
<li>Expose port 4000 from container to host (<code>-p 4000:4000</code>)</li>
<li>Uses <code>IMAGE_NAME</code> image to run container</li>
<li>Ups Jekyll server using <code>ruby -S jekyll serve</code></li>
<li>Sets Jekyll host to 0.0.0.0 (<code>--host=0.0.0.0</code>)</li>
<li>Forces Jekyll to watch modifications inside blog skeleton (<code>--watch</code>)</li>
<li>Forces Jekyll to polling periodically in order to detect changes (<code>--force_polling</code>)</li>
</ul>
<h2><a class="header" href="#refer-to-3" id="refer-to-3">Refer to</a></h2>
<p><a href="http://salizzar.net/2014/11/06/creating-a-github-jekyll-blog-using-docker/">Creating a GitHub Jekyll Blog using Docker</a></p>
<h1><a class="header" href="#gollum-via-docker" id="gollum-via-docker">Gollum via Docker</a></h1>
<h2><a class="header" href="#prerequisite-docker" id="prerequisite-docker">Prerequisite: Docker</a></h2>
<p>Docker가 깔려있지 않다면 Docker 를 설치한다.</p>
<ul>
<li><a href="https://docs.docker.com/docker-for-mac/">Docker for Mac</a></li>
<li><a href="https://docs.docker.com/docker-for-windows/">Docker for Windows</a></li>
</ul>
<p>또는</p>
<ul>
<li><a href="https://www.docker.com/products/docker-toolbox">Docker toolbox</a> 설치 후 <strong>Docker Quickstart Terminal</strong>를 실행</li>
</ul>
<h2><a class="header" href="#prerequisite-git" id="prerequisite-git">Prerequisite: Git</a></h2>
<p>설명이 필요없다..</p>
<h2><a class="header" href="#preparing-the-gollum-workspace" id="preparing-the-gollum-workspace">Preparing the Gollum Workspace</a></h2>
<pre><code class="language-bash">$ cd ~/YOUR_DIRECTORY
$ git init
</code></pre>
<h2><a class="header" href="#creating-the-dockerfile" id="creating-the-dockerfile">Creating the Dockerfile</a></h2>
<p><code>YOUR_DIRECTORY</code> 폴더 안에 <code>Dockerfile</code> 을 만들 것이다.</p>
<pre><code class="language-bash">$ touch Dockerfile
$ open Dockerfile
</code></pre>
<p>Dockerfile에 다음 내용을 복사-붙여넣기 한다.</p>
<pre><code>FROM ruby:latest
RUN apt-get -y update &amp;&amp; apt-get -y install libicu-dev
RUN gem install gollum
RUN gem install github-markdown org-ruby
VOLUME /wiki
WORKDIR /wiki
CMD [&quot;gollum&quot;, &quot;--port&quot;, &quot;80&quot;]
EXPOSE 80
</code></pre>
<p>이 파일은 Docker 에 다음 사항들을 알려준다.</p>
<ol>
<li><a href="https://hub.docker.com/_/ruby/">official Ruby repo on Docker Hub</a>의 이미지를 기준으로 함.</li>
<li>developer tools, gollum, dipendencies를 설치.</li>
<li>Docker container의 작업 디렉토리를 변경하고, container 안의 wiki 폴더에 external symlink 를 제공.</li>
<li>port 80에서 gollum engine을 자동으로 시작.</li>
<li>container의 port를 노출시켜 접속할 수 있도록 함.</li>
</ol>
<h2><a class="header" href="#building-the-docker-image" id="building-the-docker-image">Building the Docker image</a></h2>
<pre><code class="language-bash">$ docker build -t gollum .
</code></pre>
<p><em>주의</em> - 마지막의 . 을 빼먹지 않도록 한다.</p>
<h2><a class="header" href="#running-the-docker-container" id="running-the-docker-container">Running the Docker Container</a></h2>
<pre><code class="language-bash">$ docker run -v `pwd`:/wiki -p 4567:80 gollum
</code></pre>
<p><em>주의</em> - Windows의 경우 아래와 같이 실행한다.</p>
<pre><code class="language-bash">$ docker run -v /`pwd`:/wiki -p 4567:80 gollum
</code></pre>
<h2><a class="header" href="#accessing-the-gollum-gui" id="accessing-the-gollum-gui">Accessing the Gollum GUI</a></h2>
<p><a href="http://127.0.0.1:4567">http://127.0.0.1:4567</a>에 접속한다.</p>
<p>(Commit 한 문서만 보인다.)</p>
<h2><a class="header" href="#참고링크" id="참고링크">참고링크</a></h2>
<ul>
<li><a href="https://github.com/gollum/gollum/wiki/Gollum-via-Docker">Gollum via Docker</a></li>
<li><a href="https://docs.docker.com/engine/getstarted/step_four/">Build your own image - Docker Official Document</a></li>
<li><a href="http://nolboo.kim/blog/2016/08/02/docker-for-mac/">Docker for mac 훑어보기</a></li>
</ul>
<h1><a class="header" href="#newly-learned-words-or-phrases" id="newly-learned-words-or-phrases">Newly learned words or phrases</a></h1>
<ul>
<li><a href="https://www.ldoceonline.com/dictionary/crash-course">crash course</a>: a course in which you learn a lot about a particular subject in a very short period of time</li>
</ul>
<h1><a class="header" href="#git-cheet-sheet" id="git-cheet-sheet">Git Cheet Sheet</a></h1>
<h2><a class="header" href="#install-git" id="install-git">Install Git</a></h2>
<p><a href="https://desktop.github.com">Github Desktop</a></p>
<h2><a class="header" href="#configure-user" id="configure-user">Configure User</a></h2>
<pre><code class="language-bash">$ git config [--global] user.name [&quot;YOUR_NAME&quot;]
$ git config [--global] user.email [&quot;YOUR_EMAIL&quot;]
</code></pre>
<h2><a class="header" href="#create-repositories" id="create-repositories">Create Repositories</a></h2>
<pre><code class="language-bash">$ git init
$ git clone URL [LOCAL_REPO_NAME]
</code></pre>
<h2><a class="header" href="#make-changes" id="make-changes">Make Changes</a></h2>
<pre><code class="language-bash">$ git status
$ git diff
$ git add [FILE_NAME]
$ git commit -m &quot;COMMIT MESSAGE&quot;
</code></pre>
<h2><a class="header" href="#group-changes" id="group-changes">Group Changes</a></h2>
<pre><code class="language-bash">$ git branch
$ git branch [BRANCH_NAME]
$ git checkout [-b] [BRANCH_NAME]
$ git merge [BRANCH_NAME]
$ git branch -d [BRANCH_NAME] # delete local branch
</code></pre>
<h2><a class="header" href="#undoing-things" id="undoing-things">Undoing things</a></h2>
<h4><a class="header" href="#commit-again" id="commit-again">Commit again</a></h4>
<pre><code class="language-bash">$ git commit -m 'initial commit'
$ git add &lt;forgotten-file&gt;
$ git commit --amend
</code></pre>
<h4><a class="header" href="#unstage-a-staged-file" id="unstage-a-staged-file">Unstage a staged file</a></h4>
<pre><code class="language-bash">$ git reset HEAD &lt;file&gt;
</code></pre>
<h4><a class="header" href="#unmodify-a-modified-file" id="unmodify-a-modified-file">Unmodify a modified file</a></h4>
<p><em>NOTE</em> - This command could be dangerous.</p>
<pre><code class="language-bash">$ git checkout -- &lt;file&gt;
</code></pre>
<h2><a class="header" href="#synchronize-changes" id="synchronize-changes">Synchronize Changes</a></h2>
<pre><code class="language-bash">$ git fetch [BOOKMARK]
$ git merge [BOOKMARK]/[BRANCH]
$ git push [ALIAS] [BRANCH]
$ git pull
</code></pre>
<h2><a class="header" href="#remote-branch" id="remote-branch">Remote branch</a></h2>
<h3><a class="header" href="#show-remote-branches" id="show-remote-branches">Show remote branches</a></h3>
<pre><code class="language-bash">$ git branch -r
# or
$ git remote show origin
</code></pre>
<h3><a class="header" href="#push-local-branch-to-remote-branch" id="push-local-branch-to-remote-branch">Push local branch to remote branch</a></h3>
<pre><code class="language-bash">$ git push origin [REMOTE_BRANCH_NAME]
</code></pre>
<h3><a class="header" href="#pull-from-remote-branch" id="pull-from-remote-branch">Pull from remote branch</a></h3>
<pre><code class="language-bash">$ git checkout [REMOTE_BRANCH_NAME]
# or
$ git checkout -b [LOCAL_BRANCH_NAME] origin/[REMOTE_BRANCH_NAME]
# or
$ git checkout -t origin/[REMOTE_BRANCH_NAME]
</code></pre>
<h3><a class="header" href="#delete-remote-branch" id="delete-remote-branch">Delete remote branch</a></h3>
<pre><code class="language-bash">$ git push origin :[REMOTE_BRANCH_NAME]
</code></pre>
<h2><a class="header" href="#reset-the-resets" id="reset-the-resets">Reset the resets</a></h2>
<pre><code class="language-bash">$ git reflog
$ git reset --hare HEAH@{1}
</code></pre>
<hr />
<h2><a class="header" href="#refer-to-4" id="refer-to-4">Refer to</a></h2>
<p><a href="https://services.github.com/kit/downloads/github-git-cheat-sheet.pdf">Git Cheat Sheet - Official</a>
<a href="https://git-scm.com/book/en/v2">Git-scm Book</a>
<a href="http://learngitbranching.js.org">Learn Git Branching</a></p>
<h1><a class="header" href="#steps-after-fork" id="steps-after-fork">Steps after Fork</a></h1>
<pre><code class="language-bash">$ git remote add --track master upstream git://github.com/upstreamname/projectname.git # original repo
$ git fetch upstream
$ git merge upstream/master
</code></pre>
<h3><a class="header" href="#refer-to-5" id="refer-to-5">Refer to</a></h3>
<p><a href="http://dogfeet.github.io/articles/2012/how-to-github.html">http://dogfeet.github.io/articles/2012/how-to-github.html</a></p>
<h1><a class="header" href="#adding-disqus-to-jekyll" id="adding-disqus-to-jekyll">Adding Disqus to Jekyll</a></h1>
<h2><a class="header" href="#prerequisite" id="prerequisite">Prerequisite</a></h2>
<ol>
<li>Resister website to <a href="https://disqus.com">Disqus</a>.</li>
<li>Create a new Disqus site. For example, shortname.disqus.com.</li>
</ol>
<h2><a class="header" href="#install" id="install">Install</a></h2>
<p>Between a <code>{% if page.comments %}</code> and a <code>{% endif %}</code> tag, add the <a href="https://disqus.com/admin/universalcode/">Universal Embed Code</a> in the appropriate template where you want.</p>
<pre><code>{% if page.comments %}
&lt;div id=&quot;disqus_thread&quot;&gt;&lt;/div&gt;
&lt;script&gt;

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables */
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//{{ site.disqus.id }}.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
&lt;/script&gt;
&lt;noscript&gt;Please enable JavaScript to view the &lt;a href=&quot;https://disqus.com/?ref_noscript&quot;&gt;comments powered by Disqus.&lt;/a&gt;&lt;/noscript&gt;
{% endif %}

</code></pre>
<p>Add Disqus Id to <code>_config.yml</code></p>
<pre><code class="language-yml">disqus:
  id: &quot;YOUR_DISQUS_ID&quot;
</code></pre>
<p>Add <code>comments</code> variable to the YAML frontmatter and set <code>true</code>. Comments can be disabled per-page by setting <code>comments: false</code> or by not including the comments option at all.</p>
<pre><code class="language-md">---
layout: default
comments: true
# other options
---
</code></pre>
<h1><a class="header" href="#jekyll-with-google-analytics" id="jekyll-with-google-analytics">Jekyll with Google Analytics</a></h1>
<h2><a class="header" href="#prerequisite-1" id="prerequisite-1">Prerequisite</a></h2>
<p>Sign in to <a href="https://www.google.com/analytics/">Google Analytics</a>, get Google Analytics ID.</p>
<h2><a class="header" href="#usage" id="usage">Usage</a></h2>
<p>Insert below script in the <code>&lt;head&gt;</code> tag.</p>
<pre><code class="language-html">&lt;!-- Google Analytics --&gt;
{% if site.google-analytics %}
&lt;script&gt;
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', '{{ site.google-analytics.id }}', 'auto');
ga('send', 'pageview');

&lt;/script&gt;
{% endif %}
</code></pre>
<p>Insert below script in the <code>_config.yml</code> file.</p>
<pre><code class="language-yml">google-analytics:
  id: &quot;YOUR_GOOGLE_ANALYTICS_ID&quot;

</code></pre>
<h1><a class="header" href="#ml-study-notes" id="ml-study-notes">ML study notes</a></h1>
<h2><a class="header" href="#모두를-위한-머신러닝딥러닝-강의" id="모두를-위한-머신러닝딥러닝-강의">모두를 위한 머신러닝/딥러닝 강의</a></h2>
<ul>
<li><a href="http://hunkim.github.io/ml/">Lecture</a></li>
<li><a href="https://github.com/AWEEKJ/ML-study">Code</a></li>
</ul>
<h3><a class="header" href="#a-hrefhttphunkimgithubiomllec1pdflecture-1-machine-learning-basicsa" id="a-hrefhttphunkimgithubiomllec1pdflecture-1-machine-learning-basicsa"><a href="http://hunkim.github.io/ml/lec1.pdf">Lecture 1: Machine Learning Basics</a></a></h3>
<ul>
<li>What is ML?</li>
<li>What is learning?
<ul>
<li>supervised</li>
<li>unsupervised</li>
</ul>
</li>
<li>What is regression?</li>
<li>What is classification?</li>
</ul>
<h4><a class="header" href="#machine-learning" id="machine-learning">Machine Learning</a></h4>
<ul>
<li>explicit programming(ex. a일 때는 b를 하라) 의 한계</li>
<li>ML: &quot;Field of study that gives computers the ability to learn without being explicitly programmed&quot; by Arthur Samuel</li>
</ul>
<h4><a class="header" href="#supervisedunsupervised-learning" id="supervisedunsupervised-learning">Supervised/Unsupervised learning</a></h4>
<ul>
<li>Supervised learning:
<ul>
<li>레이블이 정해져 있는 데이터(training set)으로 학습</li>
</ul>
</li>
<li>Unsupervised learning:
<ul>
<li>un-labeled data</li>
<li>ex. 구글 뉴스 그룹핑, 단어의 분류 Word clustering</li>
</ul>
</li>
</ul>
<h4><a class="header" href="#supervised-learning" id="supervised-learning">Supervised Learning</a></h4>
<ul>
<li>Most common problem type in ML</li>
<li>이미 트레이닝 셋이 있음, 새로운 셋을 트레이닝 데이타 셋을 기반으로 분류</li>
</ul>
<h4><a class="header" href="#types-of-supervised-learning" id="types-of-supervised-learning">Types of supervised learning</a></h4>
<ol>
<li>Predicting final exam score based on time spent =&gt; <strong>regression</strong></li>
<li>Pass/non-pass based on time spent =&gt; <strong>binary classification</strong></li>
<li>Letter grade (A, B, C, D and F) based on time spent =&gt; <strong>multi-label classification</strong></li>
</ol>
<h3><a class="header" href="#a-hrefhttphunkimgithubiomllec2pdflecture-2-linear-regressiona" id="a-hrefhttphunkimgithubiomllec2pdflecture-2-linear-regressiona"><a href="http://hunkim.github.io/ml/lec2.pdf">Lecture 2: Linear Regression</a></a></h3>
<ul>
<li>이미 존재하는 데이터(training data set)로 Regression model을 학습시킴(training)</li>
<li>세상의 많은 현상들이 리니어한 모델로 설명할 수 있다! </li>
<li>(Linear) Hypothesis: H(x) = Wx+b</li>
<li>Which hypothesis is better? =&gt; Cost Function(Loss Function)</li>
<li>cost(W, b) = average of (H(x)-y)^2</li>
<li>Goal: Minimize cost(W, b)</li>
</ul>
<h3><a class="header" href="#a-hrefhttphunkimgithubiomllec3pdflecture-3-how-to-minimize-costa" id="a-hrefhttphunkimgithubiomllec3pdflecture-3-how-to-minimize-costa"><a href="http://hunkim.github.io/ml/lec3.pdf">Lecture 3: How to minimize cost</a></a></h3>
<h4><a class="header" href="#simplified-hypothesis" id="simplified-hypothesis">Simplified Hypothesis</a></h4>
<h4><a class="header" href="#gradient-descent-algorithm" id="gradient-descent-algorithm">Gradient descent algorithm</a></h4>
<ul>
<li>경사를 따라 내려가는 알고리즘</li>
<li>Minimize cost function</li>
<li>Gradient descent is used many minimization problems</li>
<li>For a given cost function, cost(W, b), it will find W, b to minimize cost</li>
<li>It can be applied to more general function: cost(W1, W2, ...)</li>
</ul>
<h4><a class="header" href="#how-it-works-how-would-you-find-thd-lowest-point" id="how-it-works-how-would-you-find-thd-lowest-point">How it works? How would you find thd lowest point?</a></h4>
<ul>
<li>Start with initial guesses
<ul>
<li>Start at (0,0) (or any other value) <em>아무 점에서 시작한다.</em></li>
<li>Keeping changing W and b a little bit to try and reduce cost(W, b) </li>
</ul>
</li>
<li>Each time you change the parameters, you select the gradient which reduces cost(W, b) the most possible</li>
<li>Repeat</li>
<li>Do so until you converge to a local minimum</li>
<li>Has an interesting property
<ul>
<li>Where you start can determine which minimum you end up</li>
</ul>
</li>
<li>기울기는 미분해서 구한다. 기울기 &lt; 0 이면 W를 크게, 기울기 &gt; 0 이면 W를 작게 만든다.</li>
<li>cost(W, b)를 설계할 때 그 모양이 Convex function인지를 확인하라.</li>
<li>Convex function: 밥그릇 모양. Gradient descent algorithm을 사용할 때, 초기값으로 무엇을 주더라도 같은 결과가 나온다.</li>
</ul>
<h3><a class="header" href="#a-hrefhttphunkimgithubiomllec4pdflecture-4-multi-variable-linear-regressiona" id="a-hrefhttphunkimgithubiomllec4pdflecture-4-multi-variable-linear-regressiona"><a href="http://hunkim.github.io/ml/lec4.pdf">Lecture 4: Multi-variable linear regression</a></a></h3>
<h4><a class="header" href="#multi-variablefeature" id="multi-variablefeature">Multi-variable/feature</a></h4>
<ul>
<li>represent as matrix</li>
<li>H(X) = W* X</li>
<li>H(X) = W transpose * X</li>
</ul>
<h3><a class="header" href="#a-hrefhttphunkimgithubiomllec5pdflecture-5-1-logistic-regression-classificationa" id="a-hrefhttphunkimgithubiomllec5pdflecture-5-1-logistic-regression-classificationa"><a href="http://hunkim.github.io/ml/lec5.pdf">Lecture 5-1: Logistic (regression) classification</a></a></h3>
<h4><a class="header" href="#binary-classification-application" id="binary-classification-application">(Binary) Classification Application</a></h4>
<ul>
<li>Spam Detection: Spam(1) or Ham(0)</li>
<li>Facebook feed: show(1) or hide(0)</li>
<li>Credit Card Fraudulent Transaction detection: legitimate(0) / fraud(1)</li>
</ul>
<h4><a class="header" href="#example-model-pass1fail0-based-on-study-hours" id="example-model-pass1fail0-based-on-study-hours">Example Model: Pass(1)/Fail(0) based on study hours</a></h4>
<ul>
<li>Linear Regression?</li>
<li>We know Y is 0 or 1</li>
<li>Hypothesis can give values large than 1 or less than 0</li>
<li>=&gt; Use Sigmate Fuction!</li>
</ul>
<h4><a class="header" href="#sigmoid-function" id="sigmoid-function">Sigmoid Function</a></h4>
<ul>
<li>Curved in two directions, like the letter &quot;S&quot;</li>
</ul>
<h3><a class="header" href="#a-hrefhttphunkimgithubiomllec5pdflecture-5-2-logistic-regression-classification---cost-function--gradient-decenta" id="a-hrefhttphunkimgithubiomllec5pdflecture-5-2-logistic-regression-classification---cost-function--gradient-decenta"><a href="http://hunkim.github.io/ml/lec5.pdf">Lecture 5-2: Logistic (regression) classification - cost function &amp; gradient decent</a></a></h3>
<ul>
<li>어디서 시작하느냐에 따라서 최저점이 달라질 수 있다 -&gt; Local Minimum</li>
<li>Global Minimum을 찾아야 한다!</li>
</ul>
<h4><a class="header" href="#new-cost-function-for-logistic" id="new-cost-function-for-logistic">New cost function for logistic!</a></h4>
<h3><a class="header" href="#a-hrefhttphunkimgithubiomllec6pdflecture-6-1-softax-classification---multinomial-classificationa" id="a-hrefhttphunkimgithubiomllec6pdflecture-6-1-softax-classification---multinomial-classificationa"><a href="http://hunkim.github.io/ml/lec6.pdf">Lecture 6-1: Softax classification - Multinomial classification</a></a></h3>
<h3><a class="header" href="#a-hrefhttphunkimgithubiomllec6pdflecture-6-2-softmax-classification---cross-entry-cost-function--gradient-decenta" id="a-hrefhttphunkimgithubiomllec6pdflecture-6-2-softmax-classification---cross-entry-cost-function--gradient-decenta"><a href="http://hunkim.github.io/ml/lec6.pdf">Lecture 6-2: Softmax classification - Cross entry cost function &amp; gradient decent</a></a></h3>
<ul>
<li>Cross entropy cost function</li>
<li>Logistic cost vs cross entropy</li>
</ul>
<h3><a class="header" href="#a-hrefhttphunkimgithubiomllec7pdflecture-7-1-application--tips---learning-rate-data-preprocessing-overfittinga" id="a-hrefhttphunkimgithubiomllec7pdflecture-7-1-application--tips---learning-rate-data-preprocessing-overfittinga"><a href="http://hunkim.github.io/ml/lec7.pdf">Lecture 7-1: Application &amp; Tips - Learning rate, data preprocessing, overfitting</a></a></h3>
<h4><a class="header" href="#learning-rate" id="learning-rate">Learning Rate</a></h4>
<ul>
<li>Large learning rate: overshooting</li>
<li>Small learning rate: takes too long, stops at local minimum</li>
<li>Try several learning rates
<ul>
<li>Observe the cost function</li>
<li>Check it goes down in a reasonable rate</li>
</ul>
</li>
</ul>
<h4><a class="header" href="#date-preprocessing-for-gradient-descent" id="date-preprocessing-for-gradient-descent">Date preprocessing for gradient descent</a></h4>
<ul>
<li>Original data -&gt; Zero-centered data -&gt; Normalized data</li>
</ul>
<h4><a class="header" href="#overfitting" id="overfitting">Overfitting</a></h4>
<ul>
<li>학습 데이터에 너무 잘 맞는(overfitting) 모델. 실제 데이터나 테스트 데이터를 적용하면 잘 안맞는 경우가 발생.</li>
<li>Solutions for overfitting
<ul>
<li>More training data</li>
<li>Reduce the number of features</li>
<li>Regularization</li>
</ul>
</li>
</ul>
<h5><a class="header" href="#regularization" id="regularization">Regularization</a></h5>
<ul>
<li>Let's not have too big numbers in the weight</li>
</ul>
<h3><a class="header" href="#a-hrefhttphunkimgithubiomllec7pdflecture-7-2-application--tips---learning-and-test-data-setsa" id="a-hrefhttphunkimgithubiomllec7pdflecture-7-2-application--tips---learning-and-test-data-setsa"><a href="http://hunkim.github.io/ml/lec7.pdf">Lecture 7-2: Application &amp; Tips - Learning and test data sets</a></a></h3>
<ul>
<li>Training sets -&gt; Validation sets -&gt; Test sets</li>
<li>Online learning</li>
</ul>
<h4><a class="header" href="#accuracy" id="accuracy">Accuracy</a></h4>
<ul>
<li>How many of your predictions are correct?</li>
<li>95~99%</li>
</ul>
<h1><a class="header" href="#a-hrefhttpwwwgilbutcokrbookbookviewaspxbookcodebn001430파이썬-코딩의-기술a" id="a-hrefhttpwwwgilbutcokrbookbookviewaspxbookcodebn001430파이썬-코딩의-기술a"><a href="http://www.gilbut.co.kr/book/bookView.aspx?bookcode=BN001430">파이썬 코딩의 기술</a></a></h1>
<h2><a class="header" href="#1장-파이썬-다운-생각" id="1장-파이썬-다운-생각">1장 파이썬 다운 생각</a></h2>
<h3><a class="header" href="#10-range-보다는-enumerate를-사용하자" id="10-range-보다는-enumerate를-사용하자">10. range 보다는 enumerate를 사용하자</a></h3>
<h3><a class="header" href="#12-for와-while-루프-뒤에는-else-블록을-쓰지-말자" id="12-for와-while-루프-뒤에는-else-블록을-쓰지-말자">12. for와 while 루프 뒤에는 else 블록을 쓰지 말자</a></h3>
<p>루프가 종료되자마자 else 블록이 실행되고, 루프에서 break 문을 사용해야 else 블록을 건너뛸 수 있다. 이는 직관적이지 않아서 혼동하기 쉬우므로 사용하지 말 것. 대신 헬퍼 함수를 사용하자.</p>
<h2><a class="header" href="#2장-함수" id="2장-함수">2장 함수</a></h2>
<h2><a class="header" href="#3장-클래스와-상속" id="3장-클래스와-상속">3장 클래스와 상속</a></h2>
<h2><a class="header" href="#4장-메타클래스와-속성" id="4장-메타클래스와-속성">4장 메타클래스와 속성</a></h2>
<h2><a class="header" href="#5장-병행성과-병렬성" id="5장-병행성과-병렬성">5장 병행성과 병렬성</a></h2>
<h2><a class="header" href="#6장-내장-모듈" id="6장-내장-모듈">6장 내장 모듈</a></h2>
<h3><a class="header" href="#45-지역-시간은-time이-아닌-datetime으로-표현하자" id="45-지역-시간은-time이-아닌-datetime으로-표현하자">45. 지역 시간은 time이 아닌 datetime으로 표현하자</a></h3>
<ul>
<li>time 모듈은 UTC를 호스트 컴퓨터의 Local Time으로 변환할 때만 유용하다. </li>
<li>datetime 모듈은 어떤 Local Time을 다른 Local Time으로 변환할 때 유용하다. datetime 모듈을 사용할 때는 <a href="https://pypi.python.org/pypi/pytz/">pytz</a>를 함께 사용하자.</li>
<li>pytz를 사용할 때는, Local Time을 UTC로 먼저 변경하여 datetime 연산을 수행한 다음, 시간을 표시하기 전에 마지막 단계로 UTC를 Local Time으로 변환할 것.</li>
</ul>
<h3><a class="header" href="#46-내장-알고리즘과-자료-구조를-사용하자" id="46-내장-알고리즘과-자료-구조를-사용하자">46. 내장 알고리즘과 자료 구조를 사용하자</a></h3>
<p><strong><a href="https://docs.python.org/3/library/collections.html?highlight=defaultdict#deque-objects">더블 엔디드 큐(deque)</a></strong></p>
<p><strong><a href="https://docs.python.org/3/library/collections.html?highlight=ordereddict#ordereddict-objects">정렬된 딕셔너리(OrderedDict)</a></strong></p>
<p><strong><a href="https://docs.python.org/3/library/collections.html?highlight=defaultdict#collections.defaultdict">기본 딕셔너리(defaultdict)</a></strong></p>
<p><strong><a href="https://docs.python.org/3/library/heapq.html?highlight=heapq#module-heapq">힙 큐(heapq)</a></strong></p>
<p><strong><a href="https://docs.python.org/3/library/collections.html?highlight=defaultdict#defaultdict-objects">바이섹션(bisect)</a></strong></p>
<p><strong><a href="https://docs.python.org/3/library/itertools.html?highlight=itertools#module-itertools">이터레이터 도구(itertools)</a></strong></p>
<h3><a class="header" href="#47-정밀도가-중요할-때에는-decimal을-사용하자" id="47-정밀도가-중요할-때에는-decimal을-사용하자">47. 정밀도가 중요할 때에는 decimal을 사용하자</a></h3>
<p>Decimal 클래스는</p>
<ul>
<li>화폐 연산처럼 정밀도가 높고 정확한 반올림이 필요한 상황에 안성맞춤.</li>
<li>기본적으로 소수점이 28자리인 고정 소수점 연산을 제공, 필요하면 자릿수를 더 늘릴 수 있음.</li>
<li>IEEE 754 부동 소수점 수의 정확도 문제를 피해갈 수 있음.</li>
<li>반올림 연산을 더 세밀하게 제어할 수 있음.</li>
</ul>
<h2><a class="header" href="#7장-협력" id="7장-협력">7장 협력</a></h2>
<h2><a class="header" href="#8장-제품화" id="8장-제품화">8장 제품화</a></h2>
<hr />
<h2><a class="header" href="#참고-링크" id="참고-링크">참고 링크</a></h2>
<ul>
<li><a href="https://github.com/gilbutITbook/006764">예제소스</a></li>
</ul>
<h1><a class="header" href="#python-references" id="python-references">Python References</a></h1>
<h2><a class="header" href="#2-built-in-functions" id="2-built-in-functions">2. Built-in Functions</a></h2>
<h5><a class="header" href="#a-hrefhttpsdocspythonorg36libraryfunctionshtmlhighlightprintprintprintaobjects-sep--endn-filesysstdout-flushfalsex" id="a-hrefhttpsdocspythonorg36libraryfunctionshtmlhighlightprintprintprintaobjects-sep--endn-filesysstdout-flushfalsex"><a href="https://docs.python.org/3.6/library/functions.html?highlight=print#print"><code>print</code></a>(*<em>objects</em>, <em>sep=' '</em>, <em>end='\n'</em>, <em>file=sys.stdout</em>, <em>flush=False</em>)x</a></h5>
<pre><code class="language-python">&gt;&gt;&gt; for x in range(1, 5):
...     print(x, end='')
12345
</code></pre>
<h2><a class="header" href="#4-built-in-types" id="4-built-in-types">4. Built-in Types</a></h2>
<h3><a class="header" href="#46-sequence-types--a-hrefhttpsdocspythonorg3librarystdtypeshtmlhighlightlistlistlista-a-hrefhttpsdocspythonorg3librarystdtypeshtmlhighlightlisttupletuplea-a-hrefhttpsdocspythonorg3librarystdtypeshtmlhighlightlistrangerangea" id="46-sequence-types--a-hrefhttpsdocspythonorg3librarystdtypeshtmlhighlightlistlistlista-a-hrefhttpsdocspythonorg3librarystdtypeshtmlhighlightlisttupletuplea-a-hrefhttpsdocspythonorg3librarystdtypeshtmlhighlightlistrangerangea">4.6. Sequence Types — <a href="https://docs.python.org/3/library/stdtypes.html?highlight=list#list"><code>list</code></a>, <a href="https://docs.python.org/3/library/stdtypes.html?highlight=list#tuple"><code>tuple</code></a>, <a href="https://docs.python.org/3/library/stdtypes.html?highlight=list#range"><code>range</code></a></a></h3>
<h4><a class="header" href="#461-common-sequence-operations" id="461-common-sequence-operations">4.6.1. Common Sequence Operations</a></h4>
<h5><a class="header" href="#sijk" id="sijk">s[i:j:k]</a></h5>
<p>slice of <em>s</em> from <em>i</em> to <em>j</em> with step <em>k</em></p>
<h3><a class="header" href="#47-text-sequence-type--a-hrefhttpsdocspythonorg36librarystdtypeshtmlstrstra" id="47-text-sequence-type--a-hrefhttpsdocspythonorg36librarystdtypeshtmlstrstra">4.7. Text Sequence Type — <a href="https://docs.python.org/3.6/library/stdtypes.html#str"><code>str</code></a></a></h3>
<h4><a class="header" href="#471-string-methods" id="471-string-methods">4.7.1. String Methods</a></h4>
<h5><a class="header" href="#a-hrefhttpsdocspythonorg36librarystdtypeshtmlhighlightdictstrcenterstrcentera" id="a-hrefhttpsdocspythonorg36librarystdtypeshtmlhighlightdictstrcenterstrcentera"><a href="https://docs.python.org/3.6/library/stdtypes.html?highlight=dict#str.center"><code>str.center</code></a></a></h5>
<blockquote>
<p>문자열을 주어진 길이 안에서 가운데 정렬</p>
</blockquote>
<pre><code class="language-python">&gt;&gt;&gt; print(&quot;center&quot;.center(16))
     center     
&gt;&gt;&gt; print(&quot;center&quot;.center(16, '-'))
-----center-----
</code></pre>
<h5><a class="header" href="#a-hrefhttpsdocspythonorg36librarystdtypeshtmlhighlightdictstrljuststrljusta" id="a-hrefhttpsdocspythonorg36librarystdtypeshtmlhighlightdictstrljuststrljusta"><a href="https://docs.python.org/3.6/library/stdtypes.html?highlight=dict#str.ljust"><code>str.ljust</code></a></a></h5>
<blockquote>
<p>문자열을 주어진 길이 안에서 왼쪽 정렬</p>
</blockquote>
<pre><code class="language-python">&gt;&gt;&gt; print(&quot;left&quot;.ljust(16))
left            
&gt;&gt;&gt; print(&quot;left&quot;.ljust(16, '-'))
left------------
</code></pre>
<h5><a class="header" href="#a-hrefhttpsdocspythonorg36librarystdtypeshtmlhighlightdictstrrjuststrrjusta" id="a-hrefhttpsdocspythonorg36librarystdtypeshtmlhighlightdictstrrjuststrrjusta"><a href="https://docs.python.org/3.6/library/stdtypes.html?highlight=dict#str.rjust"><code>str.rjust</code></a></a></h5>
<blockquote>
<p>문자열을 주어진 길이 안에서 오른쪽 정렬</p>
</blockquote>
<pre><code class="language-python">&gt;&gt;&gt; print(&quot;right&quot;.rjust(16))
           right
&gt;&gt;&gt; print(&quot;right&quot;.rjust(16, '-'))
-----------right
</code></pre>
<h5><a class="header" href="#a-hrefhttpsdocspythonorg36librarystdtypeshtmlstrjoinstrjoina" id="a-hrefhttpsdocspythonorg36librarystdtypeshtmlstrjoinstrjoina"><a href="https://docs.python.org/3.6/library/stdtypes.html#str.join"><code>str.join</code></a></a></h5>
<blockquote>
<p>리스트를 문자열로 변환</p>
</blockquote>
<pre><code class="language-python">&gt;&gt;&gt; list = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;]
&gt;&gt;&gt; print(&quot;&quot;.join(list))
abc345
&gt;&gt;&gt; print(&quot;\n&quot;.join(list))
a
b
c
3
4
5
</code></pre>
<h5><a class="header" href="#a-hrefhttpsdocspythonorg36librarystdtypeshtmlstrsplitstrsplita" id="a-hrefhttpsdocspythonorg36librarystdtypeshtmlstrsplitstrsplita"><a href="https://docs.python.org/3.6/library/stdtypes.html#str.split"><code>str.split</code></a></a></h5>
<blockquote>
<p>문자열을 리스트로 변환</p>
</blockquote>
<pre><code class="language-python">&gt;&gt;&gt; s = '1,2,3'
&gt;&gt;&gt; s.split(',')
['1', '2', '3']
&gt;&gt;&gt; s.split(',', maxsplit=1)
['1', '2,3']

&gt;&gt;&gt; s = '1,2,,3'
&gt;&gt;&gt; s.split(',')
['1', '2', '', '3']
</code></pre>
<h3><a class="header" href="#410-mapping-types--a-hrefhttpsdocspythonorg36librarystdtypeshtmlhighlightdictdictdicta" id="410-mapping-types--a-hrefhttpsdocspythonorg36librarystdtypeshtmlhighlightdictdictdicta">4.10. Mapping Types — <a href="https://docs.python.org/3.6/library/stdtypes.html?highlight=dict#dict"><code>dict</code></a></a></h3>
<h4><a class="header" href="#dkey-vs-getkey-default" id="dkey-vs-getkey-default"><code>d[key]</code> vs <code>get(key[, default])</code></a></h4>
<blockquote>
<p>딕셔너리에서 키 값에 해당하는 값을 가지고 올 때 두 방법의 차이점</p>
</blockquote>
<p><code>d[key]</code> Return the item of d with key <em>key</em>. <strong>Raises a KeyError</strong> if <em>key</em> is not in the map. </p>
<p><code>get(key[, default])</code> Return the value for <em>key</em> if <em>key</em> is in the dictionary, else <em>default</em>. If <em>default</em> is not given, it defaults to <code>None</code>, so that this method <strong>never raises a KeyError</strong>.</p>
<h2><a class="header" href="#6-expressions" id="6-expressions">6. Expressions</a></h2>
<h3><a class="header" href="#63-primaries" id="63-primaries">6.3. Primaries</a></h3>
<h4><a class="header" href="#634-a-hrefhttpsdocspythonorg3referenceexpressionshtmlcallscallsa" id="634-a-hrefhttpsdocspythonorg3referenceexpressionshtmlcallscallsa">6.3.4 <a href="https://docs.python.org/3/reference/expressions.html#calls">Calls</a></a></h4>
<p><code>function(*[arg1, arg2, arg3])</code> is same as <code>function(arg1, arg2, arg3)</code></p>
<pre><code class="language-python">&gt;&gt;&gt; arr = [2, 3, 4, 1]
&gt;&gt;&gt; print(*(int(x) for x in arr[::-1]))
1 4 3 2
</code></pre>
<h2><a class="header" href="#19-internet-data-handling" id="19-internet-data-handling">19. Internet Data Handling</a></h2>
<h3><a class="header" href="#192-a-hrefhttpsdocspythonorg3libraryjsonhtmlhighlightjsonmodule-jsonjsona---json-encoder-and-decoder" id="192-a-hrefhttpsdocspythonorg3libraryjsonhtmlhighlightjsonmodule-jsonjsona---json-encoder-and-decoder">19.2. <a href="https://docs.python.org/3/library/json.html?highlight=json#module-json"><code>json</code></a> - JSON encoder and decoder</a></h3>
<h4><a class="header" href="#1921-basic-usage" id="1921-basic-usage">19.2.1. Basic Usage</a></h4>
<h5><a class="header" href="#a-hrefhttpsdocspythonorg3libraryjsonhtmlhighlightjsonjsondumpsjsondumpsa" id="a-hrefhttpsdocspythonorg3libraryjsonhtmlhighlightjsonjsondumpsjsondumpsa"><a href="https://docs.python.org/3/library/json.html?highlight=json#json.dumps"><code>json.dumps</code></a></a></h5>
<blockquote>
<p>Python Object (Dictionary, List, Tuple 등) 를 JSON 형식으로 인코딩</p>
</blockquote>
<ul>
<li><code>ensure_ascii=False</code> - 한글 인코딩 문제 해결</li>
<li><code>indent=4</code> - indent 설정</li>
<li><code>sort_keys=True</code> - key 값을 알파벳 순으로 정렬</li>
</ul>
<pre><code class="language-python">&gt;&gt;&gt; import json
&gt;&gt;&gt; customer = {'id': 346725, 'name': 'Jamie', 'history': [{'date': '2017-02-19', 'item': 'coffee'}, {'date': '2017-02-20', 'item': 'tea'}]}
&gt;&gt;&gt; print(json.dumps(customer))
{&quot;name&quot;: &quot;Jamie&quot;, &quot;id&quot;: 346725, &quot;history&quot;: [{&quot;item&quot;: &quot;coffee&quot;, &quot;date&quot;: &quot;2017-02-19&quot;}, {&quot;item&quot;: &quot;tea&quot;, &quot;date&quot;: &quot;2017-02-20&quot;}]}
&gt;&gt;&gt; print(json.dumps(customer, ensure_ascii=False, indent=4, sort_keys=True))
{
    &quot;history&quot;: [
        {
            &quot;date&quot;: &quot;2017-02-19&quot;,
            &quot;item&quot;: &quot;coffee&quot;
        },
        {
            &quot;date&quot;: &quot;2017-02-20&quot;,
            &quot;item&quot;: &quot;tea&quot;
        }
    ],
    &quot;id&quot;: 346725,
    &quot;name&quot;: &quot;Jamie&quot;
}
</code></pre>
<h5><a class="header" href="#a-hrefhttpsdocspythonorg3libraryjsonhtmlhighlightjsonjsondumpjsondumpa" id="a-hrefhttpsdocspythonorg3libraryjsonhtmlhighlightjsonjsondumpjsondumpa"><a href="https://docs.python.org/3/library/json.html?highlight=json#json.dump"><code>json.dump</code></a></a></h5>
<blockquote>
<p>Python Object (Dictionary, List, Tuple 등) 를 JSON 형식으로 인코딩 후 파일 저장</p>
</blockquote>
<pre><code class="language-python">&gt;&gt;&gt; with open(&quot;file.json&quot;, 'w') as f:
...     json.dump(customer, f, indent=4)
</code></pre>
<h5><a class="header" href="#a-hrefhttpsdocspythonorg3libraryjsonhtmlhighlightjsonjsonloadjsonloada" id="a-hrefhttpsdocspythonorg3libraryjsonhtmlhighlightjsonjsonloadjsonloada"><a href="https://docs.python.org/3/library/json.html?highlight=json#json.load"><code>json.load</code></a></a></h5>
<blockquote>
<p>JSON 파일을 Python Object로 디코딩</p>
</blockquote>
<pre><code class="language-python">&gt;&gt;&gt; with open(&quot;file.json&quot;) as f:
...     data = json.load(f)
&gt;&gt;&gt; data
{'name': 'Jamie', 'id': 346725, 'history': [{'item': 'coffee', 'date': '2017-02-19'}, {'item': 'tea', 'date': '2017-02-20'}]}
</code></pre>
<h2><a class="header" href="#21-internet-protocols-and-support" id="21-internet-protocols-and-support">21. Internet Protocols and Support</a></h2>
<h3><a class="header" href="#2122-a-hrefhttpsdocspythonorg36libraryhttpserverhtmlhighlighthttpservermodule-httpserverhttpservera" id="2122-a-hrefhttpsdocspythonorg36libraryhttpserverhtmlhighlighthttpservermodule-httpserverhttpservera">21.22. <a href="https://docs.python.org/3.6/library/http.server.html?highlight=http.server#module-http.server">http.server</a></a></h3>
<h4><a class="header" href="#a-hrefhttpsdocspythonorg36libraryhttpserverhtmlhighlighthttpserverhttpserversimplehttprequesthandlerhttpserversimplehttprequesthandlera" id="a-hrefhttpsdocspythonorg36libraryhttpserverhtmlhighlighthttpserverhttpserversimplehttprequesthandlerhttpserversimplehttprequesthandlera"><a href="https://docs.python.org/3.6/library/http.server.html?highlight=http.server#http.server.SimpleHTTPRequestHandler"><code>http.server.SimpleHTTPRequestHandler</code></a></a></h4>
<blockquote>
<p>원하는 경로에서 이 명령어를 실행시키면 웹서버로 제공된다.</p>
</blockquote>
<pre><code class="language-bash">$ python3 -m http.server 8000
</code></pre>
<ul>
<li><a href="python/python-react-setup.html#Step-1:-Create-your-Django-Project">Step 1: Create your Django project</a></li>
<li><a href="python/python-react-setup.html#Step-2:-Add-non-reactJS-views">Step 2: Add non-reactJS views</a></li>
<li><a href="python/python-react-setup.html#Refer-to">Refer to</a></li>
</ul>
<h2><a class="header" href="#step-1-create-your-django-project" id="step-1-create-your-django-project">Step 1: Create your Django project</a></h2>
<h3><a class="header" href="#install-django" id="install-django">Install Django</a></h3>
<pre><code class="language-bash">$ mkdir django-reactjs-boilerplate &amp;&amp; cd django-reactjs-boilerplate
$ python3 -m venv env
$ source env/bin/activate
$ pip install --upgrade pip
$ pip install Django
</code></pre>
<h3><a class="header" href="#create-django-project" id="create-django-project">Create Django Project</a></h3>
<pre><code class="language-bash"># $ django-admin startproject django
# This command occurs error so we use other steps below.
$ django-admin startproject djreact
$ mv djreact django
</code></pre>
<h3><a class="header" href="#create-a-hrefhttpspipreadthedocsioen11requirementshtmlrequirementstxta-file" id="create-a-hrefhttpspipreadthedocsioen11requirementshtmlrequirementstxta-file">Create <a href="https://pip.readthedocs.io/en/1.1/requirements.html"><code>requirements.txt</code></a> file</a></h3>
<pre><code class="language-bash">$ vim requirements.txt
</code></pre>
<pre><code>Django==1.9.3
</code></pre>
<h3><a class="header" href="#set-up-for-git" id="set-up-for-git">Set Up for Git</a></h3>
<pre><code class="language-bash">$ git init
$ vim .gitignore
</code></pre>
<pre><code>*.pyc
db.sqlite3
__pycache__
</code></pre>
<h3><a class="header" href="#run-server" id="run-server">Run Server</a></h3>
<pre><code class="language-bash">$ cd django
$ python manage.py runserver
</code></pre>
<p>Open <a href="http://localhost:8000">http://localhost:8000</a></p>
<h2><a class="header" href="#step-2-add-non-reactjs-views" id="step-2-add-non-reactjs-views">Step 2: Add non-reactJS views</a></h2>
<h3><a class="header" href="#add-to-urlspy" id="add-to-urlspy">Add to <code>urls.py</code></a></h3>
<pre><code>$ cd djreact
$ vim urls.py
</code></pre>
<pre><code class="language-python">from django.views import generic

urlpatterns = [
  url(r'^admin/', admin.site.urls),
  url(r'^view2/',
      generic.TemplateView.as_view(template_name='view2.html')),
  url(r'^$',
      generic.TemplateView.as_view(template_name='view1.html')),
]
</code></pre>
<h3><a class="header" href="#add-templates" id="add-templates">Add templates</a></h3>
<p>Make directory named <code>templates</code> in <code>djreact</code> folder.</p>
<pre><code class="language-bash">$ mkdir templates
</code></pre>
<p>Add <code>templates</code> directory path to <code>settings.py</code>. Add below codes in <code>setting.py</code>.</p>
<pre><code class="language-python">TEMPLATES = [
    {
        ...
        'DIRS': [os.path.join(BASE_DIR, 'djreact/templates')],
        ...
    },
]
</code></pre>
<pre><code class="language-bash">$ vim base.html
</code></pre>
<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html class=&quot;no-js&quot; lang=&quot;&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;meta http-equiv=&quot;x-ua-compatible&quot; content=&quot;ie=edge&quot;&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css&quot; integrity=&quot;sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7&quot; crossorigin=&quot;anonymous&quot;&gt;
  &lt;/head&gt;
  &lt;body&gt;
    {% block main %}{% endblock %}
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<pre><code class="language-bash">$ vim view1.html
</code></pre>
<pre><code class="language-html">{% extends &quot;base.html&quot; %}

{% block main %}
&lt;div class=&quot;container&quot;&gt;
  &lt;h1&gt;View 1&lt;/h1&gt;
&lt;/div&gt;
{% endblock %}
</code></pre>
<pre><code class="language-bash">$ vim view2.html
</code></pre>
<pre><code class="language-html">{% extends &quot;base.html&quot; %}

{% block main %}
&lt;div class=&quot;container&quot;&gt;
  &lt;h1&gt;View 2&lt;/h1&gt;
&lt;/div&gt;
{% endblock %}
</code></pre>
<h3><a class="header" href="#run-server-1" id="run-server-1">Run Server</a></h3>
<pre><code class="language-bash">$ python manage.py runserver
</code></pre>
<p>Open <a href="http://localhost:8000">http://localhost:8000</a> and <a href="http://localhost:8000/view2/">http://localhost:8000/view2/</a></p>
<h2><a class="header" href="#step-3-add-django-webpack-loader" id="step-3-add-django-webpack-loader">Step 3: Add django-webpack-loader</a></h2>
<pre><code class="language-bash">$ pip freeze
$ pip install django-webpack-loader
$ vim requirements.txt
</code></pre>
<pre><code class="language-txt">Django==1.9.3
django-webpack-loader==0.2.4
</code></pre>
<p>Add <code>webpack_loader</code> in <code>settings.py</code>:</p>
<pre><code class="language-python">INSTALLED_APPS = [
    ...
    'webpack_loader',
]
</code></pre>
<p>Add <code>static</code> folder directory in <code>settings.py</code>:</p>
<pre><code class="language-python">STATICFILES_DIRS = [
    os.path.join(BASE_DIR, 'djreact/static'),
]
</code></pre>
<p>Create <code>package.json</code> in django</p>
<pre><code class="language-bash">$ vim package.json
</code></pre>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;djreact&quot;,
  &quot;version&quot;: &quot;0.0.1&quot;,
  &quot;devDependencies&quot;: {
    &quot;babel&quot;: &quot;^6.5.2&quot;,
    &quot;babel-core&quot;: &quot;^6.6.5&quot;,
    &quot;babel-eslint&quot;: &quot;^5.0.0&quot;,
    &quot;babel-loader&quot;: &quot;^6.2.4&quot;,
    &quot;babel-plugin-transform-decorators-legacy&quot;: &quot;^1.3.4&quot;,
    &quot;babel-preset-es2015&quot;: &quot;^6.6.0&quot;,
    &quot;babel-preset-react&quot;: &quot;^6.5.0&quot;,
    &quot;babel-preset-stage-0&quot;: &quot;^6.5.0&quot;,
    &quot;eslint&quot;: &quot;^2.2.0&quot;,
    &quot;react&quot;: &quot;^0.14.7&quot;,
    &quot;react-hot-loader&quot;: &quot;^1.3.0&quot;,
    &quot;redux-devtools&quot;: &quot;^3.1.1&quot;,
    &quot;webpack&quot;: &quot;^1.12.13&quot;,
    &quot;webpack-bundle-tracker&quot;: &quot;0.0.93&quot;,
    &quot;webpack-dev-server&quot;: &quot;^1.14.1&quot;
  },
  &quot;dependencies&quot;: {
    &quot;es6-promise&quot;: &quot;^3.1.2&quot;,
    &quot;isomorphic-fetch&quot;: &quot;^2.2.1&quot;,
    &quot;lodash&quot;: &quot;^4.5.1&quot;,
    &quot;radium&quot;: &quot;^0.16.6&quot;,
    &quot;react-cookie&quot;: &quot;^0.4.5&quot;,
    &quot;react-dom&quot;: &quot;^0.14.7&quot;,
    &quot;react-redux&quot;: &quot;^4.4.0&quot;,
    &quot;redux&quot;: &quot;^3.3.1&quot;,
    &quot;redux-thunk&quot;: &quot;^1.0.3&quot;
  }
}
</code></pre>
<pre><code class="language-bash">$ npm install
</code></pre>
<pre><code class="language-bash">$ vim .gitignore
</code></pre>
<pre><code class="language-vim">...
node_modules
...
</code></pre>
<pre><code class="language-bash">$ touch webpack.base.config.js webpack.local.config.js
</code></pre>
<p>In <code>webpack.base.config.js</code>:</p>
<pre><code class="language-javascript">var path = require(&quot;path&quot;)
var webpack = require('webpack')

module.exports = {
  context: __dirname,

  entry: {
    // Add as many entry points as you have container-react-components here
    App1: './reactjs/App1',
    vendors: ['react'],
  },

  output: {
      path: path.resolve('./djreact/static/bundles/local/'),
      filename: &quot;[name]-[hash].js&quot;
  },

  externals: [
  ], // add all vendor libs

  plugins: [
    new webpack.optimize.CommonsChunkPlugin('vendors', 'vendors.js'),
  ], // add all common plugins here

  module: {
    loaders: [] // add all common loaders here
  },

  resolve: {
    modulesDirectories: ['node_modules', 'bower_components'],
    extensions: ['', '.js', '.jsx']
  },
}
</code></pre>
<p>In <code>webpack.local.config.js</code>:</p>
<pre><code class="language-javascript">var path = require(&quot;path&quot;)
var webpack = require('webpack')
var BundleTracker = require('webpack-bundle-tracker')
var config = require('./webpack.base.config.js')

config.devtool = &quot;#eval-source-map&quot;

config.plugins = config.plugins.concat([
  new BundleTracker({filename: './webpack-stats-local.json'}),
])

config.module.loaders.push(
  { test: /\.jsx?$/, exclude: /node_modules/, loaders: ['react-hot', 'babel'] }
)

module.exports = config
</code></pre>
<pre><code class="language-bash">$ touch .babelrc
</code></pre>
<pre><code>{
  &quot;presets&quot;: [&quot;es2015&quot;, &quot;react&quot;, &quot;stage-0&quot;],
  &quot;plugins&quot;: [
    [&quot;transform-decorators-legacy&quot;],
  ]
}
</code></pre>
<h3><a class="header" href="#write-reackjs-codes" id="write-reackjs-codes">Write ReackJS codes</a></h3>
<p>Create <code>reactjs</code> folder in <code>django</code> folder.</p>
<pre><code>$ mkdir reactjs &amp;&amp; cd reactjs
$ mkdir containers components
$ touch App1.jsx containers/App1Container.jsx components/Headline.jsx
</code></pre>
<h4><a class="header" href="#app1jsx" id="app1jsx"><code>App1.jsx</code></a></h4>
<pre><code class="language-jsx">import React from &quot;react&quot;
import { render } from &quot;react-dom&quot;

import App1Container from &quot;./containers/App1Container&quot;

class App1 extends React.Component {
  render() {
    return (
      &lt;App1Container /&gt;
    )
  }
}

render(&lt;App1/&gt;, document.getElementById('App1'))
</code></pre>
<h4><a class="header" href="#containersapp1containerjsx" id="containersapp1containerjsx"><code>containers/App1Container.jsx</code></a></h4>
<pre><code class="language-jsx">import React from &quot;react&quot;

import Headline from &quot;../components/Headline&quot;

export default class App1Container extends React.Component {
  render() {
    return (
      &lt;div className=&quot;container&quot;&gt;
        &lt;div className=&quot;row&quot;&gt;
          &lt;div className=&quot;col-sm-12&quot;&gt;
            &lt;Headline&gt;Sample App!&lt;/Headline&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    )
  }
}
</code></pre>
<h4><a class="header" href="#componentsheadlinejsx" id="componentsheadlinejsx"><code>components/Headline.jsx</code></a></h4>
<pre><code class="language-jsx">import React from &quot;react&quot;

export default class Headline extends React.Component {
  render() {
    return (
      &lt;h1&gt;{ this.props.children }&lt;/h1&gt;
    )
  }
}
</code></pre>
<h2><a class="header" href="#step-4-use-the-bundle" id="step-4-use-the-bundle">Step 4: Use the bundle</a></h2>
<h4><a class="header" href="#view1html" id="view1html"><code>view1.html</code></a></h4>
<pre><code class="language-html">{% extends &quot;base.html&quot; %}
{% load render_bundle from webpack_loader %}

{% block main %}
&lt;div id=&quot;App1&quot;&gt;&lt;/div&gt;
{% render_bundle 'vendors' %}
{% render_bundle 'App1' %}
{% endblock %}
</code></pre>
<h4><a class="header" href="#settingspy" id="settingspy"><code>settings.py</code></a></h4>
<pre><code class="language-python">WEBPACK_LOADER = {
    'DEFAULT': {
        'BUNDLE_DIR_NAME': 'bundles/local/',
        'STATS_FILE': os.path.join(BASE_DIR, 'webpack-stats-local.json'),
    }
}
</code></pre>
<h4><a class="header" href="#run-server-2" id="run-server-2">Run server</a></h4>
<pre><code>$ python manage.py runserver
</code></pre>
<p>Open <a href="http://localhost:8000">http://localhost:8000</a></p>
<h4><a class="header" href="#make-a-change" id="make-a-change">Make a change</a></h4>
<p>In <code>App1Container.jsx</code>, change <code>Sample App!</code> to <code>Something New!</code>.</p>
<pre><code class="language-bash">$ node_modules/.bin/webpack --config webpack.local.config.js
$ python manage.py runserver
</code></pre>
<p>Open <a href="http://localhost:8000">http://localhost:8000</a></p>
<h2><a class="header" href="#step-5-hot-reloading" id="step-5-hot-reloading">Step 5: Hot Reloading</a></h2>
<p>Make <code>server.js</code> file in <code>django</code> folder</p>
<pre><code class="language-bash">$ touch server.js
</code></pre>
<h4><a class="header" href="#serverjs" id="serverjs"><code>server.js</code></a></h4>
<pre><code class="language-javascript">var webpack = require('webpack')
var WebpackDevServer = require('webpack-dev-server')
var config = require('./webpack.local.config')

new WebpackDevServer(webpack(config), {
  publicPath: config.output.publicPath,
  hot: true,
  inline: true,
  historyApiFallback: true,
}).listen(3000, config.ip, function (err, result) {
  if (err) {
    console.log(err)
  }

  console.log('Listening at ' + config.ip + ':3000')
})
</code></pre>
<h4><a class="header" href="#webpacklocalconfigjs" id="webpacklocalconfigjs"><code>webpack.local.config.js</code></a></h4>
<pre><code class="language-javascript">var ip = 'localhost'

config.entry = {
  App1: [
    'webpack-dev-server/client?http://' + ip + ':3000',
    'webpack/hot/only-dev-server',
    './reactjs/App1',
  ],
}

config.output.publicPath = 'http://' + ip + ':3000' + '/assets/bundles/'

config.plugins = config.plugins.concat([
  new webpack.HotModuleReplacementPlugin(),
  new webpack.NoErrorsPlugin(),
  new BundleTracker({filename: './webpack-stats-local.json'}),
])
</code></pre>
<pre><code class="language-bash"># run these two commands in different terminer!
$ node server.js
$ python manage.py runserver
</code></pre>
<p>Change codes in <code>App1Container.jsx</code> and checkout the updates in <a href="https://localhost:8000">https://localhost:8000</a></p>
<h2><a class="header" href="#step-6-going-to-production" id="step-6-going-to-production">Step 6: Going to production</a></h2>
<h4><a class="header" href="#create-webpackstageconfigjs" id="create-webpackstageconfigjs">Create <code>webpack.stage.config.js</code></a></h4>
<pre><code class="language-bash">$ touch webpack.stage.config.js
</code></pre>
<pre><code class="language-javascript">var webpack = require('webpack')
var BundleTracker = require('webpack-bundle-tracker')

var config = require('./webpack.base.config.js')

config.output.path = require('path').resolve('./djreact/static/bundles/stage/')

config.plugins = config.plugins.concat([
  new BundleTracker({filename: './webpack-stats-stage.json'}),

  // removes a lot of debugging code in React
  new webpack.DefinePlugin({
    'process.env': {
      'NODE_ENV': JSON.stringify('staging'),
      'BASE_API_URL': JSON.stringify('https://sandbox.example.com/api/v1/'),
  }}),

  // keeps hashes consistent between compilations
  new webpack.optimize.OccurenceOrderPlugin(),

  // minifies your code
  new webpack.optimize.UglifyJsPlugin({
    compressor: {
      warnings: false
    }
  })
])

// Add a loader for JSX files
config.module.loaders.push(
  { test: /\.jsx?$/, exclude: /node_modules/, loader: 'babel' }
)

module.exports = config
</code></pre>
<h4><a class="header" href="#create-webpackprodconfigjs" id="create-webpackprodconfigjs">Create <code>webpack.prod.config.js</code></a></h4>
<pre><code class="language-bash">$ touch webpack.prod.config.js
</code></pre>
<pre><code class="language-javascript">var webpack = require('webpack')
var BundleTracker = require('webpack-bundle-tracker')

var config = require('./webpack.base.config.js')

config.output.path = require('path').resolve('./djreact/static/bundles/prod/')

config.plugins = config.plugins.concat([
  new BundleTracker({filename: './webpack-stats-prod.json'}),

  // removes a lot of debugging code in React
  new webpack.DefinePlugin({
    'process.env': {
      'NODE_ENV': JSON.stringify('production'),
      'BASE_API_URL': JSON.stringify('https://example.com/api/v1/'),
  }}),

  // keeps hashes consistent between compilations
  new webpack.optimize.OccurenceOrderPlugin(),

  // minifies your code
  new webpack.optimize.UglifyJsPlugin({
    compressor: {
      warnings: false
    }
  })
])

// Add a loader for JSX files
config.module.loaders.push(
  { test: /\.jsx?$/, exclude: /node_modules/, loader: 'babel' }
)

module.exports = config
</code></pre>
<h4><a class="header" href="#update-webpacklocalconfig" id="update-webpacklocalconfig">Update <code>webpack.local.config</code></a></h4>
<pre><code class="language-javascript">config.plugins = config.plugins.concat([
  new webpack.HotModuleReplacementPlugin(),
  new webpack.NoErrorsPlugin(),
  new BundleTracker({filename: './webpack-stats-local.json'}),
  new webpack.DefinePlugin({
    'process.env': {
      'NODE_ENV': JSON.stringify('development'),
      'BASE_API_URL': JSON.stringify('https://'+ ip +':8000/api/v1/'),
  }}),
])
</code></pre>
<h4><a class="header" href="#install-fabric" id="install-fabric">Install Fabric</a></h4>
<pre><code class="language-bash">$ pip install Fabric
</code></pre>
<h4><a class="header" href="#modify-requirementstxt" id="modify-requirementstxt">Modify <code>requirements.txt</code></a></h4>
<pre><code class="language-txt">Django==1.9.3
Fabric==1.10.2
django-webpack-loader==0.2.4
</code></pre>
<h4><a class="header" href="#create-fabfilepy" id="create-fabfilepy">Create <code>fabfile.py</code></a></h4>
<pre><code class="language-python">from fabric.api import local

def webpack():
    local('rm -rf djreact/static/bundles/stage/*')
    local('rm -rf djreact/static/bundles/prod/*')
    local('webpack --config webpack.stage.config.js --progress --colors')
    local('webpack --config webpack.prod.config.js --progress --colors')
</code></pre>
<p>Your workflow will now look like this:</p>
<ol>
<li>Start <code>./manage.py runserver</code></li>
<li>Start <code>node server.js</code></li>
<li>Edit your ReactJS app</li>
<li>When done, commit your changes</li>
<li>Run <code>fab webpack</code> and commit your new bundles</li>
<li>Run a deployment</li>
</ol>
<p>On your servers, you will need a <code>local_settings.py</code> where you override the <code>WEBPACK_LOADER</code> setting like this:</p>
<pre><code class="language-javascript">WEBPACK_LOADER = {
    'DEFAULT': {
        'BUNDLE_DIR_NAME': 'bundles/stage/',  # end with slash
        'STATS_FILE': os.path.join(BASE_DIR, 'webpack-stats-stage.json'),
    }
}
</code></pre>
<p>And similar for prod, of course, just replace <code>stage</code> with <code>prod</code>.</p>
<h2><a class="header" href="#step-7-add-a-hrefhttpreduxjsorgreduxa" id="step-7-add-a-hrefhttpreduxjsorgreduxa">Step 7: Add <a href="http://redux.js.org">Redux</a></a></h2>
<h4><a class="header" href="#create-action-creators-in-reactjsactionscounteractionsjs" id="create-action-creators-in-reactjsactionscounteractionsjs">Create Action Creators in <code>reactjs/actions/counterActions.js</code>:</a></h4>
<pre><code class="language-javascript">export const INCREASE = &quot;INCREASE&quot;
export function increaseCounter() {
    return {type: INCREASE}
}
</code></pre>
<h4><a class="header" href="#create-reactjsreducerscountersjs" id="create-reactjsreducerscountersjs">Create <code>reactjs/reducers/counters.js</code></a></h4>
<pre><code class="language-javascript">import * as sampleActions from &quot;../actions/counterActions&quot;

const initialState = {
  clicks: 0,
}

export default function counters(state=initialState, action={}) {
  switch (action.type) {
  case sampleActions.INCREASE:
    return {...state, clicks: state.clicks + 1}
  default:
    return state
  }
}
</code></pre>
<h4><a class="header" href="#create-reactjsreducersindexjs" id="create-reactjsreducersindexjs">Create <code>reactjs/reducers/index.js</code></a></h4>
<pre><code class="language-javascript">export { default as counters } from './counters'
</code></pre>
<h4><a class="header" href="#update-app1jsx" id="update-app1jsx">Update App1.jsx</a></h4>
<pre><code class="language-jsx">import React from &quot;react&quot;
import { render } from &quot;react-dom&quot;
import {
  createStore,
  compose,
  applyMiddleware,
  combineReducers,
} from &quot;redux&quot;
import { Provider } from &quot;react-redux&quot;
import thunk from &quot;redux-thunk&quot;

import * as reducers from &quot;./reducers&quot;
import App1Container from &quot;./containers/App1Container&quot;

let finalCreateStore = compose(
  applyMiddleware(thunk),
  window.devToolsExtension ? window.devToolsExtension() : f =&gt; f
)(createStore)
let reducer = combineReducers(reducers)
let store = finalCreateStore(reducer)

class App1 extends React.Component {
  render() {
    return (
      &lt;Provider store={store}&gt;
        &lt;App1Container /&gt;
      &lt;/Provider&gt;
    )
  }
}

render(&lt;App1/&gt;, document.getElementById('App1'))
</code></pre>
<h4><a class="header" href="#update-app1containerjsx" id="update-app1containerjsx">Update <code>App1Container.jsx</code></a></h4>
<pre><code class="language-jsx">import React from &quot;react&quot;

import { connect } from &quot;react-redux&quot;

import * as counterActions from &quot;../actions/counterActions&quot;
import Headline from &quot;../components/Headline&quot;

@connect(state =&gt; ({
  counters: state.counters,
}))
export default class SampleAppContainer extends React.Component {
  handleClick() {
    let {dispatch} = this.props;
    dispatch(counterActions.increaseCounter())
  }

  render() {
    let {counters} = this.props
    return (
      &lt;div className=&quot;container&quot;&gt;
        &lt;div className=&quot;row&quot;&gt;
          &lt;div className=&quot;col-sm-12&quot;&gt;
            &lt;Headline&gt;Sample App!&lt;/Headline&gt;
            &lt;div onClick={() =&gt; this.handleClick()}&gt;INCREASE&lt;/div&gt;
            &lt;p&gt;{counters.clicks}&lt;/p&gt;
            &lt;p&gt;{process.env.BASE_API_URL}&lt;/p&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    )
  }
}
</code></pre>
<hr />
<h2><a class="header" href="#refer-to-6" id="refer-to-6">Refer to</a></h2>
<p><a href="https://github.com/mbrochh/django-reactjs-boilerplate">Django React Boilerplate</a></p>
<h1><a class="header" href="#python-tips" id="python-tips">Python Tips</a></h1>
<h2><a class="header" href="#1-encoding-error" id="1-encoding-error">1. Encoding Error</a></h2>
<h3><a class="header" href="#problem-6" id="problem-6">Problem</a></h3>
<pre><code class="language-bash">Traceback (most recent call last):
  File &quot;build.py&quot;, line 63, in &lt;module&gt;
    readme.write(header)
UnicodeEncodeError: 'ascii' codec can't encode characters in position 26-27: ordinal not in range(128)
</code></pre>
<h3><a class="header" href="#solved" id="solved">Solved</a></h3>
<p>Use <a href="https://docs.python.org/2/library/io.html#io.open"><code>io.open()</code></a> to create a file object that'll encode for you as you write to the file:</p>
<pre><code class="language-python">import io

f = io.open(filename, 'w', encoding='utf8')
</code></pre>
<h2><a class="header" href="#2-a-hrefhttpsdocsdjangoprojectcomen18refutilsdjangoutilsencodingpython_2_unicode_compatiblepython_2_unicode_compatiblea" id="2-a-hrefhttpsdocsdjangoprojectcomen18refutilsdjangoutilsencodingpython_2_unicode_compatiblepython_2_unicode_compatiblea">2. <a href="https://docs.djangoproject.com/en/1.8/ref/utils/#django.utils.encoding.python_2_unicode_compatible"><code>@python_2_unicode_compatible</code></a></a></h2>
<p>To support Python 2 and 3 with a single code base, define a <code>__str__</code> method returning text and apply this decorator to the class.</p>
<h1><a class="header" href="#virtualenv" id="virtualenv">Virtualenv</a></h1>
<pre><code class="language-bash">$ [sudo] pip install virtualenv
</code></pre>
<pre><code class="language-bash">$ virtualenv [--python=python3.3] myvenv
# or
$ python3 -m venv myvenv
</code></pre>
<pre><code class="language-bash">$ source myvenv/bin/activate
</code></pre>
<pre><code class="language-bash">$ deactivate
</code></pre>
<h1><a class="header" href="#transforming-code-into-beautiful-idiomatic-python" id="transforming-code-into-beautiful-idiomatic-python">Transforming Code into Beautiful, Idiomatic Python</a></h1>
<ul>
<li>Speaker: Raymond Hettinger(@raymondh), who is Python core developer</li>
<li>Lecture on Youtube: <a href="https://www.youtube.com/watch?v=OSGv2VnC0go&amp;t=503s">Transforming Code into Beautiful, Idiomatic Python</a></li>
</ul>
<h2><a class="header" href="#when-you-see-this-do-that-instead" id="when-you-see-this-do-that-instead">When you see this, do that instead!</a></h2>
<ul>
<li>Replace traditional index manipulation with Python's core looping idioms</li>
<li>Learn advanced techniques with for-else clauses and the two argument form of iter()</li>
<li>Improve your craftmanship and aim for clean, fast, idiomatic Python code</li>
</ul>
<h3><a class="header" href="#looping-over-a-range-of-numbers" id="looping-over-a-range-of-numbers">Looping over a range of numbers</a></h3>
<pre><code class="language-python">for i in [0, 1, 2, 3, 4, 5]:
    print(i**2)
  
# Pythonic-way
for i in range(6):
    print(i**2)
</code></pre>
<h3><a class="header" href="#looping-over-a-collection" id="looping-over-a-collection">Looping over a collection</a></h3>
<pre><code class="language-python">colors = ['red', 'green', 'blue', 'yellow']

for i in range(len(colors)):
    print(colors[i])
  
# Pythonic-way
for color in colors:
    print(color)
</code></pre>
<h3><a class="header" href="#looping-backwards" id="looping-backwards">Looping backwards</a></h3>
<pre><code class="language-python">colors = ['red', 'green', 'blue', 'yellow']

for i in range(len(colors)-1, -1, -1):
    print(colors[i])
  
# Pythonic-way
for color in reversed(colors):
    print(color)
</code></pre>
<h3><a class="header" href="#looping-over-a-collection-and-indicies" id="looping-over-a-collection-and-indicies">Looping over a collection and indicies</a></h3>
<pre><code class="language-python">colors = ['red', 'green', 'blue', 'yellow']

for i in range(len(colors)):
    print(i, '--&gt;', colors[i])
  
# Pythonic-way
for i, color in enumerate(colors):
    print(i, '--&gt;', colors)
</code></pre>
<h3><a class="header" href="#looping-over-two-collections" id="looping-over-two-collections">Looping over two collections</a></h3>
<pre><code class="language-python">names = ['raymond', 'rachel', 'matthew']
colors = ['red', 'green', 'blue', 'yellow']

n = min(len(names), len(colors))
for i in range(n):
    print(names[i], '--&gt;', colors[i])
  
# Pythonic-way
for name, color in zip(names, colors):
    print(name, '--&gt;', color)
</code></pre>
<h3><a class="header" href="#looping-in-sorted-order" id="looping-in-sorted-order">Looping in sorted order</a></h3>
<pre><code class="language-python">colors = ['red', 'green', 'blue', 'yellow']

for color in sorted(colors):
    print(color)
  
for color in sorted(colors, reverse=True):
    print(color)
</code></pre>
<h3><a class="header" href="#custom-sort-order" id="custom-sort-order">Custom sort order</a></h3>
<pre><code class="language-python">colors = ['red', 'green', 'blue', 'yellow']

def compare_length(c1, c2):
    if len(c1) &lt; len(c2): return -1
    if len(c1) &gt; len(c2): return 1
    return 0

# in python2
print sorted(colors, cmp=compare_length)

# Pythonic-way
print(sorted(colors, key=len))
</code></pre>
<h3><a class="header" href="#call-a-function-until-a-sentinel-value" id="call-a-function-until-a-sentinel-value">Call a function until a sentinel value</a></h3>
<pre><code class="language-python">blocks = []
while True:
    block = f.read(32)
    if block == '':
        break
    blocks.append(block)

# Pythonic-way
blocks = []
for block in iter(partial(f.read, 32), ''):
    blocks.append(block)
</code></pre>
<h3><a class="header" href="#distinguishing-multiple-exit-points-in-loops" id="distinguishing-multiple-exit-points-in-loops">Distinguishing multiple exit points in loops</a></h3>
<pre><code class="language-python">def find(seq, target):
    found = False
    for i, value in enumerate(seq):
        if value == target:
            found = True
            break
    if not found:
        return -1
    return i

# Pythonic-way
def find(seq, target):
    for i, value in enumerate(seq):
        if value == target:
            break
    else:
        return -1
    return i
</code></pre>
<h2><a class="header" href="#dictionary-skills" id="dictionary-skills">Dictionary Skills</a></h2>
<ul>
<li>Mastering dictionaries is a fundamental Python skill</li>
<li>They are fundament tool for expressing relationships, linking, counting and grouping</li>
</ul>
<h3><a class="header" href="#looping-over-dictionary-keys" id="looping-over-dictionary-keys">Looping over dictionary keys</a></h3>
<pre><code class="language-python">d = {'matthew': 'blue', 'rachel': 'green', 'raymond': 'red'}

for k in d:
    print(k)

for k in d.keys():
    if k.startswith('r'):
        del d[k]
</code></pre>
<h3><a class="header" href="#looping-over-a-dictionary-keys-and-values" id="looping-over-a-dictionary-keys-and-values">Looping over a dictionary keys and values</a></h3>
<pre><code class="language-python">for k in d:
    print(k, '--&gt;', d[k])
  
for k, v in d.items():
    print(k, '--&gt;', v)
</code></pre>
<h3><a class="header" href="#construct-a-dictionary-in-pairs" id="construct-a-dictionary-in-pairs">Construct a dictionary in pairs</a></h3>
<pre><code class="language-python">names = ['raymond', 'rachel', 'matthew']
colors = ['red', 'green', 'blue']

d = dict(zip(names, colors))  # {'raymond': 'red', 'rachel': 'green', 'matthew': 'blue'}
d = dict(enumerate(names))  # {0: 'raymond', 1: 'rachel', 2: 'matthew'}
</code></pre>
<h3><a class="header" href="#counting-with-dictionaries" id="counting-with-dictionaries">Counting with dictionaries</a></h3>
<pre><code class="language-python">colors = ['red', 'green', 'red', 'blue', 'green', 'red']

d = {}
for color in colors:
    if color not in d:
        d[color] = 0
    d[color] += 1
# {'blue': 1, 'green': 2, 'red': 3}

# Pythonic-way
d = {}
for color in colors:
    d[color] = d.get(color, 0) + 1
    
# Pythonic and modern way
from collections import defaultdict

d = defaultdict(int)
for color in colors:
    d[color] += 1
</code></pre>
<h3><a class="header" href="#grouping-with-dictionaries" id="grouping-with-dictionaries">Grouping with dictionaries</a></h3>
<pre><code class="language-python">names = ['raymond', 'rachel', 'matthew', 'roger', 'betty', 'melissa', 'judith', 'charlie']

d = {}
for name in names:
    key = len(name)
    if key not in d:
        d[key] = []
    d[key].append(name)
# {7: ['raymond', 'matthew', 'melissa', 'charlie'], 6: ['rachel', 'judith'], 5: ['roger', 'betty']}

# Pythonic-way
d = {}
for name in names:
    key = len(name)
    d.setdefault(key, []).append(name)
    
# Pythonic and modern way
from collections import defaultdict

d = defaultdict(list)
for name in names:
    key = len(name)
    d[key].append(name)
</code></pre>
<h3><a class="header" href="#is-a-dictionary-popitem-atomic" id="is-a-dictionary-popitem-atomic">Is a dictionary popitem() atomic?</a></h3>
<pre><code class="language-python">d = {'matthew': 'blue', 'rachel': 'green', 'raymond': 'red'}

while d:
    key, value = d.popitem()
    print(key, '--&gt;', value)
</code></pre>
<h3><a class="header" href="#linking-dictionaries" id="linking-dictionaries">Linking dictionaries</a></h3>
<pre><code class="language-python">import argparse
import os

defaults = {'color': 'red', 'user': 'guest'}
parser = argparse.ArgumentParser()
parser.add_argument('-u', '--user')
parser.add_argument('-c', '--color')
namespace = parser.parse_args([])
command_line_args = {k: v for k, v in vars(namespace).items() if v}

d = defaults.copy()
d.update(os.environ)
d.update(command_line_args)

# Pythonic-way
from collections import ChainMap

d = ChainMap(command_line_args, os.environ, defaults)
</code></pre>
<h2><a class="header" href="#improving-clarity" id="improving-clarity">Improving Clarity</a></h2>
<ul>
<li>Positional arguments and indicies are nice</li>
<li>Keywords and names are better</li>
<li>The first way is convenient for the computer</li>
<li>The second corresponds to how human's think</li>
</ul>
<h3><a class="header" href="#clarify-function-calls-with-keyword-arguments" id="clarify-function-calls-with-keyword-arguments">Clarify function calls with keyword arguments</a></h3>
<blockquote>
<p><em>Microseconds of computer time is hours of programmer time.</em></p>
</blockquote>
<pre><code class="language-python">twitter_search('@obama', False, 20, True)
twitter_search('@obama', retweets=False, numtweets=20, popular=True)
</code></pre>
<h3><a class="header" href="#clarify-multiple-return-values-with-named-tuples" id="clarify-multiple-return-values-with-named-tuples">Clarify multiple return values with named tuples</a></h3>
<pre><code class="language-python">doctest.testmod()  # (0, 4)
doctest.testmod()  # TestResults(failed=0, attempted=4)
TestResults = namedtuple('TestResults', ['failed', ['attempted']])
</code></pre>
<h3><a class="header" href="#unpacking-sequences" id="unpacking-sequences">Unpacking sequences</a></h3>
<pre><code class="language-python">p = 'Raymond', 'Hettinger', 0x30, 'python@example.com'

fname = p[0]
lname = p[1]
age = p[2]
email = p[3]

# Pythonic-way
fname, lname, age, email = p
</code></pre>
<h3><a class="header" href="#updating-multiple-state-variables" id="updating-multiple-state-variables">Updating multiple state variables</a></h3>
<pre><code class="language-python">def fibonacci(n):
    x = 0
    y = 1
    for i in range(n):
        print(x)
        t = y
        y = x + y
        x = t

# Pythonic-way
def fibonacci(n):
    x, y = 0, 1
    for i in range(n):
        print(x)
        x, y = y, x+y
</code></pre>
<h2><a class="header" href="#tuple-packing-and-unpacking" id="tuple-packing-and-unpacking">Tuple packing and unpacking</a></h2>
<ul>
<li>Don't under-estimate the advantages of updating state variables at the same time</li>
<li>It eliminates an entire class of errors due to out-of-order updates</li>
<li>It allows high level thinking: &quot;chunking&quot;</li>
</ul>
<h3><a class="header" href="#simultaneous-state-updates" id="simultaneous-state-updates">Simultaneous state updates</a></h3>
<pre><code class="language-python">tmp_x = x + dx*t
tmp_y = y + dy+t
tmp_dx = influence(m, x, y, dx, dy, partial='x')
tmp_dy = influence(m, x, y, dx, dy, partial='y')
x = tmp_x
y = tmp_y
dx = tmp_dx
dy = tmp_dy

# Pythonic-way
x, y, dx, dy = (x + dx*t, 
                y + dy*t, 
                influence(m, x, y, dx, dy, partial='x'), 
                influence(m, x, y, dx, dy, partial='y'))           
</code></pre>
<h2><a class="header" href="#efficiency" id="efficiency">Efficiency</a></h2>
<ul>
<li>An optimization fundamental rule</li>
<li>Don't cause data to move around unnecessarily</li>
<li>It takes only a little care to avoid O(n**2) behavior instead of linear behavior</li>
</ul>
<h3><a class="header" href="#concatenating-strings" id="concatenating-strings">Concatenating strings</a></h3>
<pre><code class="language-python">names = ['raymond', 'rachel', 'matthew', 'roger', 
         'betty', 'melissa', 'judith', 'charlie']

s = names[0]
for name in names[1:]:
    s += ', ' + name
print(s)  # raymond, rachel, matthew, roger, betty, melissa, judith, charlie

# Pythonic-way
print(', '.join(names))  # raymond, rachel, matthew, roger, betty, melissa, judith, charlie
</code></pre>
<h3><a class="header" href="#updating-sequences" id="updating-sequences">Updating sequences</a></h3>
<pre><code class="language-python">names = ['raymond', 'rachel', 'matthew', 'roger', 
         'betty', 'melissa', 'judith', 'charlie']

del names[0]
names.pop(0)
names.insert(0, 'mark')

# Pythonic-way
from collections import deque

names = deque(['raymond', 'rachel', 'matthew', 'roger', 
         'betty', 'melissa', 'judith', 'charlie'])
del names[0]
names.popleft()
names.appendleft('mark')
</code></pre>
<h2><a class="header" href="#decorators-and-context-managers" id="decorators-and-context-managers">Decorators and Context Managers</a></h2>
<ul>
<li>Helps separate business logic from administrative logic</li>
<li>Clean, beautiful tools for factoring code and improving code reuse</li>
<li>Good naming is essential</li>
<li>Remember the Spiderman rule: With great power, comes great responsibility!</li>
</ul>
<h3><a class="header" href="#using-decorators-to-factor-out-administrative-logic" id="using-decorators-to-factor-out-administrative-logic">Using decorators to factor-out administrative logic</a></h3>
<pre><code class="language-python">def web_lookup(url, saved={}):
    if url in saved:
        return saved[url]
    page = urllib.urlopen(url).read()
    saved[url] = page
    return page

# Pythonic-way
# Caching decorator
def cache(func):
    saved = {}
    @wraps(func)
    def newfunc(*args):
        if args in saved:
            return newfunc(*args)
        result = func(*args)
        saved[args] = result
        return result
    return newfunc

@cache
def web_lookup(url):
    return urllib.urlopen(url).read()
</code></pre>
<h3><a class="header" href="#factor-out-temporary-contexts" id="factor-out-temporary-contexts">Factor-out temporary contexts</a></h3>
<pre><code class="language-python">old_context = getcontext().copy()
getcontext().prec = 50
print(Decimal(355)/Decimal(113))
setcontext(old_context)

# Pythonic-way
with localcontext(Context(prec=50)):
    print(Decimal(355)/Decimal(113))
</code></pre>
<h3><a class="header" href="#how-to-open-and-close-files" id="how-to-open-and-close-files">How to open and close files</a></h3>
<pre><code class="language-python">f = open('data.txt')
try:
    data = f.read()
finally:
    f.close()
    
# Pythonic-way
with open('data.txt') as f:
    data = f.read()
</code></pre>
<h3><a class="header" href="#how-to-use-locks" id="how-to-use-locks">How to use locks</a></h3>
<pre><code class="language-python"># Make a lock
lock = threading.Lock()

# Old-way to use a lock
lock.acquire()
try:
    print('Critical section 1')
    print('Critical section 2')
finally:
    lock.release()
    
# New-way to use a lock(# Pythonic-way)
with lock:
    print('Critical section 1')
    print('Critical section 2') 
</code></pre>
<h3><a class="header" href="#factor-out-temporary-contexts-1" id="factor-out-temporary-contexts-1">Factor-out temporary contexts</a></h3>
<pre><code class="language-python">try:
    os.remove('somefile.tmp')
except OSError:
    pass

# Pythonic-way
@contextmanager
def ignored(*exceptions):
    try:
        yield
    except exceptions:
        pass

with ignored(OSError):
    os.remove('somefile.tmp')
</code></pre>
<pre><code class="language-python">with open('help.txt', 'w') as f:
    oldstdout = sys.stdout
    sys.stdout = f
    try:
        help(pow)
    finally:
        sys.stdout = oldstdout

# Pythonic-way
@contextmanager
def redirect_stdout(fileobj):
    oldstdout = sys.stdout
    sys.stdout = fileobj
    try:
        yield fieldobj
    finally:
        sys.stdout = oldstdout

with open('help.txt', 'w') as f:
    with redirect_stdout(f):
        help(pow)
    
</code></pre>
<h2><a class="header" href="#concise-expressive-one-liners" id="concise-expressive-one-liners">Concise Expressive One-Liners</a></h2>
<ul>
<li>Two conficting rules:
<ul>
<li>Don't put too much on one line</li>
<li>Don't break atoms of thought into subatomic particles</li>
</ul>
</li>
<li>Raymond's rule:
<ul>
<li>One logical line of code equals one sentence in English</li>
</ul>
</li>
</ul>
<h3><a class="header" href="#list-comprehensions-and-generator-exprssions" id="list-comprehensions-and-generator-exprssions">List Comprehensions and Generator Exprssions</a></h3>
<pre><code class="language-python">result = []
for i in range(10):
    s = i ** 2
    result.append(s)
print(sum(result))

# Pythonic-way
result = sum(i**2 for i in range(10))
</code></pre>
<h1><a class="header" href="#reactjs" id="reactjs">React.js</a></h1>
<h2><a class="header" href="#1-install-global-package" id="1-install-global-package">1. Install global package</a></h2>
<pre><code class="language-bash">npm install -g babel webpack webpack-dev-server
</code></pre>
<h2><a class="header" href="#2-create-project-folder" id="2-create-project-folder">2. Create project folder</a></h2>
<pre><code class="language-bash">mkdir &lt;project-folder&gt; &amp;&amp; cd &lt;project-folder&gt;
npm init
</code></pre>
<h2><a class="header" href="#3-install-plugin" id="3-install-plugin">3. Install plugin</a></h2>
<pre><code class="language-bash">npm install --save react react-dom
npm install --save-dev babel-core babel-loader babel-preset-es2015 babel-preset-react webpack webpack-dev-server
</code></pre>
<h2><a class="header" href="#4-create-files" id="4-create-files">4. Create files</a></h2>
<pre><code class="language-bash">mkdir src src/components public
touch public/index.html src/components/App.js src/index.js webpack.config.js
</code></pre>
<h2><a class="header" href="#5-configure-compiler-server-loader" id="5-configure-compiler-server-loader">5. Configure compiler, server, loader</a></h2>
<p>in <strong>webpack.config.js</strong></p>
<pre><code class="language-js">module.exports = {
  entry: './src/index.js',

  output: {
    path: __dirname + '/public/',
    filename: 'bundle.js'
  },

  devServer: {
    inline: true,
    port: 7777,
    contentBase: __dirname + '/public/'
  },

  module: {
    loaders: [
      {
        test: /\.js$/,
        loader: 'babel',
        exclude: /node_modules/,
        query: {
          cacheDirectory: true,
          presets: ['es2015', 'react']
        }
      }
    ]
  }
};
</code></pre>
<p>in <strong>package.json</strong></p>
<pre><code class="language-json">&quot;scripts&quot;: {
  &quot;start&quot;: &quot;webpack-dev-server --hot --host 0.0.0.0&quot;
}
</code></pre>
<h2><a class="header" href="#6-components" id="6-components">6. Components</a></h2>
<p>in <strong>public/index.html</strong></p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;title&gt;React App&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;
  &lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>
<p>in <strong>src/components/App.js</strong></p>
<blockquote>
<p>It's <strong>React's Naming Convention</strong> to set component's and file's <strong>first letter to Capital letter</strong>.</p>
</blockquote>
<pre><code class="language-js">import React from 'react';

class App extends React.Component {
  render(){
    return (
      &lt;h1&gt;Hello, React!&lt;/h1&gt;
    );
  }
}

export default App;
</code></pre>
<p>in <strong>src/index.js</strong></p>
<pre><code class="language-js">import React from 'react';
import ReactDOM from 'react-dom';
import App from './components/App';

const rootElement = document.getElementById('root');
ReactDOM.render(&lt;App /&gt;, rootElement);
</code></pre>
<h2><a class="header" href="#7-run-server" id="7-run-server">7. Run server</a></h2>
<pre><code class="language-bash">npm start
</code></pre>
<p>Open browser, go to <a href="https://localhost:7777">localhost:7777</a>.</p>
<hr />
<h2>title: sicp-1_02
created: 2020-05-10T04:06:24.639Z
modified: 2020-05-10T04:09:34.038Z</h2>
<pre><code class="language-lisp">(/ (+ 5 4 (- 2 (- 3 (+ 6 (/ 4 5))))) (* 3 (- 6 2)) (- 2 7))
</code></pre>
<hr />
<h2>title: sicp-1_03
created: 2020-05-10T04:09:04.340Z
modified: 2020-05-10T04:11:12.239Z</h2>
<pre><code class="language-lisp">(define (square a)
  (* a a))

(define (sum-of-squares a b)
  (+ (square a) (square b)))

(define (cal a b c)
  (cond ((and (&gt; a b) (&gt; c b)) (sum-of-squares a c))
        ((and (&gt; b a) (&gt; c a)) (sum-of-squares b c))
        (else (sum-of-squares a b))))

</code></pre>
<hr />
<h2>title: sicp-1_05
created: 2020-05-10T04:10:45.347Z
modified: 2020-05-10T04:11:21.657Z</h2>
<pre><code class="language-lisp">(define (p) (p))

(define (test x y)
  (if (= x 0)
    0
    y))

(test 0 (p))
</code></pre>
<p>인자 먼저 계산법(<em>applicative order evaluation</em>) 을 따른다면, <code>(test 0 (p))</code> 를 실행할 때 인자인 <code>(p)</code>를 먼저 계산하려고 할 것이고, <code>(define (p) (p))</code> 정의에 따라 recursive call 이 일어날 것임 =&gt; out of memory 발생</p>
<p>정의대로 계산법(<em>normal-order evaluation</em>) 을 따른다면, <code>0</code>과 <code>(p)</code>를 일단 if 문에 넣어보는데 이 때 if 문의 <code>(= x 0)</code>이 true 이므로 바로 0을 리턴할 것임. <code>(p)</code> 는 계산되지 않음.</p>
<p><strong>scheme은 인자 먼저 계산법을 따름.</strong></p>
<hr />
<h2>title: sicp-1_06
created: 2020-05-10T04:11:49.101Z
modified: 2020-05-10T04:12:07.418Z</h2>
<pre><code class="language-lisp">(define (new-if predicate then-clause else-clause)
  (cond (predicate then-clause)
        (else else-clause)))

(define (sqrt-iter guess x)
  (new-if (good-enough? guess x)
      guess
      (sqrt-iter (improve guess x)
                 x)))
</code></pre>
<p>우선 scheme은 인자 먼저 계산법을 따른 다는 것을 염두에 두어야 한다.</p>
<p>if 의 정의는 <code>if &lt;predicate&gt; &lt;consequent&gt; &lt;alternative&gt;)</code> 이다. if 문의 값을 구할 때는 <code>&lt;predicate&gt;</code> 을 먼저 계산한다.</p>
<p>반면, define 의 정의는 <code>define (&lt;name&gt; &lt;formal parameters&gt;) &lt;body&gt;</code> 이다. 여기서 <code>&lt;formal parameters&gt;</code> 가 인자가 된다. 즉, new-if 의 정의에서 <code>predicate</code>, <code>then-clause</code>, <code>else-clause</code> 가 인자인 것이다.</p>
<p>따라서 if 를 쓰면 <code>(good-enough? guess x)</code> 만 먼저 계산하지만, new-if 를 쓰면 <code>(sqrt-iter (improve guess x) x)</code> 도 먼저 계산하기 때문에 recursive call 이 발생한다.</p>
<hr />
<h2>title: sicp-1_07
created: 2020-05-10T04:12:26.489Z
modified: 2020-05-10T04:12:35.418Z</h2>
<pre><code class="language-lisp">(define (sqrt-iter guess x)
  (if (good-enough? guess x)
      guess
      (sqrt-iter (improve guess x)
                 x)))

(define (improve guess x)
  (average guess (/ x guess)))

(define (average x y)
  (/ (+ x y) 2))

(define (good-enough? guess x)
  (&lt; (abs (- (improve guess x) guess)) (* guess margin)))

(define (square a)
  (* a a))

(define margin 0.0000000000000001)

(define (sqrt x)
  (sqrt-iter 1.0 x))

(sqrt 9)
(sqrt 0.000001)
(sqrt 25000000)
(sqrt 25000000000000)
(sqrt 2500000000000000000000000000)
</code></pre>
<p>책의 힌트에 따라 <code>good-enough?</code> 의 정의를 수정하고 margin 값을 아주 작게 함.</p>
<blockquote>
<p>어림잡은 값을 조금씩 고쳐 나가면서 헌 값(<code>guess</code>)에 견주어 고친 값(<code>(improve guess x)</code>)이 그다지 나아지지 않을 때까지(<code>(* guess margin)</code>) 계산을 이어나가는 것</p>
</blockquote>
<hr />
<h2>title: sicp-1_08
created: 2020-05-10T04:12:56.284Z
modified: 2020-05-10T04:13:06.477Z</h2>
<pre><code class="language-lisp">(define (sqrt-iter guess x)
  (if (good-enough? guess x)
      guess
      (sqrt-iter (improve guess x)
                 x)))

(define (improve guess x)
  (/ (+ (/ x (square guess)) (* 2 guess)) 3))

(define (good-enough? guess x)
  (&lt; (abs (- (improve guess x) guess)) (* guess margin)))

(define margin 0.0000000000000001)

(define (square a)
  (* a a))

(define (sqrt x)
  (sqrt-iter 1.0 x))

(sqrt 8)
(sqrt 0.000001)
(sqrt 8000000)
(sqrt 8000000000000)
(sqrt 8000000000000000000000000)
</code></pre>
<hr />
<h2>title: sicp-1_09
created: 2020-05-10T04:13:31.417Z
modified: 2020-05-10T04:13:41.396Z</h2>
<pre><code class="language-lisp">(define (+ a b)
  (if (= a 0)
      b
      (inc (+ (dec a) b))))

&gt; (+ 4 5)
;; (inc (+ (dec 4) 5))
;; (inc (+ 3 5))
;; (inc (inc (+ (dec 3) 5)))
;; (inc (inc (+ 2 5)))
;; (inc (inc (inc (+ (dec 2) 5))))
;; (inc (inc (inc (+ 1 5))))
;; (inc (inc (inc (inc (+ (dec 1) 5)))))
;; (inc (inc (inc (inc (+ 0 5)))))
;; (inc (inc (inc (inc 5))))
;; (inc (inc (inc 6)))
;; (inc (inc 7))
;; (inc 8)
9
</code></pre>
<p>=&gt; 선형 재귀 프로세스(<em>linear recursive process</em>)</p>
<pre><code class="language-lisp">(define (+ a b)
  (if (= a 0)
      b
      (+ (dec a) (inc b))))

&gt; (+ 4 5)
;; (+ 3 6)
;; (+ (dec 3) (inc 6))
;; (+ 2 7)
;; (+ (dec 2) (inc 7))
;; (+ 1 8)
;; (+ (dec 1) (inc 8))
;; (+ 0 9)
9
</code></pre>
<p>=&gt; 선형 반복 프로세스 (<em>linear iterative process</em>)</p>
<hr />
<h2>title: sicp-1_10
created: 2020-05-10T04:14:13.221Z
modified: 2020-05-10T04:14:51.520Z</h2>
<pre><code class="language-lisp">(define (A x y)
  (cond ((= y 0) 0)
        ((= x 0) (* 2 y))
        ((= y 1) 2)
        (else (A (- x 1)
                 (A x (- y 1))))))

&gt; (A 1 10)
1024
&gt; (A 2 4)
65536
&gt; (A 3 3)
65536
</code></pre>
<blockquote>
<p>0보다 큰 정수 n이 있을 때 f, g, h 프로시저의 기능을 수학으로 정의해 보라.</p>
</blockquote>
<pre><code class="language-lisp">(define (f n) (A 0 n))

(A 0 n)
;; (* 2 n)
</code></pre>
<p>\[ f(n) = 2n \]</p>
<pre><code class="language-lisp">(define (g n) (A 1 n))

(A 1 n)
;; (A 0 (A 1 (- n 1)))
</code></pre>
<p>\[ g(n) = f(g(n-1)) = 2g(n-1)) \]
\[ \therefore g(n) = \begin{cases} 1 &amp; \quad \text{if } n=1 \\ 2^{n} &amp; \quad \text{if } n&gt;1 \end{cases} \]</p>
<pre><code class="language-lisp">(define (h n) (A 2 n))

(A 2 n)
;; (A 1 (A 2 (- n 1)))
</code></pre>
<p>\[ h(n) = g(h(n-1)) = 2^{h(n-1)} \]
\[ \therefore h(n) = \begin{cases} 1 &amp; \quad \text{if } n=1 \\ 2^{h(n-1)} &amp; \quad \text{if } n&gt;1 \end{cases} \]</p>
<hr />
<h2>title: sicp-racket
created: 2020-05-08T13:05:09.833Z
modified: 2020-05-10T04:15:26.372Z</h2>
<h1><a class="header" href="#racket" id="racket">Racket</a></h1>
<p>Dr Racket 다운로드: https://download.racket-lang.org/</p>
<p>sicp 패키지 설정: https://docs.racket-lang.org/sicp-manual/Installation.html</p>
<p>Mac OS 에서 앱 실행이 안된다면? https://github.com/racket/racket/issues/1470#issuecomment-569155774</p>
<pre><code class="language-bash">xattr -r -d com.apple.quarantine /Applications/Racket\ v7.7
</code></pre>
<h1><a class="header" href="#c-basic-grammars" id="c-basic-grammars">C++ basic grammars</a></h1>
<ul>
<li><code>cout</code> formatting</li>
</ul>
<pre><code class="language-c">int main(){
    double d = 3.14159265358979;
    cout.precision(11);
    cout &lt;&lt; fixed &lt;&lt; d &lt;&lt; endl;
}
</code></pre>
<pre><code>3.14159265359
</code></pre>
<h1><a class="header" href="#dotfiles" id="dotfiles">Dotfiles</a></h1>
<p>dotfiles 폴더에 <code>.bash_profile</code> <code>.vimrc</code> <code>.zshrc</code> 등 .(dot)으로 시작하는 설정 파일을 모아둔다. 이 때, 파일명의 .을 삭제하여 숨김을 해제한다. 그리고 원래 있던 위치에 심볼릭 링크를 만든다.</p>
<pre><code class="language-bash">$ mkdir ~/dotfiles
$ mv ~/.vimrc ~/dotfiles/vimrc
$ ln -s ~/dotfiles/vimrc ~/.vimrc
</code></pre>
<h3><a class="header" href="#참고" id="참고">참고</a></h3>
<p><a href="http://dotfiles.github.io">http://dotfiles.github.io</a>에서 <code>dotfiles</code> 에 대한 정보와 다른 사람들의 <code>dotfiles</code> 를 볼 수 있다.</p>
<blockquote>
<p>Today I Learned (2018-01-23)</p>
</blockquote>
<h1><a class="header" href="#what-is-hmac" id="what-is-hmac">What is HMAC?</a></h1>
<h2><a class="header" href="#definitions" id="definitions">Definitions</a></h2>
<h3><a class="header" href="#a-hrefhttpsenwikipediaorgwikihash-based_message_authentication_codehmaca" id="a-hrefhttpsenwikipediaorgwikihash-based_message_authentication_codehmaca"><a href="https://en.wikipedia.org/wiki/Hash-based_message_authentication_code">HMAC</a></a></h3>
<ul>
<li>In <a href="https://en.wikipedia.org/wiki/Cryptography">cryptography</a>, a <strong>keyed-hash message authentication code</strong> (<strong>HMAC</strong>) is a specific type of <a href="https://en.wikipedia.org/wiki/Message_authentication_code">message authentication code</a> (MAC) involving a <a href="https://en.wikipedia.org/wiki/Cryptographic_hash_function">cryptographic hash function</a> and a secret <a href="https://en.wikipedia.org/wiki/Cryptographic_key">cryptographic key</a>.
<ul>
<li>MAC의 특정한 구현 방법</li>
<li>어떤 hash function을 사용하느냐에 따라 HMAC-SHA1, HMAC-MD5 등으로 불린다.</li>
</ul>
</li>
<li>Pseudo Code</li>
</ul>
<pre><code>    Function hmac
       Inputs:
          key:        Bytes     array of bytes
          message:    Bytes     array of bytes to be hashed
          hash:       Function  the hash function to use (e.g. SHA-1)
          blockSize:  Integer   the block size of the underlying hash function (e.g. 64 bytes for SHA-1)
          outputSize: Integer   the output size of the underlying hash function (e.g. 20 bytes for SHA-1)
     
       Keys longer than blockSize are shortened by hashing them
       if (length(key) &gt; blockSize) then
          key ← hash(key) //Key becomes outputSize bytes long
       
       Keys shorter than blockSize are padded to blockSize by padding with zeros on the right
       if (length(key) &lt; blockSize) then
          key ← Pad(key, blockSize)  //pad key with zeros to make it blockSize bytes long
        
        o_key_pad = key xor [0x5c * blockSize]   //Outer padded key
        i_key_pad = key xor [0x36 * blockSize]   //Inner padded key
        
        return hash(o_key_pad ∥ hash(i_key_pad ∥ message)) //Where ∥ is concatenation
</code></pre>
<ul>
<li>Blocksize is 64 (bytes) when using one of the following hash functions: SHA-1, MD5, RIPEMD-128/160.</li>
<li>Q. <code>0x5c</code> 와 <code>0x36</code> 는 어떻게 정해진 것인가?
<ul>
<li>그냥. 사실 opad !=  ipad 이기만 하면 된다. <a href="https://crypto.stackexchange.com/a/3006">link</a></li>
</ul>
</li>
</ul>
<h3><a class="header" href="#a-hrefhttpsenwikipediaorgwikimessage_authentication_codemaca" id="a-hrefhttpsenwikipediaorgwikimessage_authentication_codemaca"><a href="https://en.wikipedia.org/wiki/Message_authentication_code">MAC</a></a></h3>
<ul>
<li>
<p>In <a href="https://en.wikipedia.org/wiki/Cryptography">cryptography</a>, a <strong>message authentication code</strong> (<strong>MAC</strong>), sometimes known as a <em>tag</em>, is a short piece of information used to <a href="https://en.wikipedia.org/wiki/Message_authentication">authenticate a message</a>—in other words, to confirm that the message came from the stated sender (its authenticity) and has not been changed. The MAC value protects both a message's <a href="https://en.wikipedia.org/wiki/Data_integrity">data integrity</a> as well as its <a href="https://en.wikipedia.org/wiki/Message_authentication">authenticity</a>, by allowing verifiers (who also possess the secret key) to detect any changes to the message content.</p>
<ul>
<li>메시지를 인증하기 위해 사용되는 정보</li>
<li>공유키를 사용한다 =&gt; <em>키 관리가 중요</em></li>
<li>메시지의 <strong>무결성 Integrity</strong>(메시지가 변경되지 않음)과 <strong>인증 Authentication</strong>(올바른 송신자에게서 받은 메세지임)을 보장하기 위해</li>
</ul>
</li>
<li>
<p>However, to allow the receiver to be able to detect <a href="https://en.wikipedia.org/wiki/Replay_attack">replay attacks</a>, the message itself must contain data that assures that this same message can only be sent once (e.g. time stamp, sequence number or use of a one-time MAC). Otherwise an attacker could – without even understanding its content – record this message and play it back at a later time, producing the same result as the original sender.</p>
<ul>
<li>취약점: replay attack에 노출될 수 있음. 이 문제는 메시지에 <em>한 번만 사용될 수 있는 메시지(예를 들면, 시간 값, 일련번호 등)</em> 를 포함시키는 것으로 해결 가능.</li>
</ul>
</li>
</ul>
<h3><a class="header" href="#cryptographic-hash-functions" id="cryptographic-hash-functions">Cryptographic hash functions</a></h3>
<ul>
<li>SHA-1</li>
<li>SHA-256</li>
<li>MD-5</li>
</ul>
<h2><a class="header" href="#usage-1" id="usage-1">Usage</a></h2>
<h3><a class="header" href="#python의-a-hrefhttpsdocspythonorg36libraryhmachtmlhmaca-내장-모듈" id="python의-a-hrefhttpsdocspythonorg36libraryhmachtmlhmaca-내장-모듈">Python의 <a href="https://docs.python.org/3.6/library/hmac.html">hmac</a> 내장 모듈</a></h3>
<p><a href="https://tools.ietf.org/html/rfc2104.html"><strong>RFC 2104</strong></a>를 토대로 구현했다고 합니다.</p>
<ul>
<li>hmac.<strong>new</strong>(<em>key</em>, <em>msg=None</em>, <em>digestmod=None</em>)
<ul>
<li>Return a new <strong>HMAC</strong> object. <em>key</em> is a bytes or bytearray object giving the secret key. If <em>msg</em> is present, the method call <code>update(msg)</code> is made. <em>digestmod</em> is the digest name, digest constructor or module for the HMAC object to use. It supports any name suitable to <a href="https://docs.python.org/3.6/library/hashlib.html#hashlib.new"><code>hashlib.new()</code></a> and defaults to the <code>hashlib.md5</code> constructor.</li>
</ul>
</li>
<li>HMAC.<strong>update</strong>(<em>msg</em>)
<ul>
<li>Update the HMAC object with <em>msg</em>. Repeated calls are equivalent to a single call with the concatenation of all the arguments: <code>m.update(a); m.update(b)</code> is equivalent to <code>m.update(a + b)</code>.</li>
</ul>
</li>
<li>HMAC.<strong>digest</strong>()
<ul>
<li>Return the digest of the bytes passed to the <a href="https://docs.python.org/3.6/library/hmac.html#hmac.HMAC.update"><code>update()</code></a> method so far. This bytes object will be the same length as the <em>digest_size</em> of the digest given to the constructor. It may contain non-ASCII bytes, including NUL bytes.</li>
</ul>
</li>
</ul>
<hr />
<h4><a class="header" href="#more---읽을거리" id="more---읽을거리">More - 읽을거리</a></h4>
<ul>
<li><a href="http://d2.naver.com/helloworld/318732">패스워드 저장 알고리즘</a></li>
<li><a href="http://starplatina.tistory.com/entry/%EB%B9%84%EB%B0%80%EB%B2%88%ED%98%B8-%ED%95%B4%EC%8B%9C%EC%97%90-%EC%86%8C%EA%B8%88%EC%B9%98%EA%B8%B0-%EB%B0%94%EB%A5%B4%EA%B2%8C-%EC%93%B0%EA%B8%B0">비밀번호 해시에 소금치기 - 바르게 쓰기</a></li>
</ul>
<h1><a class="header" href="#unix-command-tips" id="unix-command-tips">Unix Command Tips</a></h1>
<h2><a class="header" href="#pbcopy" id="pbcopy">pbcopy</a></h2>
<p><em>OSX only!</em> - 명령어 하나로 특정 파일의 내용을 클립보드로 복사할 수 있다.</p>
<pre><code class="language-bash">$ pbcopy &lt; ~/.ssh/id_rsa.pub
# Copies the contents of the id_rsa.pub file to your clipboard
</code></pre>
<h2><a class="header" href="#" id="">!!</a></h2>
<p>가장 최근 명령을 보여준다. 예를 들어 아래와 같이 실행 한 다음,</p>
<pre><code class="language-bash">$ vi /etc/hosts
</code></pre>
<p><code>sudo</code>로 실행해야 한다는 것을 깨달았을 때 이렇게 할 수 있음:</p>
<pre><code class="language-bash">sudo !!
</code></pre>
<ul>
<li><strong>!-N</strong>: N번째 최근 명령어. 예) !-1 가장 최근 명령어, !-2 두번째 최근 명령어</li>
<li><strong>!!</strong>: !-1와 같다</li>
<li><strong>!string</strong>: <em>string</em> 으로 시작하는 가장 최근 명령어</li>
<li><strong>!?string?</strong>: <em>string</em> 이 포함된 가장 최근 명령어</li>
</ul>
<hr />
<p>Reference</p>
<ul>
<li><a href="https://jacopretorius.net/2013/12/my-favorite-unix-trick.html">Jaco Pretorius: My Favorite Unix Trick</a></li>
</ul>
<h1><a class="header" href="#vim" id="vim">Vim</a></h1>
<h1><a class="header" href="#vim-plugin-manager-a-hrefhttpsgithubcomjunegunnvim-plugvim-pluga" id="vim-plugin-manager-a-hrefhttpsgithubcomjunegunnvim-plugvim-pluga">Vim Plugin Manager &quot;<a href="https://github.com/junegunn/vim-plug">Vim-Plug</a>&quot;</a></h1>
<h2><a class="header" href="#installation--usage" id="installation--usage">Installation &amp; Usage</a></h2>
<ol>
<li>Download <a href="https://github.com/junegunn/vim-plug/blob/master/plug.vim">plug.vim</a> in <code>~/.vim/autoload</code></li>
<li>Add a vim-plug section to your <code>~/.vimrc</code></li>
</ol>
<h4><a class="header" href="#example" id="example">Example</a></h4>
<pre><code class="language-vim">call plug#begin('~/.vim/plugged')

&quot; A Tree Explorer plugin for vim
Plug 'scrooloose/nerdtree'

&quot; Syntax checking
Plug 'scrooloose/syntastic'

&quot; Git wrapper
Plug 'tpope/vim-fugitive'

&quot; Status/tabline for vim
Plug 'bling/vim-airline'

&quot; A Code-completion engine
Plug 'valloric/youcompleteme', { 'do': './install.py' }

call plug#end()
</code></pre>
<ol start="3">
<li>Install Plugins
<code>:w</code>-&gt; <code>:source %</code> -&gt; <code>PlugInstall</code></li>
</ol>
<h1><a class="header" href="#vim-plugin-manager---vundle" id="vim-plugin-manager---vundle">Vim Plugin Manager - Vundle</a></h1>
<h2><a class="header" href="#installation-1" id="installation-1">Installation</a></h2>
<p>If you use Mac OS, Vim is already installed.</p>
<h2><a class="header" href="#set-plugins" id="set-plugins">Set Plugins</a></h2>
<h3><a class="header" href="#use-a-hrefhttpsgithubcomvundlevimvundlevimvundlea" id="use-a-hrefhttpsgithubcomvundlevimvundlevimvundlea">Use <a href="https://github.com/VundleVim/Vundle.Vim">Vundle</a></a></h3>
<pre><code class="language-bash">$ git clone https://github.com/gmarik/Vundle.vim.git ~/.vim/bundle/Vundle.vim
$ vim ~/.vimrc
</code></pre>
<pre><code class="language-vim">set nocompatible              &quot; be iMproved, required
filetype off                  &quot; required

set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()

&quot; let Vundle manage Vundle, required
Plugin 'VundleVim/Vundle.vim'

call vundle#end()            &quot; required
filetype plugin indent on    &quot; required
&quot; To ignore plugin indent changes, instead use:
&quot;filetype plugin on

&quot; Put your non-Plugin stuff after this line
</code></pre>
<p><code>:w</code> -&gt; <code>:source %</code> -&gt; <code>:PluginInstall</code></p>
<p>or</p>
<p><code>:wq</code> -&gt; <code>$ vim +PluginInstall +qall</code></p>
<h2><a class="header" href="#my-plugin-list" id="my-plugin-list">My Plugin List</a></h2>
<p><a href="http://vimawesome.com">http://vimawesome.com</a></p>
<pre><code class="language-vim">Plugin 'tpope/vim-sensible'
Plugin 'tpope/vim-fugitive'
Plugin 'scrooloose/nerdtree'
Plugin 'scrooloose/nerdcommenter'
Plugin 'scrooloose/syntastic'
Plugin 'mattn/emmet-vim'
Plugin 'valloric/youcompleteme'
Plugin 'nathanaelkane/vim-indent-guides'
Plugin 'bling/vim-airline'
</code></pre>
<h2><a class="header" href="#to-study-vim" id="to-study-vim">To Study Vim</a></h2>
<p><a href="http://www.openvim.com">http://www.openvim.com</a></p>
<h1><a class="header" href="#how-to-set-up-a-hrefhttpsgithubcomvalloricyoucompletemeyoucompletemeycma-for-vim" id="how-to-set-up-a-hrefhttpsgithubcomvalloricyoucompletemeyoucompletemeycma-for-vim">How to set up <a href="https://github.com/valloric/youcompleteme">YouCompleteMe(YCM)</a> for Vim</a></h1>
<blockquote>
<p>Installation for Mac OS X</p>
</blockquote>
<ol>
<li>Install YCM using plugin manager like Vim-plug or Vundle</li>
</ol>
<p>플러그인 매니저를 사용해서 YCM을 설치한다. 필자는 vim-plug를 사용하였으며 아래와 같이 추가하였다.</p>
<pre><code class="language-vim">call plug#begin('~/.vim/plugged')
...
Plug 'valloric/youcompleteme'
...
call plug#end()
</code></pre>
<ol start="2">
<li>Install CMake if you want C-family completion</li>
</ol>
<p>C 계열의 언어를 지원하려면 <code>CMake</code>를 설치해야 한다. 또한, <code>clang</code>을 사용하므로 <code>Command Line Tool</code>이 설치 되어 있어야 한다.(최신 버전의 Xcode를 설치하면 함께 설치 됨.)</p>
<pre><code>$ brew updates
$ brew install cmake
</code></pre>
<p>NOTE: <code>CMake</code> 설치 중 아래와 같은 에러가 나서, 접근권한을 변경하여 해결하였다.</p>
<pre><code>Error: Could not symlink share/man/man7/cmake-buildsystem.7
/usr/local/share/man/man7 is not writable.
</code></pre>
<pre><code class="language-bash">$ sudo chmod 777 /usr/local/share/man/man7
$ brew link cmake
</code></pre>
<ol start="3">
<li>Compile YCM</li>
</ol>
<pre><code class="language-bash">$ cd ~/.vim/bundle/YouCompleteMe
$ ./install.py --clang-completer
</code></pre>
<ol start="4">
<li>Config</li>
</ol>
<p><code>.vimrc</code> 파일에 아래 내용을 추가한다.</p>
<pre><code class="language-vim">&quot; &lt;YouCompleteMe&gt; {{
let g:ycm_global_ycm_extra_conf = '~/.vim/.ycm_extra_conf.py'
let g:ycm_confirm_extra_conf = 0
let g:ycm_key_list_select_completion = ['&lt;C-j&gt;', '&lt;Down&gt;']
let g:ycm_key_list_previous_completion = ['&lt;C-k&gt;', '&lt;Up&gt;']
let g:ycm_autoclose_preview_window_after_completion = 1
let g:ycm_min_num_of_chars_for_completion = 1
let g:ycm_auto_trigger = 0
let g:ycm_python_binary_path = '/usr/local/bin/python3'

nnoremap &lt;leader&gt;g :YcmCompleter GoTo&lt;CR&gt;
nnoremap &lt;leader&gt;gg :YcmCompleter GoToImprecise&lt;CR&gt;
nnoremap &lt;leader&gt;d :YcmCompleter GoToDeclaration&lt;CR&gt;
nnoremap &lt;leader&gt;t :YcmCompleter GetType&lt;CR&gt;
nnoremap &lt;leader&gt;p :YcmCompleter GetParent&lt;CR&gt;
&quot; }}
</code></pre>
<ol start="5">
<li>Usage</li>
</ol>
<p>ctrl + space 을 입력하거나, (C의 경우) <code>.</code>이나 <code>-&gt;</code>을 입력하면 자동 완성 목록이 나타난다.</p>
<h2><a class="header" href="#참고-1" id="참고-1">참고</a></h2>
<ul>
<li><a href="https://github.com/valloric/youcompleteme">https://github.com/valloric/youcompleteme</a></li>
<li><a href="http://nophotoplease.tistory.com/6">http://nophotoplease.tistory.com/6</a></li>
<li><a href="http://neverapple88.tistory.com/26">http://neverapple88.tistory.com/26</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>
        
        

    </body>
</html>
